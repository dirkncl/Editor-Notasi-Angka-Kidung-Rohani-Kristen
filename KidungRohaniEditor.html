<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Experiment: Editor Lagu Rohani Kristen</title>
<script type="text/javascript">var isLegacyIe = false;</script>
<script>
var namaFile;
namaFile='lagu-';
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||
function(e){
  "use strict";
  if(typeof e==="undefined"||typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}
  var t=e.document,
      n=function(){return e.URL||e.webkitURL||e},
      r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),
      o="download"in r,
      a=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},
      i=/constructor/i.test(e.HTMLElement)||e.safari,
      f=/CriOS\/[\d]+/.test(navigator.userAgent),
      u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},
      s="application/octet-stream",
      d=1e3*40,
      c=function(e){
        var t=function(){
              if(typeof e==="string"){
                n().revokeObjectURL(e)
              }
              else{
                e.remove()
              }
            };
        setTimeout(t,d)
      },
      l=function(e,t,n){
        t=[].concat(t);
        var r=t.length;
        while(r--){
          var o=e["on"+t[r]];
          if(typeof o==="function"){
            try{
              o.call(e,n||e)
            }
            catch(a){u(a)}
          }
        }
      },
      p=function(e){
        if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)){
          return new Blob([String.fromCharCode(65279),e],{type:e.type})
        }
        return e
      },
      v=function(t,u,d){
        if(!d){
          t=p(t)
        }
        var v=this,
            w=t.type,
            m=w===s,
            y,
            h=function(){
              l(v,"writestart progress write writeend".split(" "))
            },
            S=function(){
              if((f||m&&i)&&e.FileReader){
                var r=new FileReader;
                r.onloadend=function(){
                  var t=f?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");
                  var n=e.open(t,"_blank");
                  if(!n)
                    e.location.href=t;
                  t=undefined;
                  v.readyState=v.DONE;
                  h()
                };
                r.readAsDataURL(t);
                v.readyState=v.INIT;
                return
              }
              if(!y){
                y=n().createObjectURL(t)
              }
              if(m){
                e.location.href=y
              }
              else{
                var o=e.open(y,"_blank");
                if(!o){
                  e.location.href=y
                }
              }
              v.readyState=v.DONE;
              h();
              c(y)
           };
        v.readyState=v.INIT;
        if(o){
          y=n().createObjectURL(t);
          setTimeout(function(){
            r.href=y;
            r.download=u;
            a(r);
            h();
            c(y);
            v.readyState=v.DONE
          });
          return
        }
        S()
      },
      w=v.prototype,
      m=function(e,t,n){return new v(e,t||e.name||"download",n)};
  if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){
    return function(e,t,n){
      t=t||e.name||"download";
      if(!n){
        e=p(e)
      }
      return navigator.msSaveOrOpenBlob(e,t)
    }
  }
  w.abort=function(){};
  w.readyState=w.INIT=0;
  w.WRITING=1;
  w.DONE=2;
  w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null;
  return m
}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);
/*
if(typeof module!=="undefined"&&module.exports){
  module.exports.saveAs=saveAs
}
else if(typeof define!=="undefined"&&define!==null&&define.amd!==null){
  define("FileSaver.js",function(){return saveAs})
}
*/
function simpan() {
  //e.preventDefault();
  var text = document.getElementById('chordProSource').value;
  var filename = namaFile;
  var blob = new Blob([text], { type: "text/plain;charset=utf-8" });
  saveAs(blob, filename + ".txt");
};

function OpenFile() {
  var f = document.getElementById('note-file').files[0];
  if (f) {
  	var r = new FileReader();
    r.onload = function(e) {
	    document.getElementById('chordProSource').innerText=e.target.result; 
  	}
  	r.readAsText(f);
  } 
  else { 
  	alert("Failed to load file");
  }
};

function getNote(url){
	xhr = new XMLHttpRequest();
	xhr.open("GET", url, true);
	xhr.onload = function() {
    console.log(xhr.responseText);
		document.getElementById('chordProSource').innerText=xhr.responseText;
    
	}
	xhr.send();
};

function windowPop(url) {
  link = window.open(url,"Link","location=0,directories=0,status=0,menubar=0,scrollbars=1,resizable=0,width=800,height=600,left=0,top=0");
}

</script>
<style>
@font-face {
    font-family:Parnumation;
    src: url(Pargodungan numbered notation.ttf);
}

</style>
<!--[if lt IE 9]>
<script type="text/javascript">isLegacyIe = true;document.getElementsByTagName('html')[0].className='legacyIe';</script>
<script type="text/javascript" src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<script type="text/javascript" src="..//explorercanvas.googlecode.com/svn/trunk/excanvas.js"></script>
<link rel="stylesheet" href="../css/ugsEditorPlus.legacyIe.css" />
<![endif]-->
<!--link href='http://fonts.googleapis.com/css?family=Peralta|Smokum|Cherry+Cream+Soda|Ranchers|Creepster|Lobster|Permanent+Marker|Architects+Daughter|Bree+Serif' rel='stylesheet' type='text/css' /-->
<!--link rel="stylesheet" href="../css/yuiReset.css" /-->
<style id="../css/yuiReset.css">
/* 
    Document   : yuiReset
    Created on : Sep 15, 2012, 7:51:38 AM
    Author     : Courts
    Description:
        Purpose of the stylesheet follows.
*/
/* 
http://developer.yahoo.com/yui/reset/
*/
body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,input,textarea,p,blockquote,th,td { 
	margin:0;
	padding:0;
}
table {
	border-collapse:collapse;
	border-spacing:0;
}
fieldset,img { 
	border:0;
}
address,caption,cite,code,dfn,em,strong,th,var {
	font-style:normal;
	font-weight:normal;
}
ol,ul {
	list-style:none;
}
caption,th {
	text-align:left;
}
h1,h2,h3,h4,h5,h6 {
	font-size:100%;
	font-weight:normal;
}
q:before,q:after {
	content:'';
}
abbr,acronym {
	border:0;
}
/* add EricMeyer's HTML5 fix */
article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section {
	display: block;
	margin:0;
	padding:0;
}

</style>
<!--link rel="stylesheet" href="../css/basic-page-layout.css" /-->
<style id="../css/basic-page-layout.css">
/* 
	Document   : basic-page-layout
	Created on : Jan, 2010
	Author     : Buz
	Description:
			Page structure and elements not unique or required by UkeGeeks.
*/

/* HTML5 love*/
header,footer,section,article,aside,canvas{display:block;}
/*bsic html */
body {
	font-family:Verdana, Arial, Helvetica, sans-serif;
	font-size:12pt;
	padding:1.5em;
}
h1{
	font-family:Georgia, "Times New Roman", Times, serif;
	font-size:2.3em;
	margin-bottom:.1em;
}
h2{
	font-size:1.4em;
	margin-bottom:.4em;
}
h2 + h2 {
	margin-top: -0.31em;
}
h4{
	font-size:1.2em;
	padding:.3em 0 .6em;
}
/* HEADER
  ------------------------------ */
header hgroup aside{
	float:right;
	font-size:.8em;
	width:auto;
}
/* Pseudo Blog Post 
  ------------------------------ */
.blog-post{
	border-bottom: solid 1px #ccc;
	margin:0 0 20px;
	padding:20px 0 40px;
}
/*
  ------------------------------ */
.metaInfo{
	font-size:.9em;
	padding:.6em 0;
}
/*
  ------------------------------ */
footer{
	clear:both;
	color:#666666;
	font-size:0.82em;
	padding-top:1.6em;
}
footer small{
	border-left:solid 1px #b2b2b2;
	font-size:.9em;
	padding-left:1em;
}

/*
  ------------------------------ */
aside ul{
	list-style:none;
	margin:0;
	padding:0;
}
aside li{
	float:left;
	text-align:center;
	margin:0 10px 10px;
	padding:0;
}
aside li em{
	display:block;
	font-size:1.20em;
}

</style>
<!--link rel="stylesheet" href="../css/ukeGeeks.music.css" /-->
<style id="../css/ukeGeeks.music.css">
/*
	Document   : ukeGeeks.music
	Created on : May, 2010
	Author     : Buz
	Description:
			Classes used by UkeGeeks in a song layout.
*/

/* need to do a STRONG-ish reset (override WP theme)
*/

.ugs-song-wrap {
	font-size: 100%;
}
.ugs-song-wrap,
.ugs-song-wrap h5,
.ugs-song-wrap h6,
.ugs-song-wrap pre,
.ugs-song-wrap code,
.ugs-song-wrap strong,
.ugs-song-wrap em {
	font-family:inherit;
	font-weight:normal;
	font-size: inherit;
	font-style:normal;
	float: none;
	line-height:1;
	text-align:left;
	margin:0;
	padding:0;
	width:auto;
}
.ugs-song-wrap pre{
	background-color: transparent;
}
/*
,
.ugs-song-wrap canvas,
.ugs-song-wrap div
*/

/* old skool clearfix */
.ugs-grouped:after {
	content: ".";
	display: block;
	clear: both;
	visibility: hidden;
	line-height: 0;
	height: 0;
}
.ugs-grouped {
	display: block;
}
.ugs-grouped {
.display: inline-block;
}
.ie8 .ugs-grouped {
	display: block;
}
* html .ugs-grouped {
	height: 1%;
}
/* LAYOUT (2-COLUMNS)
  ------------------------------ */
/*  
.ugsLayoutTwoColumn .ugs-diagrams-wrap {
	float:left;
	width:225px;
}*/
.ugsLayoutTwoColumn .ugs-source-wrap {
	margin-left:50px;
}
/* CHORD CANVAS (BLOCKS)
  ------------------------------ */
.ugs-diagrams-wrap canvas {
	float:left;
	margin-right:5px;
}
.ugsIgnoredChords {
	clear: left;
	font-size: 0.9em;
	padding: 0 0 0.5em;
}
/*
  ------------------------------ */
.ugs-source-wrap h5,
.ugs-source-wrap h6 {
	border-left:solid .5em #CCC;
	color:#036;
	font-family:Georgia, "Times New Roman", Times, serif;
	font-size:1.2em;
	font-style:italic;
	line-height:1;
	margin:.4em 0 1em;
	padding:.2em 0;
	text-indent:2.3em;
}
.ugs-source-wrap h6 {
	font-size:.9em;
}
.ugs-source-wrap h5 + h6 {
	margin-top:-1em;
}
.ugs-source-wrap pre {
	color:#333;
	font-family:inherit;
	padding-top:0.4em;
	white-space:pre;
}
.ugs-source-wrap pre + h6 {
	margin-top: 2.5em;
}
.ie .ugs-source-wrap pre {
	font-family:Verdana, Arial, Helvetica, sans-serif;
}
/* CHORUS BLOCK
  ------------------------------ */
.ugs-song-wrap .ugsChorus {
	border-left:solid 3px #ddd;
	margin:1em 0 2.3em;
}
.ugsChorus pre {
	margin-left:1em;
}
.ie .ugsChorus h6,
.ugsChorus > h6 {
	font-size:1.2em;
	text-indent:.4em;
}
.ugs-song-wrap pre + .ugsChorus {
	margin-top:3.5em;
}
/* TABS
  ------------------------------ */
.ugs-song-wrap .ugsTabs {
	margin:0;
	padding:0;
}
.ugs-song-wrap .ugsTabs + .ugsPlain {
	margin:0 0 1em;
	padding:0;
}
.ugsTabs canvas{
	max-width: 100%;
}
/* PLACE CHORDS ABOVE TEXT
  ------------------------------ */
.ugs-song-wrap .ugsChords {
	line-height:3;
}
.ugsChords code {
    font-family:Parnumation; 
    

	color:#efefef;
	display:inline-block; /* WebKit bug */
	/* height:1.2em; /* WebKit bug */
	/*font-family:Verdana, Arial, Helvetica, sans-serif;*/
	/* font-size:1.2em; */
	font-weight:normal;
	position:relative;
	vertical-align: middle;/* now fix the fix for Firefox */
}
.ugsInline .ugsChords code {
    font-family:Parnumation; 

	color:#f2f2f2;
	display: inline;
	vertical-align: inherit;
}
.ugsChords code strong {
    font-family:Parnumation; 
    

	left:-4px;
	position:absolute;
	top:-2em;
}
.ugsChords code em {
    font-family:Parnumation; 

	color:#d20;
	margin:0 -3px;
}
.ie .ugsChords {
	line-height:2.6;
}
.ie code strong,
.ie code em {
    font-family:Parnumation; 

	font-weight:normal;
	font-style:normal;
}
/* SHOW CHORD NAMES INLINE
  ------------------------------ */
.ugs-song-wrap .ugsInline,
.ugs-song-wrap .ugsInline pre,
.ugs-song-wrap.ugsInline pre /* added for Editor Plus -- required? */
{
	line-height:1.8;
}
.ugsInline code {
    font-family:Parnumation; 

	padding-left:.1em;
}
.ugsInline code strong {
    font-family:Parnumation; 

	position:relative;
	top:auto;
	left:auto;
}
/* PLAIN (lyrics only) Blocks
  ------------------------------ */
.ugsPlain + h6 {
	margin-top:1.5em;
}
/* CHORD-ONLY (NO LYRICS) BLOCKS
  ------------------------------ */
.ugs-song-wrap .ugsNoLyrics {
	line-height:2;
	padding:0 0 1.2em;
}
.ugsNoLyrics + h6 {
	margin-top:.5em;
}
.ugsNoLyrics code {
    font-family:Parnumation; 

	height:auto;
	vertical-align: baseline;
}
.ugsNoLyrics code strong {
    font-family:Parnumation; 
	position:relative;
	top:auto;
	left:auto;
}
/* CHORD-ONLY (NO LYRICS) BLOCKS
  ------------------------------ */
.ugsNoChords aside {
	display: none;
}
.ugsNoChords article {
	margin-left: 0;
}
/* SHOW CHORD DIAGRAMS INLINE
  See also JS class: ukeGeeks.settings.inlineFretBox
  ------------------------------ */
.ugsInlineDiagrams .ugsChords {
	line-height:95px;
}
.ugsInlineDiagrams .ugsNoLyrics code {
    font-family:Parnumation; 

	vertical-align: text-top;
}
.ugsInlineDiagrams .ugsNoLyrics strong {
	position: absolute;
}
.ugsInlineDiagrams .ugsChords + .ugsPlain {
	padding-bottom: 40px;
}
.ugsInlineDiagrams h6 + .ugsChords {
	padding-top: 20px;
}
.ugsInlineDiagrams code {
	font-size:.8em;
	font-weight:normal;
}
.ugsInlineDiagrams .ugsChords code strong {
    font-family:Parnumation; 

	left:0;
	line-height:1;
	text-align:center;
	top:-72px;
	width: 40px;
}
.ugsChords code canvas {
    font-family:Parnumation; 

	left:0;
	position:absolute;
	top:-60px;
}
/* TODO: problem with packing */
.ugs-song-wrap .ugsInlineSpacer {
	display:inline-block;
	line-height:1px;
	width:40px;
}
/* Multi-Column Layouts
  ------------------------------ */
.ugsWrap .ugsColumn {
	float:left;
}
.ugsColumnCount2 .ugsColumn {
	width: 49.5%;
}
.ugsColumnCount3 .ugsColumn {
	width: 32.5%;
}
.ugsColumnCount4 .ugsColumn {
	width: 24.5%;
}
/* Pagebreaks
  ------------------------------ */
.ugsNewPage{
	border-width: 0;
	border-top:solid 1px #f2f2f2;
	margin: 0;
	page-break-before:always;
}


</style>
<!--link rel="stylesheet" href="../css/ugsEditorPlus.merged.css" title="ugsEditorCss" /-->
<style id="../css/ugsEditorPlus.merged.css" title="ugsEditorCss">
/*! UkeGeeks Songbook Editor page
 * Author: Buz Carter
 * Engine: LessCSS
 */
@font-face {
  font-family:font-family:Parnumation;;
  src:url("data:application/font-ttf;base64,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EQIPCTMiETIaAUsITBEICBE8EAkJCRkQEBkJCQkJiAkRCAgRCREJCREJETsREQkIEQheCQgRTAkRGgdyCBoRVCv+xxEICAgRCDMICAgZEQkhCRkIKgkJJBgqIhEICSIRIgMOCAgRETP96nf+nAm/AiIRCBkJCREIIhHUERMgDhwBlwwm/jcICBEICREIEQF9/esIOxEIEQkICREJCRocFxERGTMXCwkUDgkRDxMZEQgICAj+NyIiRAkIEQkRKhEzIBIDDgMOCREJEDMRGSv+zxkiCA8TfzdACTuHIhErBiwJCRoJGjEbIgkJGg4DIv61Ag8IAAAEAAAAAASlBokCggKGAo8ClQAAATMyFTczFhc3MxYdATIVIzUjFRQzBxUyNTIVNzMVNjcWMzI3JzUyNzMXNxc2OwEyNxY7AScyNSI1NzMHMzQ3MzYzFSMVMhcVIhUyFTcXFRcHIxUUMwYrAQYVJwYrARQHJzMnMzUjBiMVFwcVMxQjJiMVIyI1BgcjFCsBNTcjBiMXFAcGFSM1IxUWFQYVMhcUIxYzNSY1MzIXFTMWHQEUFwYVFhUzFRcVFxUjFTM1MxUXFRcGHQEUMwcVMxUUIxYVJxUWFQczFSMVMhUHMh0BFBcGHQE3FQYdARYVIhUUMwcWFTM1JzMWFxUUFxUzFSIVFBcjFTIVFwYdATM1NxYzFSMVMzcWFTMWFTI3Mxc2MxQXNzMyFxYVMjUXMzQ3NTMWFTczFDMWMzcXMzQzFjM2OwEWHQEjFTIVFjM3FjMyPQE2NxcVBxUzNTQzMjcXNxYVMxYdARQjIScjByMiNQcjIjU3FzY9ASMVIzU2MxQzNSMVIzU0Myc1NDMnNTMXNzUiJzI9ASM1MzUHIzU2MxQzNSI1MxUzNTQnNj0BNCM2NSInMyY1MxYVMzU0IzU2Myc3Jj0BMxUzNSY9ASM1MzUHJzUjNTMVMzUmIzU3BzU3IzUzNSI1NDcmNTQ3Iic2NQcjNj0BJzMnNyc0MzQnNjcnNzU3NSInNyc3NCc3Jj0BNyc3Ij0BIjU3IzUHIyIHJisBFyMmIxQjFTMVIhUjByM1MzUjFAcjIic2NSI1MjUiJzQzJic1MzUHJzU2OwEWMzcXMzcUMzYzNSM1NjMWMzcWFTcyFTczMhU3Mxc0OwEXNzUjNRczNDMyFzI9AScyNSI1NjMnNTcmPQE0Nxcz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A7oDrACpACAAcABhAHIAZwBvAGQAdQBuAGcAYQBuAC4AIAAyADAAMQAxAC4AIABBAGwAbAAgAFIAaQBnAGgAdABzACAAUgBlAHMAZQByAHYAZQBkAFIAZQBnAHUAbABhAHIAUABhAHIAbgB1AG0AYQB0AGkAbwBuADoAVgBlAHIAcwBpAG8AbgAgADEALgAwADAAVgBlAHIAcwBpAG8AbgAgADEALgAwADAAIABEAGUAYwBlAG0AYgBlAHIAIAAyACwAIAAyADAAMQAxACwAIABpAG4AaQB0AGkAYQBsACAAcgBlAGwAZQBhAHMAZQBSAGkAawBhAHIAZABvACAATAB1AG0AYgBhAG4AdABvAGIAaQBuAGcAVABoAGkAcwAgAGYAbwBuAHQAIAB3AGEAcwAgAGMAcgBlAGEAdABlAGQAIAB1AHMAaQBuAGcAIABGAG8AbgB0AEMAcgBlAGEAdABvAHIAIAA2AC4AMgAgAGYAcgBvAG0AIABIAGkAZwBoAC0ATABvAGcAaQBjAC4AYwBvAG0AaAB0AHQAcAA6AC8ALwBnAG4AaQBiAG8AdAAuAGIAbABvAGcAcwBwAG8AdAAuAGMAbwBtAE4AbwByAG0AYQBhAGwAaQBOAG8AcgBtAGEAbABlAFMAdABhAG4AZABhAGEAcgBkAE4AbwByAG0AYQBsAG4AeQQeBDEESwRHBD0ESwQ5AE4AbwByAG0A4QBsAG4AZQBOAGEAdgBhAGQAbgBvAEEAcgByAHUAbgB0AGEAAAACAAAAAAAA/5wAMgAAAAAAAAAAAAAAAAAAAAAAAAAAAJcAAAABAAIAAwAEAAYABwAIAAkACgALAAwADQAOAA8AEAARABIAEwAUABUAFgAXABgAGQAaABsAHAAdAB4AHwAgACEAIgAjACQAJQAmACcAKAApACoAKwAsAC0ALgAvADAAMQAyADMANAA1ADYANwA4ADkAOgA7ADwAPQA+AD8AQABBAEIAQwBEAEUARgBHAEgASQBKAEsATABNAE4ATwBQAFEAUgBTAFQAVQBWAFcAWABZAFoAWwBcAF0AXgBfAGAAYQCFAL0AlgDoAI4AiwCpAKQAigCDAI0AwwDeAKoArQDJAMcArgBiAGMAkADwALgA1wDYAOEBAgDbANwA3QDgANkA3wCyALMAtgC3AIIAwgCHALwA9wEDAQQAqACaAJkA7wClAJIAnACnAJQAlQd1bmkwMkM5BGxpcmEERXVybwAAAAAAAf//AAI=");
}
code {
    font-family:Parnumation; 
    font-size:1.3em; 
    text-align:justify;
    color:rgb(65,42,17); 
    background-color:rgb(253,252,241);
    margin-left:80px; 
    width:820px; 
    
}
  
.salt_oct14_880X7J {
	color: #f00;
}

.arrowBox {
  
	background-color: rgba(0,0,0,0.81);
	border: 2px solid #fff;
	border-radius: 10px;
	color: #b3b3b3;
	display: none;
	position: fixed;
	top: 60px;
	width: 310px;
	-moz-box-shadow: 3px 13px 9px rgba(0,0,0,0.5);
	-webkit-box-shadow: 3px 13px 9px rgba(0,0,0,0.5);
	box-shadow: 3px 13px 9px rgba(0,0,0,0.5);
	z-index: 5;
}
.arrowBox:after, .arrowBox:before {
	bottom: 100%;
	border: solid transparent;
	content: " ";
	height: 0;
	width: 0;
	position: absolute;
	pointer-events: none;
}
.arrowBox:after {
	border-color: rgba(0,0,0,0);
	border-bottom-color: #000;
	border-width: 20px;
	left: 50%;
	margin-left: -20px;
}
.arrowBox:before {
	border-color: rgba(255,255,255,0);
	border-bottom-color: #fff;
	border-width: 23px;
	left: 50%;
	margin-left: -23px;
}
.arrowBoxContent {
	padding: 1em .6em .4em;
}
.arrowBoxContent + .arrowBoxContent {
	padding-top: 0;
}
.enablePseudoSelects dt, .enablePseudoSelects dd {
	height: 3em;
	line-height: 1;
	margin: 0;
	padding: 0;
}
.enablePseudoSelects dd {
	display: none;
	left: 16.1em;
	position: relative;
	top: -3.1em;
	height: 0px;
}
.enablePseudoSelects label {
	color: #e4e4e4;
	display: block;
	cursor: pointer;
	border: solid 1px transparent;
	border-radius: 7px;
	padding: 0.5em;
}
.enablePseudoSelects label:hover {
	color: #fff;
	background-color: #2a2a2a;
	border-color: #555;
	-moz-box-shadow: 2px 2px 2px #000;
	-webkit-box-shadow: 2px 2px 2px #000;
	box-shadow: 2px 2px 2px #000;
}
.enablePseudoSelects label:hover em {
	color: #e4e4e4;
}
.enablePseudoSelects label em {
	color: #898989;
	float: right;
	font-family: Arial;
}
.event-userSelecting label {
	color: #b9b9b9;
}
.event-userSelecting label em {
	color: #3a3a3a;
}
html .active label {
	background-color: #000;
	color: #fff;
}
.pseudoSelect {
	position: absolute;
	background-color: #3c3c3c;
	border: solid 1px #555;
	border-radius: 7px;
	-moz-box-shadow: 2px 6px 6px rgba(0,0,0,0.53);
	-webkit-box-shadow: 2px 6px 6px rgba(0,0,0,0.53);
	box-shadow: 2px 6px 6px rgba(0,0,0,0.53);
	color: #efefef;
	cursor: pointer;
	width: 17em;
}
.pseudoSelect a {
	border: 2px solid transparent;
	border-radius: 10px;
	color: inherit;
	display: block;
	padding: 0.5em 0.5em 0.5em 30px;
	text-decoration: none;
}
.pseudoSelect li {
	display: block;
	float: none;
	margin: 0;
	padding: 0.1em;
	text-align: inherit;
}
.pseudoSelect li:hover {
	color: #fff;
}
.pseudoSelect li:hover a {
	background-color: #000;
	border-color: #676767;
}
.pseudoSelect .checked a {
	background: url("../img/editor/checked.png") no-repeat scroll 10px center #2a2a2a;
	border-color: #c5c5c5;
	color: #fff;
	text-shadow: 1px 2px 1px #000;
}
.checkboxBlock {
	border-top: 1px solid #575757;
	-moz-box-shadow: 0 -1px 0 #000;
	-webkit-box-shadow: 0 -1px 0 #000;
	box-shadow: 0 -1px 0 #000;
	font-size: 0.81em;
	padding: 0.75em 0;
}
.checkboxBlock label {
	padding-left: 0.5em;
}
.checkBoxFinePrint {
	display: block;
	font-size: .85em;
	padding: 0.3em 0 0.5em 3.1em;
}
#commonChordList {
	display: block;
	font-size: 1.2em;
	margin-left: 1.5em;
	width: 15em;
}
.linksList {
	font-size: .85em;
}
.linksList li {
	margin: 0;
	padding: 0.1em;
	text-align: left;
	float: none;
}
.linksList a {
	border-radius: 8px;
	color: #b9b9b9;
	display: block;
	padding: 0.6em;
	text-decoration: none;
}
.linksList a:hover {
	background-color: #000;
	color: #fff;
}
.updateMessage {
	background-color: #bae5a7;
	border: 1px solid #44a819;
	border-radius: 4px 4px 4px 4px;
	-moz-box-shadow: 0 0 4px rgba(255,190,40,0.8);
	-webkit-box-shadow: 0 0 4px rgba(255,190,40,0.8);
	box-shadow: 0 0 4px rgba(255,190,40,0.8);
	color: #43772d;
	display: none;
	position: absolute;
	text-align: center;
	text-shadow: 0 -1px rgba(255,190,40,0.3);
	width: 10em;
}
.updateMessage em {
	border: 1px solid #66d836;
	border-radius: 3px 3px 3px 3px;
	-moz-box-shadow: 0 0 3px #559277 inset;
	-webkit-box-shadow: 0 0 3px #559277 inset;
	box-shadow: 0 0 3px #559277 inset;
	display: block;
	height: 100%;
	padding: 0.2em;
}
.baseBtn {
	background-color: #999;
	border: 1px solid #333;
	-moz-border-radius: 4px;
	-webkit-border-radius: 4px;
	border-radius: 4px;
	color: #fff;
	cursor: pointer;
	font-size: inherit;
	font-weight: bold;
	padding: 0.2em 1em;
	text-align: center;
	text-shadow: 0 1px 0 rgba(0,0,0,0.5);
	text-decoration: none;
}
.baseBtn:hover {
	background-color: #888;
	color: #fff;
}
.blueBtn {
	background-color: #89b9e3;
	background-image: -webkit-linear-gradient(top, #89b9e3 0%, #3d6bbb 100%);
	background-image: -o-linear-gradient(top, #89b9e3 0%, #3d6bbb 100%);
	background-image: linear-gradient(to bottom, #89b9e3 0%, #3d6bbb 100%);
	background-repeat: repeat-x;
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff89b9e3', endColorstr='#ff3d6bbb', GradientType=0);
	border-color: #3765b7;
	text-shadow: #89b9e3 0px 1px 0, #3765b7 0 -1px 0;
}
.blueBtn:hover {
	background-color: #4c85e8;
	background-image: -webkit-linear-gradient(top, #4c85e8 0%, #2f5493 100%);
	background-image: -o-linear-gradient(top, #4c85e8 0%, #2f5493 100%);
	background-image: linear-gradient(to bottom, #4c85e8 0%, #2f5493 100%);
	background-repeat: repeat-x;
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff4c85e8', endColorstr='#ff2f5493', GradientType=0);
	text-shadow: black 0px 1px 0, #3765b7 0 -1px 0;
}
.orange {
	color: #fef4e9;
	border: solid 1px #da7c0c;
	background: #f78d1d;
	background-image: -webkit-linear-gradient(top, #faa51a 0%, #f47a20 100%);
	background-image: -o-linear-gradient(top, #faa51a 0%, #f47a20 100%);
	background-image: linear-gradient(to bottom, #faa51a 0%, #f47a20 100%);
	background-repeat: repeat-x;
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fffaa51a', endColorstr='#fff47a20', GradientType=0);
	text-shadow: #da7c0c 0px 1px 0, #faa51a 0 -1px 0;
}
.orange:hover {
	background: #f47c20;
	background-image: -webkit-linear-gradient(top, #f88e11 0%, #f06015 100%);
	background-image: -o-linear-gradient(top, #f88e11 0%, #f06015 100%);
	background-image: linear-gradient(to bottom, #f88e11 0%, #f06015 100%);
	background-repeat: repeat-x;
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff88e11', endColorstr='#fff06015', GradientType=0);
	text-shadow: #f47c20 0px 1px 0, #f88e11 0 -1px 0;
}
.orange:active {
	color: #fcd3a5;
	background-image: -webkit-linear-gradient(top, #f47a20 0%, #faa51a 100%);
	background-image: -o-linear-gradient(top, #f47a20 0%, #faa51a 100%);
	background-image: linear-gradient(to bottom, #f47a20 0%, #faa51a 100%);
	background-repeat: repeat-x;
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff47a20', endColorstr='#fffaa51a', GradientType=0);
}
.btnBar {
	height: 30px;
}
.btnBar .baseBtn {
	float: right;
	font-size: 110%;
	margin-bottom: 5px;
}
.alternateBtn, .noThanks {
	color: #3965b0;
	float: right;
	line-height: 33px;
	margin-right: 1.5em;
	text-decoration: none;
}
.alternateBtn:hover, .noThanks:hover {
	color: #0646ad;
}
.noThanks {
	background-color: #efd292;
	border-radius: 6px;
	padding: 0 0.4em;
	-webkit-transition: background-color 0.4s ease;
	-moz-transition: background-color 0.4s ease;
	-ms-transition: background-color 0.4s ease;
	-o-transition: background-color 0.4s ease;
	transition: background-color 0.4s ease;
}
.noThanks:hover {
	background-color: #f2e2c1;
}
.chordBuilderDlg input[type=text] {
	border: 1px solid #d7d7d7;
	border-radius: 5px 5px 5px 5px;
	display: block;
	font-size: 30pt;
	padding: 0;
	text-align: center;
	max-width: 100%;
	width: 100%;
}
.chordBuilderDlg pre {
	font-size: 12pt;
	white-space: pre-wrap;
	white-space: -moz-pre-wrap;
	white-space: -pre-wrap;
	white-space: -o-pre-wrap;
	word-wrap: break-word;
}
html body .editorSurface {
	background-color: #fff;
	border-radius: 5px;
	font-size: 0.9em;
	height: 300px;
	margin: 5px auto;
	overflow: hidden;
	padding: 0;
	position: relative;
	width: 462px;
	-moz-box-shadow: 1px 2px 8px rgba(0,0,0,0.5) inset;
	-webkit-box-shadow: 1px 2px 8px rgba(0,0,0,0.5) inset;
	box-shadow: 1px 2px 8px rgba(0,0,0,0.5) inset;
}
.editorSurface canvas {
	border: none;
	cursor: none;
	left: 0;
	position: absolute;
	top: 0;
}
#cdBldDiagramCanvas {
	z-index: 1;
}
#cdBldCursorCanvas {
	z-index: 2;
}
.toolboxEdgeShadow {
	z-index: 4;
}
.chordToolbox {
	border: 0 solid #ccc;
	background-color: #f0eef0;
	-moz-box-shadow: 1px 1px 3px rgba(0,0,0,0.1);
	-webkit-box-shadow: 1px 1px 3px rgba(0,0,0,0.1);
	box-shadow: 1px 1px 3px rgba(0,0,0,0.1);
	height: 250px;
	position: absolute;
	top: 25px;
	width: 135px;
	-webkit-transition: background-color 0.4s ease, border-color 0.4s ease, left 0.4s ease-out, right 0.4s ease-out;
	-moz-transition: background-color 0.4s ease, border-color 0.4s ease, left 0.4s ease-out, right 0.4s ease-out;
	-ms-transition: background-color 0.4s ease, border-color 0.4s ease, left 0.4s ease-out, right 0.4s ease-out;
	-o-transition: background-color 0.4s ease, border-color 0.4s ease, left 0.4s ease-out, right 0.4s ease-out;
	transition: background-color 0.4s ease, border-color 0.4s ease, left 0.4s ease-out, right 0.4s ease-out;
	z-index: 3;
}
.chordToolbox.open, .chordToolbox:hover {
	background-color: #fafafa;
	border-color: #8c8c8c;
	-moz-box-shadow: 4px 6px 9px rgba(0,0,0,0.3);
	-webkit-box-shadow: 4px 6px 9px rgba(0,0,0,0.3);
	box-shadow: 4px 6px 9px rgba(0,0,0,0.3);
}
.chordToolbox.leftEdge {
	border-radius: 0 7px 7px 0;
	border-width: 2px 2px 2px 0;
	left: -110px;
}
.chordToolbox.leftEdge.open, .chordToolbox.leftEdge:hover {
	left: 0;
}
.chordToolbox.rightEdge {
	border-radius: 7px 0 0 7px;
	border-width: 2px 0 2px 2px;
	right: -110px;
}
.chordToolbox.rightEdge.open, .chordToolbox.rightEdge:hover {
	right: 0;
}
.chordToolboxInner {
	margin: 10px auto;
	width: 100px;
}
.toolboxEdgeShadow {
	background-color: transparent;
	height: 255px;
	position: absolute;
	top: 26px;
	width: 10px;
}
.toolboxEdgeShadow.leftEdge {
	-moz-box-shadow: 4px 0 6px rgba(0,0,0,0.3);
	-webkit-box-shadow: 4px 0 6px rgba(0,0,0,0.3);
	box-shadow: 4px 0 6px rgba(0,0,0,0.3);
	left: -10px;
}
.toolboxEdgeShadow.rightEdge {
	-moz-box-shadow: -4px 0 6px rgba(0,0,0,0.3);
	-webkit-box-shadow: -4px 0 6px rgba(0,0,0,0.3);
	box-shadow: -4px 0 6px rgba(0,0,0,0.3);
	right: -10px;
}
.toolChip {
	background-color: #fafafa;
	border: 1px solid #fafafa;
	border-radius: 5px;
	color: #c7681b;
	cursor: pointer;
	display: block;
	margin-bottom: 8px;
	min-height: 70px;
	padding: 5px 0;
	text-align: center;
	text-decoration: none;
	width: 100%;
	-webkit-transition: background-color 0.4s ease, border-color 0.4s ease;
	-moz-transition: background-color 0.4s ease, border-color 0.4s ease;
	-ms-transition: background-color 0.4s ease, border-color 0.4s ease;
	-o-transition: background-color 0.4s ease, border-color 0.4s ease;
	transition: background-color 0.4s ease, border-color 0.4s ease;
}
.toolChip:hover {
	background-color: #fefefe;
	border: 1px solid #ededed;
}
.toolChip img, .toolChip .bigDot {
	opacity: .75;
}
.toolChip:hover img, .toolChip:hover .bigDot {
	opacity: 1;
}
html .selected, html .selected:hover {
	border-color: #aaa73f;
	-moz-box-shadow: 0 0 5px rgba(0,0,0,0.2);
	-webkit-box-shadow: 0 0 5px rgba(0,0,0,0.2);
	box-shadow: 0 0 5px rgba(0,0,0,0.2);
}
#cdBldBtnFingerName {
	color: #806753;
	display: block;
	font-size: .67em;
}
.bigDot {
	background-color: #e78333;
	border: 3px solid #973100;
	border-radius: 23px 23px 23px 23px;
	display: block;
	height: 23px;
	margin: 5px auto;
	width: 23px;
}
.selected img, .selected .bigDot {
	opacity: 1;
}
.fingerToolImage {
	background: url("../img/editor/hand.png") top center no-repeat;
	display: block;
	height: 83px;
	margin: 0 auto;
	position: relative;
	width: 88px;
}
.fingerDot {
	background-color: #f9f340;
	border: solid 2px #af9607;
	border-radius: 8px;
	display: block;
	height: 8px;
	position: absolute;
	width: 8px;
}
.finger0 .fingerDot {
	display: none;
}
.finger1 .fingerDot {
	right: 22px;
	top: 3px;
}
.finger2 .fingerDot {
	right: 1px;
	top: 11px;
}
.finger3 .fingerDot {
	right: 1px;
	top: 28px;
}
.finger4 .fingerDot {
	right: 1px;
	top: 44px;
}
label[for=cdBldStartingFret], html .arrowUp, html .arrowDown {
	min-height: 52px;
}
html .arrowUp, html .arrowDown {
	background-repeat: no-repeat;
	background-position: center 29px;
}
html .arrowUp {
	background-image: url("../img/editor/basic-up-arrow.png");
}
html .arrowDown {
	background-image: url("../img/editor/basic-down-arrow.png");
}
.outputBox {
	max-height: 30em;
	overflow: hidden;
	-webkit-transition: max-height 0.8s ease;
	-moz-transition: max-height 0.8s ease;
	-ms-transition: max-height 0.8s ease;
	-o-transition: max-height 0.8s ease;
	transition: max-height 0.8s ease;
}
.outputBox.collapseOutput {
	max-height: 0;
}
.chordPro-statement {
	background-color: #f9f9f9;
	border: solid 1px #bbb;
	color: #999;
	font-family: Consolas, 'courier new', monospace;
	padding: 1em;
}
.chordPro-keyword {
	color: #8e7cc3;
}
.chordPro-attribute {
	color: #741b47;
}
.chordPro-number {
	color: #e69138;
	font-weight: bold;
}
.chordPro-string {
	background-color: #edf7e6;
	color: #38761d;
	font-weight: bold;
}
.ugsChordChooser {
	background-color: #eed18e;
	border-radius: 10px;
	color: #551d00;
	font-size: 14pt;
	max-height: 17em;
	min-height: 10em;
	overflow-y: auto;
	padding: .1em 0;
}
.ugsChordChooser li {
	background-color: #bc9350;
	border-radius: 6px;
	cursor: pointer;
	margin: 0.5em;
	padding: 0.5em;
	-webkit-transition: background-color 0.4s ease;
	-moz-transition: background-color 0.4s ease;
	-ms-transition: background-color 0.4s ease;
	-o-transition: background-color 0.4s ease;
	transition: background-color 0.4s ease;
}
.ugsChordChooser li:hover {
	background-color: #99512c;
	color: #f4e19d;
	text-shadow: 0px 2px 0px #551d00;
}
.ugsChordChooser .newChord {
	background-color: #b2612d;
	color: #551d00;
	font-weight: bold;
}
.ugsChordChooser .deleteChord {
	background: url("../img/editor/delete-btn.png") right center no-repeat;
	display: block;
	float: right;
	height: 30px;
	opacity: 0;
	width: 36px;
	-webkit-transition: opacity 0.4s ease;
	-moz-transition: opacity 0.4s ease;
	-ms-transition: opacity 0.4s ease;
	-o-transition: opacity 0.4s ease;
	transition: opacity 0.4s ease;
}
.ugsChordChooser li:hover .deleteChord {
	opacity: 1;
}
.ugsChordChooser canvas {
	float: right;
	margin-right: 10px;
}
html, body {
	margin: 0;
	padding: 0;
}
body {
	position: relative;
	padding-top: 40px;
}
.editableSongPage {
	background-color: #edecea;
}
.ugsLogo {
	color: #f2a848;
	font-family: 'Peralta', cursive;
	font-size: 16px;
	font-weight: normal;
	position: absolute;
	right: 1em;
	text-shadow: 1px 1px #322;
}
.ugsAppMenuBar {
	background: #933f17 url("../img/editor/editorSprite.png") 0 -100px repeat-x;
	-moz-box-shadow: 0 5px 8px rgba(0,0,0,0.65);
	-webkit-box-shadow: 0 5px 8px rgba(0,0,0,0.65);
	box-shadow: 0 5px 8px rgba(0,0,0,0.65);
	border-top: 1px solid #84623c;
	border-bottom: 1px solid #240e01;
	font: 17px/38px Helvetica, Arial;
	height: 40px;
	min-width: 910px;
	padding-left: 0;
	position: fixed;
	top: 0;
	width: 100%;
	z-index: 2;
}
.ugsAppMenuBar > ul {
	margin-left: 10px;
}
.ugsAppMenuBar > ul > li {
	float: left;
	position: relative;
}
.ugsAppMenuBar > ul > li > a {
	border: solid 1px transparent;
	color: #f4e19f;
	cursor: pointer;
	display: block;
	float: left;
	height: 38px;
	line-height: 38px;
	outline: 0 none;
	padding: 0 15px 0 5px;
	text-decoration: none;
	text-shadow: 1px 2px 0 rgba(86,3,5,0.95);
}
.ugsAppMenuBar > ul > li > a:hover {
	border-color: #600000;
	background-color: #451212;
	background: url("../img/editor/editorSprite.png") 0 -145px repeat-x;
	color: #fdda61;
	text-shadow: none;
}
.ugsAppMenuBar > ul > .active > a {
	background-color: #451212;
	background: url("../img/editor/editorSprite.png") 0 -145px repeat-x;
	color: #fef5e3;
	text-shadow: 0 1px 1px rgba(0,0,0,0.5);
}
.ugsAppMenuBar > ul > li > a span {
	background-image: url("../img/editor/editorSprite.png");
	background-repeat: no-repeat;
	float: left;
	height: 25px;
	margin-top: 7px;
	width: 25px;
}
.navSong span {
	background-position: -75px 0px;
}
.navSong.active span, .navSong a:hover span {
	background-position: -75px -50px;
}
.navInstruments span {
	background-position: -50px 0px;
}
.navInstruments.active span, .navInstruments a:hover span {
	background-position: -50px -50px;
}
.navTranspose span {
	background-position: -25px 0px;
}
.navTranspose.active span, .navTranspose a:hover span {
	background-position: -25px -50px;
}
.navDiagrams span {
	background-position: 0px 0px;
}
.navDiagrams.active span, .navDiagrams a:hover span {
	background-position: 0px -50px;
}
.navLayout span {
	background-position: -100px 0px;
}
.navLayout.active span, .navLayout a:hover span {
	background-position: -100px -50px;
}
.navColors span {
	background-position: -125px 0px;
}
.navColors.active span, .navColors a:hover span {
	background-position: -125px -50px;
}
.navZoom span {
	background-position: -150px 0px;
}
.navZoom.active span, .navZoom a:hover span {
	background-position: -150px -50px;
}
.navEdit span {
	background-position: -175px 0px;
}
.navEdit.active span, .navEdit a:hover span {
	background-position: -175px -50px;
}
.navOptions span {
	background-position: -200px 0px;
}
.navOptions.active span, .navOptions a:hover span {
	background-position: -200px -50px;
}
.overlay {
	position: fixed;
	top: 45px;
	right: 20px;
	background-color: #2b1100;
	background-color: rgba(30,11,0,0.75);
	-moz-box-shadow: 1px 10px 20px rgba(0,0,0,0.85);
	-webkit-box-shadow: 1px 10px 20px rgba(0,0,0,0.85);
	box-shadow: 1px 10px 20px rgba(0,0,0,0.85);
	-moz-border-radius: 22px;
	-webkit-border-radius: 22px;
	border-radius: 22px;
	padding: 10px;
	width: 490px;
	z-index: 0;
}
.overlay > div {
	background-color: #8e100b;
/*	background: url("../img/editor/woodChip.png") repeat scroll 0 0 transparent;*/
	border-radius: 0 0 13px 13px;
	overflow: hidden;
	padding: 10px;
}
.isHidden {
	display: none;
}
.overlay select {
	font-size: 1.1em;
}
.overlay input[type=text], .overlay input[type=password] {
	display: block;
	font-size: 1.2em;
	margin-bottom: .4em;
	padding: 0.1em;
	width: 98%;
}
.overlay textarea {
	font-family: Monaco, "Consolas", "Lucida Console", "Courier New", courier, monospace;
	font-size: 10pt;
	line-height: 1.25;
	padding-left: .3em;
	white-space: nowrap;
	white-space: pre;
	overflow: scroll;
	height: 525px;
	width: 98%;
}
.overlay input[type=text], .overlay input[type=password], .overlay textarea {
	background-color: rgba(255,255,255,0.7);
	border: solid 1px #e1b166;
	max-width: 100%;
	max-height: 100%;
	-webkit-transition: background-color 500ms linear;
	-moz-transition: background-color 500ms linear;
	-ms-transition: background-color 500ms linear;
	-o-transition: background-color 500ms linear;
	transition: background-color 500ms linear;
}
.overlay input[type=text]:hover, .overlay input[type=password]:hover, .overlay textarea:hover {
	background-color: rgba(255,255,200,0.7);
	border-color: #444;
}
.overlay input[type=text]:focus, .overlay input[type=password]:focus, .overlay textarea:focus {
	background-color: rgba(255,255,255,0.9);
	border-color: #6c280c;
	-moz-box-shadow: inset 3px 3px 5px rgba(0,0,0,0.3);
	-webkit-box-shadow: inset 3px 3px 5px rgba(0,0,0,0.3);
	box-shadow: inset 3px 3px 5px rgba(0,0,0,0.3);
}
.overlay h3 {
	background: url("../img/editor/editorSprite.png") repeat-x 0 -100px #933f17;
	border-bottom: 1px solid #240e01;
	border-radius: 12px 12px 0 0;
	border-top: 1px solid #84623c;
	color: #f4e19f;
	font-size: 22px;
	height: 37px;
	line-height: 37px;
	padding: 0 20px;
	text-shadow: 1px 2px 0 #592108;
}
.overlay .closeBtn {
  background-color: rgba(255,255,255,0.9);
	/*background: url("../img/editor/closeBtn.png") no-repeat 0 0 transparent;*/
	display: block;
	height: 20px;
	/*outline: none;*/
	position: absolute;
	right: 10px;
	text-indent: 0.5em;
	top: 14px;
	width: 30px;
}
.overlay .resizeBtn {
	background: url("../img/editor/resizeBtn.png") no-repeat 0 0 transparent;
	display: block;
	height: 20px;
	outline: none;
	position: absolute;
	right: 55px;
	text-indent: -5000em;
	top: 18px;
	width: 20px;
}
html .helpDlg {
	top: 75px;
	right: 70px;
	width: 300px;
	z-index: 1;
}
html .optionsDlg {
	top: 100px;
	right: 210px;
	width: 380px;
	z-index: 2;
}
.optionsDlg div {
	font-size: .91em;
}
.optionsDlg div li {
	padding-bottom: .82em;
}
.chordBuilderDlg {
	right: 210px;
	top: 70px;
	width: 490px;
	-webkit-transition: width 0.6s ease;
	-moz-transition: width 0.6s ease;
	-ms-transition: width 0.6s ease;
	-o-transition: width 0.6s ease;
	transition: width 0.6s ease;
}
html .chordBuilderNarrow {
	width: 345px;
}
.helpDlg {
	font-size: .9em;
}
.normalHtml p, .normalHtml ul, .normalHtml ol {
	margin-bottom: 1em;
}
.normalHtml li {
	list-style: disc outside none;
	margin-left: 1em;
	padding-bottom: .4em;
}
.normalHtml h3 {
	font-size: 1.2em;
	font-weight: bold;
}
.reformatDlg {
	right: 25%;
	top: 100px;
	width: 480px;
	z-index: 3;
}
.instructions {
	width: 28em;
	padding: 0 0 .7em;
	color: #563324;
}
.instructions.small {
	clear: both;
	font-size: .8em;
	display: block;
	width: 35em;
}
html .reformatDlg textarea {
	height: 15em;
}
.layoutOptions {
	left: 150px;
}
.layoutOptions:after, .layoutOptions:before {
	left: 22%;
}
.tuningOptions {
	left: 150px;
}
#transposeOptions em {
	color: #ccc;
	float: right;
	font-size: 0.86em;
}
.otherOptions {
	left: 250px;
}
.helpOptions {

	left: 160px;
}
.hasSongbookLink .layoutOptions:after, .hasSongbookLink .layoutOptions:before {
	left: 72%;
}
.hasSongbookLink .tuningOptions {
	left: 250px;
}
.hasSongbookLink .otherOptions {
	left: 300px;
}
.hasSongbookLink .otherOptions:after, .hasSongbookLink .otherOptions:before {
	left: 70%;
}
.hasSongbookLink .helpOptions {
	left: 340px;
}
.hasSongbookLink .helpOptions:after, .hasSongbookLink .helpOptions:before {
	left: 80%;
}
.theme-reversed {
	background-color: #000;
	color: #fff;
}
.theme-reversed pre {
	color: #e9e9e9;
}
.theme-reversed .scalablePrintArea {
	background-color: transparent;
}
.theme-reversed .scalablePrintArea h5, .theme-reversed .scalablePrintArea h6 {
	border-left-color: #444;
	color: #69f;
}
.theme-reversed .ugsChorus {
	border-left-color: #333;
}
.theme-reversed .ugsChords code {
    font-family:Parnumation; 
    font-size:1.3em; 
    text-align:justify;

	color: #333;
}
.theme-reversed .ugsChords code em {
    font-family:Parnumation; 
    font-size:1.3em; 
    text-align:justify;

	color: #f42;
}
.theme-reversed .subNav a:hover {
	background-color: #888;
	color: #000;
}
.theme-reversed .overlay {
	background-color: #4e1c07;
	-moz-box-shadow: none;
	-webkit-box-shadow: none;
	box-shadow: none;
	color: #000;
}
.theme-jellyBean pre {
	color: inherit;
}
.theme-jellyBean .scalablePrintArea {
	color: #56a0a5;
	font-family: "Comic Sans MS", "Marker Felt", cursive, sans-serif;
}
.theme-jellyBean .scalablePrintArea hgroup {
	color: #ff9417;
	text-align: center;
}
.theme-jellyBean .scalablePrintArea h1 {
	color: #d20770;
	font-family: 'Peralta', cursive, sans-serif;
	font-size: 2em;
	text-shadow: 0.03125em 0.0625em 0 #fff, 0.09375em 0.125em 0 #f2e660;
}
.theme-jellyBean .scalablePrintArea h2 {
	font-size: 1.1em;
}
.theme-jellyBean .scalablePrintArea h5, .theme-jellyBean .scalablePrintArea h6 {
	border-left-color: #f2e660;
	color: #9c55ed;
	font-family: inherit;
	letter-spacing: 0.045em;
}
.theme-jellyBean .ugsChorus {
	border-left-color: #f2e660;
	border-radius: 5px 0 0 5px;
}
.theme-jellyBean .ugsChords code {
    font-family:Parnumation; 
    font-size:1.3em; 
    text-align:justify;

	color: #333;
}
.theme-jellyBean .ugsChords code em {
    font-family:Parnumation; 
    font-size:1.3em; 
    text-align:justify;

	color: #d20070;
}
.theme-western .scalablePrintArea {
	color: #88410a;
}
.theme-western .scalablePrintArea hgroup {
	color: #88410a;
	font-family: 'Smokum', Arial, sans-serif;
	text-align: center;
}
.theme-western .scalablePrintArea h1 {
	color: #472b07;
	font-family: inherit;
	font-size: 3.3em;
	text-shadow: 0.011em 0.037em 0 #fff, 0.055em 0.07em 0 #e5dcc0;
}
.theme-western .scalablePrintArea h2 {
	font-size: 1.7em;
}
.theme-western .scalablePrintArea h5, .theme-western .scalablePrintArea h6 {
	border-left-color: #bed379;
	color: #92a88c;
	font-family: 'Smokum', Arial, sans-serif;
	font-size: 1.4em;
	font-style: normal;
	padding: 0;
	text-indent: 1em;
}
.theme-western .ugsChorus {
	border-left-color: #bec481;
	border-radius: 5px 0 0 5px;
}
.theme-western .ugs-source-wrap pre {
	color: inherit;
}
.theme-pumpkin .scalablePrintArea {
	color: #68391d;
}
.theme-pumpkin .scalablePrintArea hgroup {
	color: #b14623;
	text-align: center;
}
.theme-pumpkin .scalablePrintArea h1 {
	color: #d3770e;
	font-family: 'Ranchers', Arial, sans-serif;
	font-size: 3.2em;
	line-height: 1.1;
	text-shadow: 0.064em 0.044em 0 #edf8ce, -0.037em 0.044em 0 #edf8ce, -0.074em .094em 0 #bed379, 0.074em .094em 0 #bed379;
}
.theme-pumpkin .scalablePrintArea h2 {
	font-family: 'Cherry Cream Soda', cursive, sans-serif;
	font-size: 1.1em;
}
.theme-pumpkin .scalablePrintArea h5, .theme-pumpkin .scalablePrintArea h6 {
	border-left-color: #bed379;
	color: #ffc501;
	font-family: 'Cherry Cream Soda', cursive, sans-serif;
	font-size: 1.4em;
	font-style: normal;
	padding: 0;
	text-indent: 1em;
}
.theme-pumpkin .ugs-source-wrap pre {
	color: inherit;
}
.theme-pumpkin .ugsChorus {
	border-left-color: #a0b74e;
	border-radius: 5px 0 0 5px;
}
.theme-pumpkin .ugsChords code em {
    font-family:Parnumation; 
    font-size:1.3em; 
    text-align:justify;

	color: #fe9600;
}
.theme-zombie .scalablePrintArea {
	color: #798666;
}
.theme-zombie .scalablePrintArea hgroup {
	color: #902374;
	text-align: center;
}
.theme-zombie .scalablePrintArea h1 {
	color: #bed63a;
	font-family: 'Creepster', cursive, sans-serif;
	font-size: 3.2em;
	line-height: 1.1;
	text-shadow: 0.002em 0.002em 0em #364000, 0.044em 0.044em 0 #9eb036, -0.042em -0.014em 0 #8f2472, 0.087em 0.074em 0 #8f2472, -0.074em 0.094em 0 #ca4f04, 0.074em 0.174em 0 #ca4f04;
}
.theme-zombie .scalablePrintArea h2 {
	font-family: 'Cherry Cream Soda', cursive, sans-serif;
	font-size: 1.1em;
	text-shadow: 0.12em 0.13em 0 #dbdae8;
}
.theme-zombie .scalablePrintArea h5, .theme-zombie .scalablePrintArea h6 {
	border-left-color: #e4dca4;
	color: #798666;
	font-family: 'Peralta', cursive, sans-serif;
	font-size: 1.4em;
	font-style: normal;
	padding: 0;
	text-indent: 1em;
	text-shadow: 0.03em 0.07em 0 #bed63a;
}
.theme-zombie .ugs-source-wrap pre {
	color: inherit;
}
.theme-zombie .ugsChorus {
	border-left-color: #cdc693;
	border-radius: 6px 0 0 6px;
}
.theme-zombie .ugsChords code em {
    font-family:Parnumation; 
    font-size:1.3em; 
    text-align:justify;

	color: #dd1a52;
}
.theme-frosty .scalablePrintArea {
	color: #154286;
}
.theme-frosty .scalablePrintArea hgroup {
	color: #6a97db;
	text-align: center;
}
.theme-frosty .scalablePrintArea h1 {
	color: #d5e2f5;
	font-family: 'Cherry Cream Soda', cursive, sans-serif;
	font-size: 2.18em;
	letter-spacing: 0.05em;
	line-height: 1.1;
	text-shadow: -0.064em -0.034em 0 #fff, 0.008em 0.008em 0 #a3e3d7, 0.009em -0.009em 0 #a3e3d7, 0.098em 0.115em 0 #154286, 0.064em 0.064em 0 #00183d, -0.114em -0.064em 0 #154286, -0.114em 0 0 #154286, 0 -0.064em 0 #154286, -0.084em 0.064em 0 #154286, 0.064em -0.034em 0 #154286;
}
.theme-frosty .scalablePrintArea h2 {
	font-family: 'Ranchers', Arial, sans-serif;
	font-size: 1.2em;
}
.theme-frosty .scalablePrintArea h5, .theme-frosty .scalablePrintArea h6 {
	border-left-color: #e3f7f3;
	color: #80b7b1;
	font-family: 'Cherry Cream Soda', cursive, sans-serif;
	font-size: 1.4em;
	font-style: normal;
	padding: 0;
	text-indent: 0.6em;
}
.theme-frosty .ugs-source-wrap pre {
	color: inherit;
}
.theme-frosty .ugsChorus {
	border-left-color: #0896fe;
	border-radius: 6px 0 0 6px;
}
.theme-frosty .ugsChords code em {
    font-family:Parnumation; 
    font-size:1.3em; 
    text-align:justify;

	color: #0896fe;
}
.theme-krampus .scalablePrintArea {
	color: #929867;
}
.theme-krampus .scalablePrintArea hgroup {
	color: #929867;
	text-align: center;
}
.theme-krampus .scalablePrintArea h1 {
	color: #a22c27;
	font-family: 'Lobster', cursive, sans-serif;
	font-size: 2.78em;
	line-height: 1.1;
	text-shadow: 0.036em 0.04em 0 #fcece8, 0.05em 0.08em 0 #4f2621, 0.02em 0.08em 0 #4f2621;
}
.theme-krampus .scalablePrintArea h2 {
	font-family: 'Peralta', cursive, sans-serif;
	font-size: 1.2em;
	text-shadow: 0.03em 0.03em 0 #fff, 0.08em 0.1em 0 #ebd592;
}
.theme-krampus .scalablePrintArea h5, .theme-krampus .scalablePrintArea h6 {
	border-left-color: #7b8055;
	color: #a32c28;
	font-family: 'Peralta', cursive, sans-serif;
	font-size: 1.2em;
	font-style: normal;
	padding: 0;
	text-indent: 0.6em;
}
.theme-krampus .ugs-source-wrap pre {
	color: inherit;
}
.theme-krampus .ugsChorus {
	border-left-color: #b9c97e;
	border-radius: 6px 0 0 6px;
}
.theme-krampus .ugsChords code em {
    font-family:Parnumation; 
    font-size:1.3em; 
    text-align:justify;

	color: #384030;
}
.theme-notebook .scalablePrintArea {
	color: #437;
	font-family: 'Architects Daughter', Arial, sans-serif;
}
.theme-notebook .scalablePrintArea hgroup {
	color: #2e2ecc;
	font-family: inherit;
	text-align: center;
}
.theme-notebook .scalablePrintArea h1 {
	border-color: #e4e4ff;
	border-style: solid;
	border-width: 1px 0;
	color: #252537;
	font-family: 'Permanent Marker', Arial, sans-serif;
	font-size: 2em;
	margin-bottom: 0.2em;
}
.theme-notebook .scalablePrintArea h2 {
	border-bottom: 1px solid #e4e4ff;
	font-size: 1.1em;
}
.theme-notebook .scalablePrintArea h5, .theme-notebook .scalablePrintArea h6 {
	border-left-color: #626283;
	color: #2e2ecc;
	font-family: 'Permanent Marker', Arial, sans-serif;
	font-size: 1.3em;
	padding: 0;
	text-indent: 0.7em;
}
.theme-notebook .ugs-source-wrap pre {
	color: inherit;
}
.theme-notebook .ugsChorus {
	border-left-color: #a4a0b2;
	border-radius: 6px 0 0 6px;
}
.theme-notebook .ugsChords code {
    font-family:Parnumation; 
    font-size:1.3em; 
    text-align:justify;

	font-family: inherit;
}
.theme-justBlack .ugs-source-wrap h5, .theme-justBlack .ugs-source-wrap h6 {
	color: #000;
	font-family: 'Bree Serif', Arial, sans-serif;
	font-style: normal;
}
.theme-justBlack .ugsChords code em {
    font-family:Parnumation; 
    font-size:1.3em; 
    text-align:justify;

	color: #000;
	font-weight: bold;
}
.theme-justBlack .scalablePrintArea hgroup, .theme-justBlack .scalablePrintArea hgroup * {
	font-family: 'Bree Serif', Arial, sans-serif;
	font-style: normal;
}
.theme-justBlack .scalablePrintArea hgroup {
	text-align: center;
}
.scalablePrintArea {
	-moz-transform-origin: 0 0;
	-webkit-transform-origin: 0 0;
	background-color: #fff;
	border-right: solid 1px #888;
	font-size: inherit;
	-moz-box-shadow: 3px 0 9px rgba(0,0,0,0.4);
	-webkit-box-shadow: 3px 0 9px rgba(0,0,0,0.4);
	box-shadow: 3px 0 9px rgba(0,0,0,0.4);
}
.scalablePrintArea hgroup {
	padding-bottom: .15in;
}
html .ugsHideDiagrams .ugs-diagrams-wrap {
	display: none;
}
html .ugsHideDiagrams .ugs-source-wrap {
	margin-left: 0;
}
html .diagramsOnTop .ugs-diagrams-wrap {
	float: none;
	width: auto;
}
html .diagramsOnTop .ugs-source-wrap {
	margin-left: 0;
}
.ugsNoChords .ugs-source-wrap {
	margin-left: 0;
}
.diagramsOnSide .ugs-diagrams-wrap {
	float: left;
	width: 225px;
}
.diagramsOnSide .ugs-source-wrap {
	margin-left: 250px;
}
.liBtn, .liBtn * {
	cursor: pointer;
}
.pageWidth_letter .scalablePrintArea {
	width: 8in;
	padding: 0.2in;
	min-height: 10.5in;
}
.pageWidth_a4 .scalablePrintArea {
	width: 19cm;
	padding: 1cm;
	min-height: 28cm;
}
.pageWidth_screen .scalablePrintArea {
	padding: 20px;
}
.scalablePrintArea .ugs-diagrams-wrap canvas {
	zoom: 1;
}
.scalablePrintArea .ugs-diagrams-wrap {
	zoom: 1;
}
.scalablePrintArea .ugs-source-wrap {
	zoom: 1;
}
.aceEditorActive, .aceEditorActive body {
	overflow: hidden;
	height: 100%;
	width: 100%;
	margin: 0;
	padding: 0;
}
.aceEditorActive #aceHeader {
	display: block;
}
.aceEditorActive .ugsAppMenuBar, .aceEditorActive .overlay, .aceEditorActive .scalablePrintArea {
	display: none;
}
#aceHeader {
	border-bottom: solid 1px;
	font-family: arial, sans-serif;
	font-size: 1;
	line-height: 40px;
	height: 40px;
	padding: 0 15px;
	display: none;
}
#aceHeader a {
	float: right;
	font-size: 0.87em;
	line-height: inherit;
	color: inherit;
	text-decoration: none;
}
#aceHeader a:hover {
	color: #cc7833;
	text-decoration: none;
}
#aceEditor {
	position: absolute;
	top: 40px;
	right: 0;
	bottom: 0;
	left: 0;
}
.aceSideBtn {
	background-color: rgba(0,0,0,0);
	border: 1px solid #ddd;
	border-radius: 4px;
	cursor: pointer;
	float: left;
	margin: 7px 0.8em 0 0;
	-webkit-transition: background-color .3s ease;
	-moz-transition: background-color .3s ease;
	-ms-transition: background-color .3s ease;
	-o-transition: background-color .3s ease;
	transition: background-color .3s ease;
}
.aceSideBtn span {
	-webkit-box-sizing: border-box;
	-moz-box-sizing: border-box;
	box-sizing: border-box;
	background-color: #888;
	border-radius: 1px;
	display: block;
	height: 2px;
	margin: 4px 2px;
	width: 16px;
	-webkit-transition: background-color .3s ease;
	-moz-transition: background-color .3s ease;
	-ms-transition: background-color .3s ease;
	-o-transition: background-color .3s ease;
	transition: background-color .3s ease;
}
.aceSideBtn:hover {
	background-color: #333;
}
.aceSideBtn:hover span {
	background-color: #eee;
}
#aceHelp {
	bottom: 0;
	left: -350px;
	margin: 0;
	position: absolute;
	top: 40px;
	width: 350px;
}
#aceHelp {
	background: #fff;
	color: #707273;
	font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
	font-size: 12px;
	overflow-y: auto;
	text-align: left;
}
.aceHelp {
	border-top: 2px solid #333;
	padding: 1em .6em;
}
.aceHelp h1, .aceHelp h3 {
	color: #222;
	font-size: 2.5em;
	font-weight: 500;
	line-height: 1em;
	margin: 0 0 1em;
}
.aceHelp h3 {
	font-size: 1.3em;
}
.aceHelp p {
	line-height: 1.6em;
	margin: 0 0 1em;
}
.aceHelp table {
	margin: 20px 0 10px;
}
.aceHelp strong {
	font-weight: bold;
}
.aceHelp td, .aceHelp th {
	color: #787878;
	padding: 0 .8em .8em 0;
	vertical-align: baseline;
}
.aceHelp th {
	font-weight: bold;
}
.aceHelp .key {
	background-color: #666;
	border: 0 none;
	border-radius: .22em;
	color: #fff;
	font-family: Arial;
	display: inline-block;
	font-size: .71em;
	font-weight: bold;
	line-height: 1.1;
	padding: .22em .4em;
	text-transform: uppercase;
}
.aceHelp .shortKeys {
	white-space: nowrap;
	padding-right: 1.4em;
}

</style>
<!--link rel="stylesheet" href="../css/ugsEditorPlus.print.css" media="print" /-->
<style id="../css/ugsEditorPlus.print.css" media="print">
@media print{
	body,
	.editableSongPage{
		background-color: #fff;
	}
	body {
		padding: 1px 0 0 0;
	}
	.scalablePrintArea {
		background-color: transparent;
		border: none;
		box-shadow: none;
		padding:0;
		width:100%;
		min-height:auto;
	}
	.ugsAppMenuBar,
	.arrowBox,
	.isHidden,
	.overlay {
		display: none !important;
	}
}
</style>
</head>
<body class="editableSongPage pageWidth_screen">
<section id="scalablePrintArea" class="scalablePrintArea">
	<header style="display:none">
		<hgroup class="ugs-songInfo">
			<h1 id="songTitle" class="ugs-songTitle"></h1>
			<h2 id="songSubtitle" class="ugs-songSubtitle" style="display:block;"></h2>
			<h2 id="songArtist" class="ugs-songArtist" style="display:block;"></h2>
			<h2 id="songAlbum" class="ugs-songAlbum" style="display:block;"></h2>
		</hgroup>
    <hr></hr>
	</header>
  
	<div class="metaInfo" id="songMeta"> </div>
	<article id="ukeSongContainer" class="ugsLayoutTwoColumn ugs-song-wrap">
		<aside id="ukeChordsCanvas" class="ugs-diagrams-wrap ugs-grouped" style="display:none"></aside>
		<article id="ukeSongText" class="ugs-source-wrap"></article>
	</article>
	<!--footer>
		<p>Note: <span id="footTuningInfo">Standard <strong>GCEA</strong> Soprano Ukulele</span> Tuning. <small>Powered by <a href="http://ukegeeks.com/" title="Uke Geeks for free ukulele JavaScript tools">UkeGeeks' Scriptasaurus</a> &bull; ukegeeks.com</small></p>
	</footer-->
</section>
<!-- EDIT SONG (DIALOG) -->
<section id="songSourceDlg" class="overlay isHidden" style="display:none">
	<hgroup>
		<h3>Edit Song</h3>
	</hgroup>
	<div>
		<a title="close this" href="#close" class="closeBtn">X</a>
		<a title="switch to fullscreen editor" href="#resize" class="resizeBtn" style="display:none">Fullscreen</a>
		<p class="btnBar">
    
      <label for="note-file" class="baseBtn blueBtn"> Open File</label>
      <input type="file" id="note-file" accept=".txt,.not" onchange="OpenFile();" style="display:none">
      
      <!--a href="javascript:getNote('../../kj/Not Angka Kidung Online/Not KJ/KJ/001/1-2.jpg.txt')" >get url</a-->
      
			<span id="messageBox" class="updateMessage">
				<em>
					<img src="../img/editor/busy.gif" id="loadingSpinner" style="display:none;" />
					<span id="sourceFeedback"></span>
				</em>
			</span>
			<input type="button" id="updateBtn" class="baseBtn blueBtn" value="Update" title="Rebuild digarams and music" />
		  <a href="#chordBuilder" id="cdBldOpenBtn" data-dialog="cdBldDlg" class="alternateBtn" title="Add custom &amp; alternate chord diagrams" style="display:none">Chord Builder</a>
      <!-- -->
		  <button type="button" id="save" class="baseBtn blueBtn" onclick='simpan()'>Save</button>
      <!-- -->
      
    </p>
		<textarea id="chordProSource" wrap="off">
{title: KJ 1 HALELUYA! PUJILAH}

{subtitle:  do=f 4 ketuk}


refrein
&nbsp;
[3]Ha-[gj5j 6]le   -  [3]lu-[gj1j]ya![2][|]        [3]Pu-[gj5j 6]ji   -  [3]lah[. '|]         [5]Al[j3j]lah [5]yang [6]A [5]gung,[|]  [3]Ma[j2j]ha-[1]e-[2]sa![|]
&nbsp;                                                                                                                     fine          
[3]Da[gj5j 6]lam [3]Kris[gj2j]tus[3][|][5]ki[j3j]ta [5]ke[6]nal[.]['|]             [5]Al[j6j]lah[5] yang [3]hi-[1]dup,[|] [2]Ba[j3j]pa [2]ke[1]kal![.][|]
&nbsp;
[3]La[j1j j j]ngit, [7]bu-[s6]a-[7]na[|]     [gj1j 7]se  -  [gj1j 3]mes-[3]ta[.] ['|]               [gj4j 3]pa  - [j4j]tut [6]me[3]mu[1]ji[|]     [jg7j 6]kua  - [gj7j 1]sa  - [7]Nya,[.] ['|]
&nbsp;                                                                                                                     refrein    
[s6]kar'[j7j]na [1]ber-[3]kat-[3]Nya[|] [1 j.j]tak [3]hen - [4]ti,[.] ['|]            [3]lim[j4j]pah [3]ka-[gj1j 7]sih-[s6]Nya[|]   [7]tak [j1j]ter[j 7]-[g6]pe-[5]ri.[_]

</textarea>

	</div>
</section>

<!-- APP TOOLBAR -->
<section id="ugsAppToolbar" class="ugsAppMenuBar">
	<ul id="navigasi">
		<li class="navEdit" data-dialog="songSourceDlg"> <a href="#songSourceDlg" title="View &amp; edit the song source"><span></span>Edit</a> </li>
    <li class="navEdit"> <a href='javascript:windowPop("OCR-Tesseract.html")' title="Optical Character Recognition">O C R</a></li>
		<li class="navLayout showOptionsBox"> <a href="#layoutOptions" title="Resize fonts &amp; chord diagrams. Customize layout &amp; colors."><span></span>Appearance</a></li>
		<li class="navInstruments showOptionsBox" style="display:none"> <a href="#tuningOptions" title="Transpose song's key &amp; choose your prefered ukulele tuning"><span></span>Transpose</a></li>
		<li class="navOptions showOptionsBox" style="display:none"> <a href="#optionsDlg" title="Advanced options &amp; settings"><span></span>Options</a> </li>
		<li class="showDlgBtn showOptionsBox"> <a href="#helpDlg" title="Help &amp; Quick tips on formatting your song">Help</a> </li>
    <!--a href='javascript:windowPop("OCR-Tesseract.html")'><h2 class="ugsLogo" title="Optical Character Recognition"> O C R </h2></a-->
	</ul>
	<!--a href='javascript:document.getElementById("navigasi").style.visibility="hidden"'><h2 class="ugsLogo">View Mode</h2></a-->
</section>
<!-- LAYOUT OPTIONS -->
<aside class="arrowBox layoutOptions" id="layoutOptions">
	<fieldset class="arrowBoxContent enablePseudoSelects">
		<dl>
			<dt><label for="fontSizePicker"><span>Font size 12pt</span> <em>&#9658;</em></label></dt>
			<dd id="fontSizePicker" data-action="zoomFonts">
				<ul class="pseudoSelect">
					<li><a href="#6">6 pt </a></li>
					<li><a href="#6.5">6.5 pt </a></li>
					<li><a href="#7">7 pt </a></li>
					<li><a href="#7.5">7.5 pt </a></li>
					<li><a href="#8">8 pt </a></li>
					<li><a href="#8.5">8.5 pt </a></li>
					<li><a href="#9">9 pt </a></li>
					<li><a href="#9.5">9.5 pt </a></li>
					<li><a href="#10">10 pt </a></li>
					<li><a href="#11">11 pt </a></li>
					<li class="checked"><a href="#12">12 pt </a></li>
					<li><a href="#13">13 pt </a></li>
					<li><a href="#14">14 pt </a></li>
				</ul>
			</dd>
			<dt><label for="diagramSizePicker"><span>Stupid Large diagrams</span> <em>&#9658;</em></label></dt>
			<dd id="diagramSizePicker" data-action="zoomDiagrams">
				<ul class="pseudoSelect">
					<li><a href="#40">Tiny </a></li>
					<li><a href="#65">Small </a></li>
					<li><a href="#80">Medium </a></li>
					<li><a href="#90">Large </a></li>
					<li class="checked"><a href="#100">Stupid Large </a></li>
				</ul>
			</dd>
			<dt><label for="diagramPositionPicker"><span>Reference diagrams on left</span> <em>&#9658;</em></label></dt>
			<dd id="diagramPositionPicker" data-action="layout">
				<ul class="pseudoSelect">
					<li class="checked"><a href="#left">On left side</a></li>
					<li><a href="#top">At the top</a></li>
					<li><a href="#none">Don't show</a></li>
				</ul>
			</dd>
			<dt><label for="lyricChordsPicker"><span>Chord names above lyrics</span> <em>&#9658;</em></label></dt>
			<dd id="lyricChordsPicker" data-action="placement">
				<ul class="pseudoSelect">
					<li><a href="#inline">Chord names inline </a></li>
					<li class="checked"><a href="#above">Chord names above </a></li>
					<li><a href="#miniDiagrams">Names &amp; diagrams above </a></li>
				</ul>
			</dd>
			<dt><label for="colorPicker"><span>Normal colors (white paper) </span><em>&#9658;</em></label></dt>
			<dd id="colorPicker" data-action="colors">
				<ul class="pseudoSelect"></ul>
			</dd>
		</dl>
	</fieldset>
</aside>
<!-- TUNING OPTIONS -->
<aside class="arrowBox tuningOptions" id="tuningOptions">
	<fieldset class="arrowBoxContent enablePseudoSelects">
		<dl>
			<dt><label for="transposePicker"><span>Original key</span> <em>&#9658;</em></label></dt>
			<dd id="transposePicker" data-action="transpose">
				<ul class="pseudoSelect" id="transposeOptions">
					<li><a href="#down_6">-6 <em>F#</em></a></li>
					<li><a href="#down_5">-5 <em>G</em></a></li>
					<li><a href="#down_4">-4 <em>G#</em></a></li>
					<li><a href="#down_3">-3 <em>A</em></a></li>
					<li><a href="#down_2">-2 <em>A#</em></a></li>
					<li><a href="#down_1">-1 <em>B</em></a></li>
					<li class="checked"><a href="#up_0">Original <em>C</em></a></li>
					<li><a href="#up_1">+1 <em>C#</em></a></li>
					<li><a href="#up_2">+2 <em>D</em></a></li>
					<li><a href="#up_3">+3 <em>D#</em></a></li>
					<li><a href="#up_4">+4 <em>E</em></a></li>
					<li><a href="#up_5">+5 <em>F</em></a></li>
					<li><a href="#up_6">+6 <em>F#</em></a></li>
				</ul>
			</dd>
			<dt><label for="tuningPicker"><span>Soprano ukulele tuning</span> <em>&#9658;</em></label></dt>
			<dd id="tuningPicker" data-action="tuning">
				<ul class="pseudoSelect">
					<li class="checked"><a href="#soprano">Soprano</a></li>
					<li><a href="#baritone">Baritone</a></li>
				</ul>
			</dd>
		</dl>
	</fieldset>
</aside>
<!-- OTHER OPTIONS -->
<aside class="arrowBox otherOptions" id="optionsDlg">
	<fieldset class="arrowBoxContent">
		<dl class="enablePseudoSelects">
			<dt><label for="pagePicker"><span>Paper</span> <em>&#9658;</em></label></dt>
			<dd id="pagePicker" data-action="paper">
				<ul class="pseudoSelect" id="pageWidth">
					<li class="checked"><a href="#letter">US Letter (8.5 x 11 in)</a></li>
					<li><a href="#a4">A4 (21 x 29.7 cm)</a></li>
					<li><a href="#screen">full screen</a></li>
				</ul>
			</dd>
		</dl>
	</fieldset>
	<fieldset class="arrowBoxContent">
		<p class="checkboxBlock">
			<input type="checkbox" value="true" id="chkEnclosures" checked="checked" />
			<label for="chkEnclosures">Hide chord enclosures
				<span class="checkBoxFinePrint">don't put [brackets] around chord names</span>
			</label>
		</p>
		<p class="checkboxBlock">
			<input type="checkbox" value="true" id="chkSortAlpha" checked="checked" />
			<label for="chkSortAlpha">Sort reference diagrams alphabetically
				<span class="checkBoxFinePrint">otherwise &ldquo;song order&rdquo; is used</span>
			</label>
		</p>
		<p class="checkboxBlock">
			<input type="checkbox" value="true" id="chkIgnoreCommon" checked="checked" />
			<label for="chkIgnoreCommon">Ignore common chords
				<span class="checkBoxFinePrint">don't create master chord diagrams for these chords:</span>
			</label>
			<input type="text" id="commonChordList" value="" />
		</p>
	</fieldset>
</aside>
<!-- HELP (DIALOG) -->
<aside class="arrowBox helpOptions" id="helpDlg" style="position:absolute">
<div style="overflow:">
<span style='font-family:Parnumation;color:yellow'>! J7K.6 | 5 J.4 | 3 2 | 1 J.5 |</span><br>
<span style='font-family:Parnumation;color:yellow'>6 J.6 | 7 J.7 | ! J.J’! | Jf!7 Jf65 |</span><br>
<span style='font-family:Parnumation;color:yellow'>J5Kk.4 J3! | J!7 J65 | J5K.4 J3J’3 | J33 J3fK34 |</span><br>
<span style='font-family:Parnumation;color:yellow'>5 j.j’kf43 | j22 j2kf23 | 4j.j’Kf32 | jf1! J.6 |</span><br>
<span style='font-family:Parnumation;color:yellow'>j5k.4 j34 | 3 2 | 1 . +</span><br>

number : normal hight low note<br>
<span style='font-family:Parnumation;color:yellow'>0 1 2 3 4 5 6 7</span> - - >   0 1 2 3 4 5 6 7<br>

<span style='font-family:Parnumation;color:yellow'>a1 a2 a3 a4 a5 a6 a7</span> - - >   a1 a2 a3 a4 a5 a6 a7<br>

<span style='font-family:Parnumation;color:yellow'>s1 s2 s3 s4 s5 s6 s7</span> - - >   s1 s2 s3 s4 s5 s6 s7<br>

<span style='font-family:Parnumation;color:yellow'>91 92 93 94 95 96 97</span> - - >   91 92 93 94 95 96 97<br>

<span style='font-family:Parnumation;color:yellow'>81 82 83 84 85 86 87</span> - - >   81 82 83 84 85 86 87<br>

half notation<br>
<span style='font-family:Parnumation;color:yellow'>/1 /2 /3 /4 /5 /6 /7</span> - - >   /1 /2 /3 /4 /5 /6 /7<br>

<span style='font-family:Parnumation;color:yellow'>\1 \2 \3 \4 \5 \6 \7</span> - - >   \1 \2 \3 \4 \5 \6 \7<br>

===========================<br>
note 1/2   1/4  1/8  etc...<br>
basic j or J k or K l or L<br>
<span style='font-family:Parnumation;color:yellow'>j</span> - - >   j<br>    
<span style='font-family:Parnumation;color:yellow'>J</span> - - >   J<br>    
<span style='font-family:Parnumation;color:yellow'>k</span> - - >   k<br>   
<span style='font-family:Parnumation;color:yellow'>K</span> - - >   K<br>    
<span style='font-family:Parnumation;color:yellow'>l</span> - - >   l<br>    
<span style='font-family:Parnumation;color:yellow'>L</span> - - >   L<br>
<span style='font-family:Parnumation;color:yellow'>j.2   j3. j04</span> - - >   j.2   j3. j04<br>
<span style='font-family:Parnumation;color:yellow'>j2k03   j4k.5    j2k3.</span> - - >   j2k03   j4k.5    j2k3.<br>
<span style='font-family:Parnumation;color:yellow'>J4k0k5l23  k2L34  L3k2j32</span> - - >   J4k0k5l23  k2L34  L3k2j32<br>

Bar and other separator<br>

<span style='font-family:Parnumation;color:yellow'>|     _      +   [    ]</span> - - >   |     _      +   [    ]<br>

Special separator used in Indonesia<br>

<span style='font-family:Parnumation;color:yellow'>{  &nbsp;   }</span> - - >   {     }<br>
<span style='font-family:Parnumation;color:yellow'>:  &nbsp;   ;</span> - - >   :     ;<br>
<span style='font-family:Parnumation;color:yellow'><  &nbsp;   ></span> - - >   <     ><br>

========================<br>
<span style='font-family:Parnumation;color:yellow'>{    &nbsp;     }</span> - - >   {         }<br>
<span style='font-family:Parnumation;color:yellow'>_    &nbsp;     _</span> - - >   _         _<br>
<span style='font-family:Parnumation;color:yellow'>:    &nbsp;     ;</span> - - >   :         ;<br>
=======================<br>

Legato<br>
bawah pendek    bawah menengah  bawah panjang       atas<br>
<span style='font-family:Parnumation;color:yellow'>f&nbsp;&nbsp;&nbsp;&nbsp;g&nbsp;&nbsp;&nbsp;&nbsp;h&nbsp;&nbsp;&nbsp;&nbsp;i</span> - - >   f       g       h       i<br>


<span style='font-family:Parnumation;color:yellow'>F&nbsp;&nbsp;&nbsp;&nbsp;G&nbsp;&nbsp;&nbsp;&nbsp;H&nbsp;&nbsp;&nbsp;&nbsp;I</span> - - >   F       G       H       I<br>


<span style='font-family:Parnumation;color:yellow'>z&nbsp;&nbsp;x&nbsp;&nbsp;c</span> - - >   z       x       c<br>

kombinasi untuk perpanjang <br>
<span style='font-family:Parnumation;color:yellow'>z c&nbsp;&nbsp;z x c&nbsp;&nbsp;z x x c&nbsp;&nbsp;z x  x x c</span> - - >   z c&nbsp;&nbsp;z x c&nbsp;&nbsp;z x x c&nbsp;&nbsp;z x  x x c<br>

contoh <br>
<span style='font-family:Parnumation;color:yellow'>f2374g|..32|</span> - - >   f2374g|..32|   menggunakan f dan g<br>
<span style='font-family:Parnumation;color:yellow'>z2c374z|x.c.32</span> - - >   z2c374z|x.c.32  mengguanakan zxc<br>


Triplet<br>

<span style='font-family:Parnumation;color:yellow'>v           b            m</span> - - >   v           b            m<br>

contoh<br>
<span style='font-family:Parnumation;color:yellow'>v Â m</span> - - >   v Â m    Â = 3 upper<br>

spesial symbol<br>
<span style='font-family:Parnumation;color:yellow'>D    d</span> - - >   fermata D  or d<br>  
<br>
<span style='font-family:Parnumation;color:yellow'>‡</span> - - >   shift ctrl '<br>  
<span style='font-family:Parnumation;color:yellow'>√</span> - - >   shift ctrl [<br>  
<span style='font-family:Parnumation;color:yellow'>†</span> - - >   shiift ctrl ]<br>  
<span style='font-family:Parnumation;color:yellow'>∫</span> - - >   shiift ctrl \<br>  

</div>
	<fieldset class="arrowBoxContent linksList" style="display:none">
		<ul>
			<li><a href="http://blog.ukegeeks.com/users-guide/" target="_blank" title="View the complete documentation including ChordPro tips">User Guide</a></li>
			<li><a href="http://ukegeeks.com/tools/chord-finder.htm" target="_blank" title="Access the UkeGeeks library of common chords">Chord Finder</a></li>
			<li><a href="http://ukegeeks.com/tools/reverse-chord-finder.htm" target="_blank" title="Find chord names by drawing the diagram">Reverse Chord Lookup</a></li>
		</ul>
	</fieldset>
</aside>

<!-- REFORMAT (DIALOG) -->
<section id="reformatDlg" class="reformatDlg overlay isHidden">
	<hgroup>
		<h3>Use Auto-Formated Version?</h3>
	</hgroup>
	<div>
		<!-- <a title="resize this" href="#resize" class="resizeBtn">Resize</a> -->
		<p class="instructions">Whoa! I didn't find any chords in your song -- it's probably not in ChordPro format. Here's the converted version&hellip;</p>
		<p class="btnBar">
			<input type="button" id="reformatYesBtn" class="baseBtn blueBtn" value="OK, Use This!" />
			<a id="reformatNoBtn" href="#noThanks" class="noThanks">No, Thanks!</a>
		</p>
		<textarea id="reformatSource" wrap="off"></textarea>
		<p class="instructions small">Want to make more adjustments? Click &ldquo;No Thanks&rdquo; and try the <a href="http://ukegeeks.com/tools" target="_blank" title="open the reformat tool in a new window">Reformater Tool</a> instead.</p>
		<p class="instructions small"><input type="checkbox" value="true" id="reformatDisable" /> <label for="reformatDisable">Don't perform this check again.</label></p>
	</div>
</section>

<!-- CHORD BUILDER (DIALOG) -->
<section id="cdBldDlg" class="overlay chordBuilderDlg isHidden chordBuilderNarrow" style="display:none">
	<hgroup>
		<h3>Chord Builder</h3>
	</hgroup>
	<div>
		<a title="close this" href="#close" class="closeBtn">Close</a>
		<div id="cdBldChooserPanel">
			<ul id="cdBldPick" class="ugsChordChooser"></ul>
		</div>
		<div id="cdBldBuilderPanel" style="display:none">
			<p class="">
				<label for="cdBldChordName">Chord Name: <input class="chordName" type="text" id="cdBldChordName" value="CHORDNAME" /></label>
			</p>
			<div class="editorSurface" id="cdBldEditorSurface">
				<div class="toolboxEdgeShadow leftEdge"></div>
				<div id="cdBldToolbox" class="chordToolbox leftEdge">
					<div class="chordToolboxInner">
						<a href="#dots" id="cdBldDotsBtn" class="toolChip selected">Add Dots <span class="bigDot"></span></a>
						<a href="#fingers" id="cdBldFingersBtn" class="toolChip">Set Fingers <span id="cdBldBtnDiagram" class="fingerToolImage finger1"><span class="fingerDot"></span></span><span id="cdBldBtnFingerName"></span></a>
					</div>
				</div>
				<div class="toolboxEdgeShadow rightEdge"></div>
				<div class="chordToolbox rightEdge">
					<div class="chordToolboxInner">
						<label for="cdBldStartingFret" class="toolChip">Starting Fret
							<select id="cdBldStartingFret"></select>
						</label>
						<a href="#slide-up" id="toolboxSlideUpBtn" class="toolChip arrowUp" data-direction="up" title="move all dots -1 fret">Slide Up</a>
						<a href="#slide-down" id="toolboxSlideDownBtn" class="toolChip arrowDown" data-direction="down" title="move all dots +1 fret">Slide Down</a>
					</div>
				</div>
				<canvas id="cdBldCursorCanvas" width="462" height="300"></canvas>
				<canvas id="cdBldDiagramCanvas" width="462" height="300"></canvas>
			</div>

			<p class="">
				<label for="cdBldShowOutputBtn"><input id="cdBldShowOutputBtn" type="checkbox" value="0" /> Show ChordPro output</label>
			</p>
			<p class="btnBar">
				<input type="button" value="Add" class="baseBtn blueBtn" id="cdBldSaveBtn">
				<a href="#closeBuilder" id="cdBldCancelBtn" class="noThanks">Cancel</a>
			</p>
			<div id="cdBldOutputBox" class="outputBox collapseOutput" style="clear:right;">
				<pre id="cdBldOutput" class="chordPro-statement" title="Your ChordPro define tag"></pre>
			</div>
		</div>
	</div>
</section>

<!-- SCRIPTS -->
<script type="text/javascript" id="../js/jquery-1.9.1.min.js">
/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/(function(e,t){var n,r,i=typeof t,o=e.document,a=e.location,s=e.jQuery,u=e.$,l={},c=[],p="1.9.1",f=c.concat,d=c.push,h=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,b=function(e,t){return new b.fn.init(e,t,r)},x=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^[\],:{}\s]*$/,E=/(?:^|:|,)(?:\s*\[)+/g,S=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,j=/^-ms-/,D=/-([\da-z])/gi,L=function(e,t){return t.toUpperCase()},H=function(e){(o.addEventListener||"load"===e.type||"complete"===o.readyState)&&(q(),b.ready())},q=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",H,!1),e.removeEventListener("load",H,!1)):(o.detachEvent("onreadystatechange",H),e.detachEvent("onload",H))};b.fn=b.prototype={jquery:p,constructor:b,init:function(e,n,r){var i,a;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),C.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(a=o.getElementById(i[2]),a&&a.parentNode){if(a.id!==i[2])return r.find(e);this.length=1,this[0]=a}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||b.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,a=e&&b.isArray(e)?e:[]):a=e&&b.isPlainObject(e)?e:{},s[i]=b.extend(c,a,r)):r!==t&&(s[i]=r));return s},b.extend({noConflict:function(t){return e.$===b&&(e.$=u),t&&e.jQuery===b&&(e.jQuery=s),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!o.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(o,[b]),b.fn.trigger&&b(o).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||y.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=b.trim(n),n&&k.test(n.replace(S,"@").replace(A,"]").replace(E,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(j,"ms-").replace(D,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:v&&!v.call("\ufeff\u00a0")?function(e){return null==e?"":v.call(e)}:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?b.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return f.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),b.isFunction(e)?(r=h.call(arguments,2),i=function(){return e.apply(n||this,r.concat(h.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if("object"===b.type(r)){o=!0;for(u in r)b.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,b.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(b(e),n)})),n))for(;l>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===o.readyState)setTimeout(b.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",H,!1),e.addEventListener("load",H,!1);else{o.attachEvent("onreadystatechange",H),e.attachEvent("onload",H);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function a(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(a,50)}q(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function M(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}r=b(o);var _={};function F(e){var t=_[e]={};return b.each(e.match(w)||[],function(e,n){t[n]=!0}),t}b.Callbacks=function(e){e="string"==typeof e?_[e]||F(e):b.extend({},e);var n,r,i,o,a,s,u=[],l=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=u.length,n=!0;u&&o>a;a++)if(u[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,u&&(l?l.length&&c(l.shift()):r?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this},remove:function(){return u&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,u,r))>-1)u.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?b.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=l=r=t,this},disabled:function(){return!u},lock:function(){return l=t,r||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||i&&!l||(n?l.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=h.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,o=1===i?e:b.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?h.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,u,l;if(r>1)for(s=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(a(t,l,n)).fail(o.reject).progress(a(t,u,s)):--i;return i||o.resolveWith(l,n),o.promise()}}),b.support=function(){var t,n,r,a,s,u,l,c,p,f,d=o.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),r=d.getElementsByTagName("a")[0],!n||!r||!n.length)return{};s=o.createElement("select"),l=s.appendChild(o.createElement("option")),a=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!a.value,optSelected:l.selected,enctype:!!o.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===o.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!l.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}a=o.createElement("input"),a.setAttribute("value",""),t.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),t.radioValue="t"===a.value,a.setAttribute("checked","t"),a.setAttribute("name","t"),u=o.createDocumentFragment(),u.appendChild(a),t.appendChecked=a.checked,t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||d.attributes[c].expando===!1;return d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip,b(function(){var n,r,a,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",u=o.getElementsByTagName("body")[0];u&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",u.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=d.getElementsByTagName("td"),a[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===a[0].offsetHeight,a[0].style.display="",a[1].style.display="none",t.reliableHiddenOffsets=p&&0===a[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==u.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(o.createElement("div")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(u.style.zoom=1)),u.removeChild(n),n=d=a=r=null)}),n=s=u=l=r=a=null,t}();var O=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,B=/([A-Z])/g;function P(e,n,r,i){if(b.acceptData(e)){var o,a,s=b.expando,u="string"==typeof n,l=e.nodeType,p=l?b.cache:e,f=l?e[s]:e[s]&&s;if(f&&p[f]&&(i||p[f].data)||!u||r!==t)return f||(l?e[s]=f=c.pop()||b.guid++:f=s),p[f]||(p[f]={},l||(p[f].toJSON=b.noop)),("object"==typeof n||"function"==typeof n)&&(i?p[f]=b.extend(p[f],n):p[f].data=b.extend(p[f].data,n)),o=p[f],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[b.camelCase(n)]=r),u?(a=o[n],null==a&&(a=o[b.camelCase(n)])):a=o,a}}function R(e,t,n){if(b.acceptData(e)){var r,i,o,a=e.nodeType,s=a?b.cache:e,u=a?e[b.expando]:b.expando;if(s[u]){if(t&&(o=n?s[u]:s[u].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in o?t=[t]:(t=b.camelCase(t),t=t in o?[t]:t.split(" "));for(r=0,i=t.length;i>r;r++)delete o[t[r]];if(!(n?$:b.isEmptyObject)(o))return}(n||(delete s[u].data,$(s[u])))&&(a?b.cleanData([e],!0):b.support.deleteExpando||s!=s.window?delete s[u]:s[u]=null)}}}b.extend({cache:{},expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!$(e)},data:function(e,t,n){return P(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return P(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,o=this[0],a=0,s=null;if(e===t){if(this.length&&(s=b.data(o),1===o.nodeType&&!b._data(o,"parsedAttrs"))){for(r=o.attributes;r.length>a;a++)i=r[a].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),W(o,i,s[i]));b._data(o,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?o?W(o,e,b.data(o,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function W(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(B,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:O.test(r)?b.parseJSON(r):r}catch(o){}b.data(e,n,r)}else r=t}return r}function $(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}b.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t),a=function(){b.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),o.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=b.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(s--)r=b._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var I,z,X=/[\t\r\n]/g,U=/\r/g,V=/^(?:input|select|textarea|button|object)$/i,Y=/^(?:a|area)$/i,J=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,G=/^(?:checked|selected)$/i,Q=b.support.getSetAttribute,K=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):" ")){o=0;while(i=t[o++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):"")){o=0;while(i=t[o++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var o,a=0,s=b(this),u=t,l=e.match(w)||[];while(o=l[a++])u=r?u:!s.hasClass(o),s[u?"addClass":"removeClass"](o)}else(n===i||"boolean"===n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=b.isFunction(e),this.each(function(n){var o,a=b(this);1===this.nodeType&&(o=i?e.call(this,n,a.val()):e,null==o?o="":"number"==typeof o?o+="":b.isArray(o)&&(o=b.map(o,function(e){return null==e?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))});if(o)return r=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(U,""):null==n?"":n)}}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;for(;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var o,a,s,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return typeof e.getAttribute===i?b.prop(e,n,r):(a=1!==u||!b.isXMLDoc(e),a&&(n=n.toLowerCase(),o=b.attrHooks[n]||(J.test(n)?z:I)),r===t?o&&a&&"get"in o&&null!==(s=o.get(e,n))?s:(typeof e.getAttribute!==i&&(s=e.getAttribute(n)),null==s?t:s):null!==r?o&&a&&"set"in o&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)while(n=o[i++])r=b.propFix[n]||n,J.test(n)?!Q&&G.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!b.isXMLDoc(e),a&&(n=b.propFix[n]||n,o=b.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):V.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),z={get:function(e,n){var r=b.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),o="boolean"==typeof r?K&&Q?null!=i:G.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},K&&Q||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,"input")?(e.defaultValue=n,t):I&&I.set(e,n,r)}}),Q||(I=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:I.get,set:function(e,t,n){I.set(e,""===t?!1:t,n)}},b.each(["width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;function it(){return!0}function ot(){return!1}b.event={global:{},add:function(e,n,r,o,a){var s,u,l,c,p,f,d,h,g,m,y,v=b._data(e);if(v){r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=b.guid++),(u=v.events)||(u=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(w)||[""],l=n.length;while(l--)s=rt.exec(n[l])||[],g=y=s[1],m=(s[2]||"").split(".").sort(),p=b.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=b.event.special[g]||{},d=b.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&b.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=u[g])||(h=u[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),b.event.global[g]=!0;e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,f,d,h,g,m=b.hasData(e)&&b._data(e);if(m&&(c=m.events)){t=(t||"").match(w)||[""],l=t.length;while(l--)if(s=rt.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){p=b.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=f.length;while(o--)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));u&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||b.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(c)&&(delete m.handle,b._removeData(e,"events"))}},trigger:function(n,r,i,a){var s,u,l,c,p,f,d,h=[i||o],g=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];if(l=f=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+b.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),u=0>g.indexOf(":")&&"on"+g,n=n[b.expando]?n:new b.Event(g,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),p=b.event.special[g]||{},a||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!a&&!p.noBubble&&!b.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(l=l.parentNode);l;l=l.parentNode)h.push(l),f=l;f===(i.ownerDocument||o)&&h.push(f.defaultView||f.parentWindow||e)}d=0;while((l=h[d++])&&!n.isPropagationStopped())n.type=d>1?c:p.bindType||g,s=(b._data(l,"events")||{})[n.type]&&b._data(l,"handle"),s&&s.apply(l,r),s=u&&l[u],s&&b.acceptData(l)&&s.apply&&s.apply(l,r)===!1&&n.preventDefault();if(n.type=g,!(a||n.isDefaultPrevented()||p._default&&p._default.apply(i.ownerDocument,r)!==!1||"click"===g&&b.nodeName(i,"a")||!b.acceptData(i)||!u||!i[g]||b.isWindow(i))){f=i[u],f&&(i[u]=null),b.event.triggered=g;try{i[g]()}catch(v){}b.event.triggered=t,f&&(i[u]=f)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,o,a,s=[],u=h.call(arguments),l=(b._data(this,"events")||{})[e.type]||[],c=b.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=b.event.handlers.call(this,e,l),n=0;while((o=s[n++])&&!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(o=[],a=0;u>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?b(r,this).index(l)>=0:b.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return n.length>u&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,a=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new b.Event(a),t=r.length;while(t--)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,a,s=n.button,u=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,a=i.documentElement,r=i.body,e.pageX=n.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==o.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===o.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;
return(!i||i!==r&&!b.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return b().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){var n,r,i,o,a,s,u,l,c,p,f,d,h,g,m,y,v,x="sizzle"+-new Date,w=e.document,T={},N=0,C=0,k=it(),E=it(),S=it(),A=typeof t,j=1<<31,D=[],L=D.pop,H=D.push,q=D.slice,M=D.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},_="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=F.replace("w","w#"),B="([*^$|!~]?=)",P="\\["+_+"*("+F+")"+_+"*(?:"+B+_+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+O+")|)|)"+_+"*\\]",R=":("+F+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+P.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+_+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_+"+$","g"),$=RegExp("^"+_+"*,"+_+"*"),I=RegExp("^"+_+"*([\\x20\\t\\r\\n\\f>+~])"+_+"*"),z=RegExp(R),X=RegExp("^"+O+"$"),U={ID:RegExp("^#("+F+")"),CLASS:RegExp("^\\.("+F+")"),NAME:RegExp("^\\[name=['\"]?("+F+")['\"]?\\]"),TAG:RegExp("^("+F.replace("w","w*")+")"),ATTR:RegExp("^"+P),PSEUDO:RegExp("^"+R),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+_+"*(even|odd|(([+-]|)(\\d*)n|)"+_+"*(?:([+-]|)"+_+"*(\\d+)|))"+_+"*\\)|)","i"),needsContext:RegExp("^"+_+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+_+"*((?:-\\d)?\\d*)"+_+"*\\)|)(?=[^-]|$)","i")},V=/[\x20\t\r\n\f]*[+~]/,Y=/^[^{]+\{\s*\[native code/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,G=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,K=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{q.call(w.documentElement.childNodes,0)[0].nodeType}catch(nt){q=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}function rt(e){return Y.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function ot(e){return e[x]=!0,e}function at(e){var t=p.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function st(e,t,n,r){var i,o,a,s,u,l,f,g,m,v;if((t?t.ownerDocument||t:w)!==p&&c(t),t=t||p,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(!d&&!r){if(i=J.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&y(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return H.apply(n,q.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&&T.getByClassName&&t.getElementsByClassName)return H.apply(n,q.call(t.getElementsByClassName(a),0)),n}if(T.qsa&&!h.test(e)){if(f=!0,g=x,m=t,v=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){l=ft(e),(f=t.getAttribute("id"))?g=f.replace(K,"\\$&"):t.setAttribute("id",g),g="[id='"+g+"'] ",u=l.length;while(u--)l[u]=g+dt(l[u]);m=V.test(e)&&t.parentNode||t,v=l.join(",")}if(v)try{return H.apply(n,q.call(m.querySelectorAll(v),0)),n}catch(b){}finally{f||t.removeAttribute("id")}}}return wt(e.replace(W,"$1"),t,n,r)}a=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},c=st.setDocument=function(e){var n=e?e.ownerDocument||e:w;return n!==p&&9===n.nodeType&&n.documentElement?(p=n,f=n.documentElement,d=a(n),T.tagNameNoComments=at(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),T.attributes=at(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),T.getByClassName=at(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),T.getByName=at(function(e){e.id=x+0,e.innerHTML="<a name='"+x+"'></a><div name='"+x+"'></div>",f.insertBefore(e,f.firstChild);var t=n.getElementsByName&&n.getElementsByName(x).length===2+n.getElementsByName(x+0).length;return T.getIdNotName=!n.getElementById(x),f.removeChild(e),t}),i.attrHandle=at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==A&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},T.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==A&&!d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==A&&!d){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==A&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=T.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},i.find.NAME=T.getByName&&function(e,n){return typeof n.getElementsByName!==A?n.getElementsByName(name):t},i.find.CLASS=T.getByClassName&&function(e,n){return typeof n.getElementsByClassName===A||d?t:n.getElementsByClassName(e)},g=[],h=[":focus"],(T.qsa=rt(n.querySelectorAll))&&(at(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||h.push("\\["+_+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||h.push(":checked")}),at(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&h.push("[*^$]="+_+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||h.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),h.push(",.*:")})),(T.matchesSelector=rt(m=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&at(function(e){T.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),g.push("!=",R)}),h=RegExp(h.join("|")),g=RegExp(g.join("|")),y=rt(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},v=f.compareDocumentPosition?function(e,t){var r;return e===t?(u=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||y(w,e)?-1:t===n||y(w,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return u=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:0;if(o===a)return ut(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?ut(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},u=!1,[0,0].sort(v),T.detectDuplicates=u,p):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Z,"='$1']"),!(!T.matchesSelector||d||g&&g.test(t)||h.test(t)))try{var n=m.call(e,t);if(n||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},st.attr=function(e,t){var n;return(e.ownerDocument||e)!==p&&c(e),d||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):d||T.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},st.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,n=[],r=1,i=0;if(u=!T.detectDuplicates,e.sort(v),u){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e};function ut(e,t){var n=t&&e,r=n&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pt(e){return ot(function(t){return t=+t,ot(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}o=st.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=st.selectors={cacheLength:50,createPseudo:ot,match:U,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return U.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&z.test(n)&&(t=ft(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[e+" "];return t||(t=RegExp("(^|"+_+")"+e+"("+_+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){c=m[x]||(m[x]={}),l=c[e]||[],d=l[0]===N&&l[1],f=l[0]===N&&l[2],p=d&&m.childNodes[d];while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if(1===p.nodeType&&++f&&p===t){c[e]=[N,d,f];break}}else if(v&&(l=(t[x]||(t[x]={}))[e])&&l[0]===N)f=l[1];else while(p=++d&&p&&p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&&++f&&(v&&((p[x]||(p[x]={}))[e]=[N,f]),p===t))break;return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return r[x]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=M.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ot(function(e){var t=[],n=[],r=s(e.replace(W,"$1"));return r[x]?ot(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ot(function(e){return function(t){return st(e,t).length>0}}),contains:ot(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:ot(function(e){return X.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=d?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=lt(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=ct(n);function ft(e,t){var n,r,o,a,s,u,l,c=E[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=i.preFilter;while(s){(!n||(r=$.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=I.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W," ")}),s=s.slice(n.length));for(a in i.filter)!(r=U[a].exec(s))||l[a]&&!(r=l[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?st.error(e):E(e,u).slice(0)}function dt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function ht(e,t,n){var i=t.dir,o=n&&"parentNode"===i,a=C++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var u,l,c,p=N+" "+a;if(s){while(t=t[i])if((1===t.nodeType||o)&&e(t,n,s))return!0}else while(t=t[i])if(1===t.nodeType||o)if(c=t[x]||(t[x]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,s)||r,l[1]===!0)return!0}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var o,a=[],s=0,u=e.length,l=null!=t;for(;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function yt(e,t,n,r,i,o){return r&&!r[x]&&(r=yt(r)),i&&!i[x]&&(i=yt(i,o)),ot(function(o,a,s,u){var l,c,p,f=[],d=[],h=a.length,g=o||xt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:mt(g,f,e,s,u),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,u),r){l=mt(y,d),r(l,[],s,u),c=l.length;while(c--)(p=l[c])&&(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){l=[],c=y.length;while(c--)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}c=y.length;while(c--)(p=y[c])&&(l=i?M.call(o,p):f[c])>-1&&(o[l]=!(a[l]=p))}}else y=mt(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function vt(e){var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],u=a?1:0,c=ht(function(e){return e===t},s,!0),p=ht(function(e){return M.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;o>u;u++)if(n=i.relative[e[u].type])f=[ht(gt(f),n)];else{if(n=i.filter[e[u].type].apply(null,e[u].matches),n[x]){for(r=++u;o>r;r++)if(i.relative[e[r].type])break;return yt(u>1&&gt(f),u>1&&dt(e.slice(0,u-1)).replace(W,"$1"),n,r>u&&vt(e.slice(u,r)),o>r&&vt(e=e.slice(r)),o>r&&dt(e))}f.push(n)}return gt(f)}function bt(e,t){var n=0,o=t.length>0,a=e.length>0,s=function(s,u,c,f,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,T=l,C=s||a&&i.find.TAG("*",d&&u.parentNode||u),k=N+=null==T?1:Math.random()||.1;for(w&&(l=u!==p&&u,r=n);null!=(h=C[b]);b++){if(a&&h){g=0;while(m=e[g++])if(m(h,u,c)){f.push(h);break}w&&(N=k,r=++n)}o&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,o&&b!==v){g=0;while(m=t[g++])m(x,y,u,c);if(s){if(v>0)while(b--)x[b]||y[b]||(y[b]=L.call(f));y=mt(y)}H.apply(f,y),w&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(f)}return w&&(N=k,l=T),x};return o?ot(s):s}s=st.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=ft(e)),n=t.length;while(n--)o=vt(t[n]),o[x]?r.push(o):i.push(o);o=S(e,bt(i,r))}return o};function xt(e,t,n){var r=0,i=t.length;for(;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r){var o,a,u,l,c,p=ft(e);if(!r&&1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&"ID"===(u=a[0]).type&&9===t.nodeType&&!d&&i.relative[a[1].type]){if(t=i.find.ID(u.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(a.shift().value.length)}o=U.needsContext.test(e)?0:a.length;while(o--){if(u=a[o],i.relative[l=u.type])break;if((c=i.find[l])&&(r=c(u.matches[0].replace(et,tt),V.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=r.length&&dt(a),!e)return H.apply(n,q.call(r,0)),n;break}}}return s(e,p)(r,t,d,n,V.test(e)),n}i.pseudos.nth=i.pseudos.eq;function Tt(){}i.filters=Tt.prototype=i.pseudos,i.setFilters=new Tt,c(),st.attr=b.attr,b.find=st,b.expr=st.selectors,b.expr[":"]=b.expr.pseudos,b.unique=st.uniqueSort,b.text=st.getText,b.isXMLDoc=st.isXML,b.contains=st.contains}(e);var at=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ut=/^.[^:#\[\.,]*$/,lt=b.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1))},filter:function(e){return this.pushStack(ft(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?lt.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,o=[],a=lt.test(e)||"string"!=typeof e?b(e,t||this.context):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(a?a.index(n)>-1:b.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}}return this.pushStack(o.length>1?b.unique(o):o)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack;function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return at.test(e)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!ct[e]?b.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!b(o).is(r)))1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});function ft(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+ht+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,wt=/<|&#?\w+;/,Tt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^$|\/(?:java|ecma)script/i,Et=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},jt=dt(o),Dt=jt.appendChild(o.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(Ot(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Mt(Ot(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(Ot(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(Ot(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=f.apply([],e);var i,o,a,s,u,l,c=0,p=this.length,d=this,h=p-1,g=e[0],m=b.isFunction(g);if(m||!(1>=p||"string"!=typeof g||b.support.checkClone)&&Ct.test(g))return this.each(function(i){var o=d.eq(i);m&&(e[0]=g.call(this,i,n?o.html():t)),o.domManip(e,n,r)});if(p&&(l=b.buildFragment(e,this[0].ownerDocument,!1,this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(n=n&&b.nodeName(i,"tr"),s=b.map(Ot(l,"script"),Ht),a=s.length;p>c;c++)o=l,c!==h&&(o=b.clone(o,!0,!0),a&&b.merge(s,Ot(o,"script"))),r.call(n&&b.nodeName(this[c],"table")?Lt(this[c],"tbody"):this[c],o,c);if(a)for(u=s[s.length-1].ownerDocument,b.map(s,qt),c=0;a>c;c++)o=s[c],kt.test(o.type||"")&&!b._data(o,"globalEval")&&b.contains(u,o)&&(o.src?b.ajax({url:o.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((o.text||o.textContent||o.innerHTML||"").replace(St,"")));l=i=null}return this}});function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ht(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Mt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function _t(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,o=b._data(e),a=b._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)b.event.add(t,n,s[n][r])}a.data&&(a.data=b.extend({},a.data))}}function Ft(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Nt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],o=b(e),a=o.length-1;for(;a>=r;r++)n=r===a?this:this.clone(!0),b(o[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}});function Ot(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||b.nodeName(o,n)?s.push(o):b.merge(s,Ot(o,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],s):s}function Bt(e){Nt.test(e.type)&&(e.defaultChecked=e.checked)}b.extend({clone:function(e,t,n){var r,i,o,a,s,u=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=Ot(o),s=Ot(e),a=0;null!=(i=s[a]);++a)r[a]&&Ft(i,r[a]);if(t)if(n)for(s=s||Ot(e),r=r||Ot(o),a=0;null!=(i=s[a]);a++)_t(i,r[a]);else _t(e,o);return r=Ot(o,"script"),r.length>0&&Mt(r,!u&&Ot(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,u,l,c,p=e.length,f=dt(t),d=[],h=0;for(;p>h;h++)if(o=e[h],o||0===o)if("object"===b.type(o))b.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement("div")),u=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[u]||At._default,s.innerHTML=c[1]+o.replace(vt,"<$1></$2>")+c[2],i=c[0];while(i--)s=s.lastChild;if(!b.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!b.support.tbody){o="table"!==u||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;while(i--)b.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l)
}b.merge(d,s.childNodes),s.textContent="";while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&&f.removeChild(s),b.support.appendChecked||b.grep(Ot(d,"input"),Bt),h=0;while(o=d[h++])if((!r||-1===b.inArray(o,r))&&(a=b.contains(o.ownerDocument,o),s=Ot(f.appendChild(o),"script"),a&&Mt(s),n)){i=0;while(o=s[i++])kt.test(o.type||"")&&n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,u=b.expando,l=b.cache,p=b.support.deleteExpando,f=b.event.special;for(;null!=(n=e[s]);s++)if((t||b.acceptData(n))&&(o=n[u],a=o&&l[o])){if(a.events)for(r in a.events)f[r]?b.event.remove(n,r):b.removeEvent(n,r,a.handle);l[o]&&(delete l[o],p?delete n[u]:typeof n.removeAttribute!==i?n.removeAttribute(u):n[u]=null,c.push(o))}}});var Pt,Rt,Wt,$t=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+x+")(.*)$","i"),Yt=RegExp("^("+x+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+x+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s>a;a++)r=e[a],r.style&&(o[a]=b._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=b._data(r,"olddisplay",un(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,o,a={},s=0;if(b.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=b.css(e,n[s],!1,o);return a}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=b.camelCase(n),l=e.style;if(n=b.cssProps[u]||(b.cssProps[u]=tn(l,u)),s=b.cssHooks[n]||b.cssHooks[u],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,"string"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(b.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||b.cssNumber[u]||(r+="px"),b.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(l[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=b.camelCase(n);return n=b.cssProps[u]||(b.cssProps[u]=tn(e.style,u)),s=b.cssHooks[n]||b.cssHooks[u],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),r===!0||b.isNumeric(o)?o||0:a):a},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(""!==u||b.contains(e.ownerDocument,e)||(u=b.style(e,n)),Yt.test(u)&&Ut.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):o.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),Yt.test(u)&&!zt.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left="fontSize"===n?"1em":u,u=l.pixelLeft+"px",l.left=i,a&&(o.left=a)),""===u?"auto":u});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;for(;4>o;o+=2)"margin"===n&&(a+=b.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=b.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=b.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=b.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=b.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function un(e){var t=o,n=Gt[e];return n||(n=ln(e,t),"none"!==n&&n||(Pt=(Pt||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=ln(e,t),Pt.detach()),Gt[e]=n),n}function ln(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,"display"))?b.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?b(e).position()[n]+"px":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},o="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(b.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\[\]$/,fn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(fn,"\r\n")}}):{name:t.name,value:n.replace(fn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],o=function(e,t){t=b.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")};function gn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==b.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,yn,vn=b.now(),bn=/\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Nn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Cn=/^(?:GET|HEAD)$/,kn=/^\/\//,En=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=b.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=a.href}catch(Ln){yn=o.createElement("a"),yn.href="",yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(w)||[];if(b.isFunction(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(u){var l;return o[u]=!0,b.each(e[u]||[],function(e,u){var c=u(n,r,i);return"string"!=typeof c||a||o[c]?a?!(l=c):t:(n.dataTypes.unshift(c),s(c),!1)}),l}return s(n.dataTypes[0])||!o["*"]&&s("*")}function Mn(e,n){var r,i,o=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}b.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(" ");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),b.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&b.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,o){return b.isFunction(r)&&(o=o||i,i=r,r=t),b.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Nn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Mn(Mn(e,b.ajaxSettings),t):Mn(b.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,u,l,c,p=b.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?b(f):b.event,h=b.Deferred(),g=b.Callbacks("once memory"),m=p.statusCode||{},y={},v={},x=0,T="canceled",N={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||T;return l&&l.abort(t),k(0,t),this}};if(h.promise(N).complete=g.add,N.success=N.done,N.error=N.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=b.trim(p.dataType||"*").toLowerCase().match(w)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?80:443))==(mn[3]||("http:"===mn[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=b.param(p.data,p.traditional)),qn(An,p,n,N),2===x)return N;u=p.global,u&&0===b.active++&&b.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Cn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++)),p.ifModified&&(b.lastModified[o]&&N.setRequestHeader("If-Modified-Since",b.lastModified[o]),b.etag[o]&&N.setRequestHeader("If-None-Match",b.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&N.setRequestHeader("Content-Type",p.contentType),N.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)N.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,N,p)===!1||2===x))return N.abort();T="abort";for(i in{success:1,error:1,complete:1})N[i](p[i]);if(l=qn(jn,p,n,N)){N.readyState=1,u&&d.trigger("ajaxSend",[N,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){N.abort("timeout")},p.timeout));try{x=1,l.send(y,k)}catch(C){if(!(2>x))throw C;k(-1,C)}}else k(-1,"No Transport");function k(e,n,r,i){var c,y,v,w,T,C=n;2!==x&&(x=2,s&&clearTimeout(s),l=t,a=i||"",N.readyState=e>0?4:0,r&&(w=_n(p,N,r)),e>=200&&300>e||304===e?(p.ifModified&&(T=N.getResponseHeader("Last-Modified"),T&&(b.lastModified[o]=T),T=N.getResponseHeader("etag"),T&&(b.etag[o]=T)),204===e?(c=!0,C="nocontent"):304===e?(c=!0,C="notmodified"):(c=Fn(p,w),C=c.state,y=c.data,v=c.error,c=!v)):(v=C,(e||!C)&&(C="error",0>e&&(e=0))),N.status=e,N.statusText=(n||C)+"",c?h.resolveWith(f,[y,C,N]):h.rejectWith(f,[N,C,v]),N.statusCode(m),m=t,u&&d.trigger(c?"ajaxSuccess":"ajaxError",[N,p,c?y:v]),g.fireWith(f,[N,C]),u&&(d.trigger("ajaxComplete",[N,p]),--b.active||b.event.trigger("ajaxStop")))}return N},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}});function _n(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(s in c)s in r&&(n[c[s]]=r[s]);while("*"===l[0])l.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in u)if(u[s]&&u[s].test(o)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&&l.unshift(a),r[a]):t}function Fn(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u[1])for(i in e.converters)a[i.toLowerCase()]=e.converters[i];for(;r=u[++s];)if("*"!==r){if("*"!==l&&l!==r){if(i=a[l+" "+r]||a["* "+r],!i)for(n in a)if(o=n.split(" "),o[1]===r&&(i=a[l+" "+o[0]]||a["* "+o[0]])){i===!0?i=a[n]:a[n]!==!0&&(r=o[0],u.splice(s--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(c){return{state:"parsererror",error:i?c:"No conversion from "+l+" to "+r}}}l=r}return{state:"success",data:t}}b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||b("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var On=[],Bn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=On.pop()||b.expando+"_"+vn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Bn,"$1"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||b.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,On.push(o)),s&&b.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=b.ajaxSettings.xhr(),b.support.cors=!!Rn&&"withCredentials"in Rn,Rn=b.support.ajax=!!Rn,Rn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,p;try{if(r&&(i||4===u.readyState))if(r=t,a&&(u.onreadystatechange=b.noop,$n&&delete Pn[a]),i)4!==u.readyState&&u.abort();else{p={},s=u.status,l=u.getAllResponseHeaders(),"string"==typeof u.responseText&&(p.text=u.responseText);try{c=u.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,l)},n.async?4===u.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},b(e).unload($n)),Pn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+x+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n,r,i=this.createTween(e,t),o=Yn.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(b.cssNumber[e]?"":"px"),"px"!==r&&s){s=b.css(i.elem,e,!0)||n||1;do u=u||".5",s/=u,b.style(i.elem,e,s+r);while(u!==(u=i.cur()/a)&&1!==u&&--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Qn[t]||[]).concat(Qn["*"]),i=0,o=r.length;for(;o>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,o=0,a=Gn.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;for(;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(tr(c,l.opts.specialEasing);a>o;o++)if(r=Gn[o].call(l,e,c,l.opts))return r;return Zn(l,c),b.isFunction(l.opts.start)&&l.opts.start.call(e,l),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function tr(e,t){var n,r,i,o,a;for(i in e)if(r=b.camelCase(i),o=t[r],n=e[i],b.isArray(n)&&(o=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),a=b.cssHooks[r],a&&"expand"in a){n=a.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=o)}else t[r]=o}b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,u,l,c,p,f=this,d=e.style,h={},g=[],m=e.nodeType&&nn(e);n.queue||(c=b._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,b.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==un(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",b.support.shrinkWrapBlocks||f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],Vn.exec(a)){if(delete t[i],u=u||"toggle"===a,a===(m?"hide":"show"))continue;g.push(i)}if(o=g.length){s=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in s&&(m=s.hidden),u&&(s.hidden=!m),m?b(e).show():f.done(function(){b(e).hide()}),f.done(function(){var t;b._removeData(e,"fxshow");for(t in h)b.style(e,t,h[t])});for(i=0;o>i;i++)r=g[i],l=f.createTween(r,m?s[r]:0),h[r]=s[r]||b.style(e,r),r in s||(s[r]=l.start,m&&(l.end=l.start,l.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=er(this,b.extend({},e),o);a.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=b.timers,a=b._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Un||(Un=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Un),Un=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;if(s)return n=s.documentElement,b.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");"static"===r&&(e.style.position="relative");var i=b(e),o=i.offset(),a=b.css(e,"top"),s=b.css(e,"left"),u=("absolute"===r||"fixed"===r)&&b.inArray("auto",[a,s])>-1,l={},c={},p,f;u?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),b.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(l.top=t.top-o.top+p),null!=t.left&&(l.left=t.left-o.left+f),"using"in t?t.using.call(e,l):i.css(l)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===b.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.documentElement;while(e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position"))e=e.offsetParent;return e||o.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?b(a).scrollLeft():o,r?o:b(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return b.access(this,function(n,r,i){var o;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?b.css(n,r,s):b.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})})(window);
</script>
<script type="text/javascript" id="../js/jquery.draggable.js">

/**
 * Draggable Plugin
 * Copyright (c) 2013 Elton Jain
 * http://jsfiddle.net/yelton/2TQgB/
 * Source: http://techchurian.wordpress.com/2013/02/21/lightweight-draggable-jquery-plugin/
 * @class draggable
 * @namespace jQuery
 */
$.fn.draggable=function(e){var t=this;var n={handle:"",cursor:"move",axis:null,containParent:false};e=$.extend(n,e);if(e.handle===""){var r=t}else{var r=t.find(e.handle)}return r.css("cursor",e.cursor).on("mousedown",function(t){if(e.handle===""){var n=$(this).addClass("draggable")}else{var n=$(this).addClass("active-handle").parent().addClass("draggable")}var i=n.css("z-index"),s=n.outerHeight(),o=n.outerWidth(),u=n.offset().top+s-t.pageY,a=n.offset().left+o-t.pageX;var f=$(this).parent();var l=f.width(),c=f.height();var h=parseInt(f.offset().left)+parseInt(f.css("padding-left").replace("px","")),p=h+l,d=parseInt(f.offset().top)+parseInt(f.css("padding-top").replace("px","")),v=d+c;n.css("z-index",1e3).parents().on("mousemove",function(t){var f=t.pageY+u-s,l=t.pageX+a-o,c=null;if(e.containParent===true){if(l<h)l=h;if(l>p-o)l=p-o;if(f<d)f=d;if(f>v-s)f=v-s}if(e.axis=="x"){c={left:l}}else if(e.axis=="y"){c={top:f}}else{c={left:l,top:f}}$(".draggable").offset(c);$(".draggable, html").on("mouseup",function(){n.parents().off("mousemove");$(r).removeClass("draggable").css("z-index",i)})});t.preventDefault()}).on("mouseup",function(){if(e.handle===""){$(this).removeClass("draggable")}else{$(this).removeClass("active-handle").parent().removeClass("draggable")}r.off("mousedown",function(e){e.preventDefault()})})}
</script>
<script type="text/javascript" id="../js/ukeGeeks.scriptasaurus.merged.js">
/**
 * <ul>
 * <li>Project: UkeGeeks' Scriptasaurus</li>
 * <li>Version: 1.4.3</li>
 * <li>Homepage: http://ukegeeks.com</li>
 * <li>Project Repository: https://github.com/buzcarter/UkeGeeks</li>
 * <li>Author: Buz Carter</li>
 * <li>Contact: buz@ukegeeks.com</li>
 * <li>Copyright: Copyright 2010-2014 Buz Carter.</li>
 * <li>License GNU General Public License (http://www.gnu.org/licenses/gpl.html)</li>
 * </ul>
 *
 * <h3>Overview</h3>
 * <p>Reads marked-up music (lyrics + chords) extracting all of the chords used;
 * Generates a chord diagrams using HTML5 &lt;canvas&gt; and rewrites the music with
 * standard HTML wrapping the chords.</p>
 *
 * @module ukeGeeks
 * @main ukeGeeks
 */
var ukeGeeks = window.ukeGeeks || {};
;/**
 * Defines chords and provides simple lookup (find) tools.
 * @class definitions
 * @namespace ukeGeeks
 * @static
 * @singleton
 */
ukeGeeks.definitions = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type {Object}
	 */
	var _public = {};

	/**
	 * Array of "user" defined chords, in compactChord format. Use "Add" method.
	 * @property _userChords
	 * @type array
	 * @private
	 */
	var _userChords = [];

	var _chords = [];

	var _instruments = [];

	var _offset = 0;
	var _map = [];

	/**
	 * Enum (simple JSON name/value pairs) defining instrument tunings (offsets from standard Soprano Ukulele)
	 * @property instrument
	 * @type JSON
	 */
	_public.instrument = {
		sopranoUke: 0, // GCEA
		baritoneUke: 5 // DGBA -- Baritone's "A" fingering is the Soprano's "D"
	};

	/* PUBLIC METHODS
	------------------------------------ */
	/**
	 * Define an instrument's chord dictionary, this makes this instrument avaiable for showing its chord diagrams.
	 * @method addInstrument
	 * @param definitions {mixed} (Either string or array of strings) Block of CPM text -- specifically looks for instrurment, tuning, and define statements.
	 * @return {void}
	 */
	_public.addInstrument = function(definitions) {
		if (typeof definitions === 'object') {
			// flatten the array
			definitions = definitions.join("\n");
		}
		_instruments.push(definitions);
	};

	/**
	 * Choose which instrument's chord dictionary you want used for the chord
	 * diagrams. NOTE: .
	 * @method useInstrument
	 * @param offset {int} (optional) default 0. Number of semitones to shif the tuning.
	 * @return {void}
	 */
	_public.useInstrument = function(offset) {
		offset = (arguments.length > 0) ? offset : _public.instrument.sopranoUke;
		_offset = parseInt(offset, 10);
		if (_offset > 0) {
			_map = ukeGeeks.transpose.retune(_offset);
		}
		_public.setChords(ukeGeeks.chordImport.runBlock(_instruments[0]).chords);
	};

	/**
	 * Returns expanded ChordObject for requested "chord"
	 * @method get
	 * @param chordName {string} Chord name
	 * @return {expandedChord}
	 */
	_public.get = function(chordName) {
		var i, c, chrd, name;

		// try User Defined chords first
		for (i = 0; i < _userChords.length; i++) {
			if (chordName == _userChords[i].name) {
				return _userChords[i];
			}
		}
		// next: built-in chords:
		if (_offset < 1) {
			return _get(chordName);
		}

		// user has retuned the chords, need to find chord name "as-is",
		// but get the fingering from the mapping
		name = _getAlias(chordName);
		for (i in _map) {
			if (name == _map[i].original) {
				c = _get(_map[i].transposed);
				if (c) {
					chrd = new ukeGeeks.data.expandedChord(chordName);
					chrd.dots = c.dots;
					chrd.muted = c.muted;
					return chrd;
				}
			}
		}

		return null;
	};

	// local substitions (replacements for identical chord shapes)
	var _aliases = {
		'A#': 'Bb',
		'Db': 'C#',
		'D#': 'Eb',
		'Gb': 'F#',
		'Ab': 'G#'
	};

	/**
	 * A chord name normalizer: We don't store any chord definitions for A#, Db, D#, Gb, or Ab. Instead
	 * definitions of the more common notes are stored instead. So for the A# fingering we return the
	 * Bb fingering and so on.
	 *
	 * Returns original chord name if there is no defined alias.
	 *
	 * @method _getAlias
	 * @param  {string} chordName [
	 * @return {string}
	 */
	var _getAlias = function(chordName) {
		var n = chordName.substr(0, 2);
		return !_aliases[n] ? chordName : _aliases[n] + chordName.substr(2);
	};

	/**
	 * Pass in "standard" chord name, returns match from defined chords or null if not found
	 * @private
	 * @method _get
	 * @param chordName {string} Chord name
	 * @return {expandedChord}
	 */
	var _get = function(chordName) {
		var i, chrd,
			name = _getAlias(chordName);
		for (i = 0; i < _chords.length; i++) {
			if (name == _chords[i].name) {
				chrd = new ukeGeeks.data.expandedChord(chordName);
				chrd.dots = _chords[i].dots;
				chrd.muted = _chords[i].muted;
				return chrd;
			}
		}
		return null;
	};

	/**
	 * @method add
	 * @param data {array} array of expanded chord objects
	 * @return {int}
	 */
	_public.add = function(data) {
		if (data.length) {
			for (var i = 0; i < data.length; i++) {
				_userChords.push(data[i]);
			}
		}
		return _userChords.length;
	};

	/**
	 * @method replace
	 * @param data {array} array of expanded chord objects
	 * @return {int}
	 */
	_public.replace = function(data) {
		_userChords = [];
		return _public.add(data);
	};

	/**
	 * Getter for chord array (compactChord format) -- full library of predefined chords. Mainly used for debugging.
	 * @method getChords
	 * @return {arrayChords}
	 */
	_public.getChords = function() {
		return _chords;
	};

	_public.setChords = function(value) {
		_chords = value;
	};

	return _public;
}());
;/**
 * Customize your installation. This JSON object controls appearance and
 * HTML element names. It's divided into four sections: graphics, ids, layout,
 * and "options".
 *
 * @class settings
 * @namespace ukeGeeks
 * @static
 * @singleton
 */
ukeGeeks.settings = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type {Object}
	 */
	var _public = {};

	/**
	 * Chord Diagram Font styles -- font size, font-weight, font-face stack, etc.
	 * @property fonts
	 * @type JSON Object
	 */
	_public.fonts = {
		dot: '9pt Arial Black,Arial',
		text: 'bold 14pt Arial',
		fret: 'bold 13pt Arial'
	};

	/**
	 * Chord Diagram Colors for fretboard's grid lines and text. Don't use shorthand (i.e. "#0ff")
	 * as this might cause a problem with IE canvas.
	 * @property colors
	 * @type JSON Object
	 */
	_public.colors = {
		fretLines: '#003366',
		dots: '#ff0000',
		dotText: '#ffffff',
		text: '#000000',
		fretText: '#4a4a4a',
		// a muted string's 'X' stroke color
		xStroke: '#444444'
	};

	/* Standard Fretbox Options, these properties documented individually */
	_public.fretBox = {
		/**
		 * True if chord name and finger "number" are to be drawn on canvas.
		 * By default normal chord diagrams have text (TRUE) whereas inlineDiagrams
		 * (i.e. chord diagrams shown above lyrics) do NOT as they are too small
		 * (thus inlineFretbox.showText is FALSE)
		 * @property fretBox.showText
		 * @type bool
		 */
		showText: true,
		/**
		 * Chord Box's Bounding height
		 * @property fretBox.height
		 * @type int
		 */
		height: 150,
		/**
		 * Chord Box's Bounding width
		 * @property fretBox.width
		 * @type int
		 */
		width: 100,
		/**
		 * Row Height -- vertical height between frets (pixels)
		 * @property fretBox.fretSpace
		 * @type int
		 */
		fretSpace: 20,
		/**
		 * String Spacing -- horizontal distance between strings (pixels)
		 * @property fretBox.stringSpace
		 * @type int
		 */
		stringSpace: 20,
		/**
		 * Dot (finger position) radius in pixels
		 * @property fretBox.dotRadius
		 * @type int
		 */
		dotRadius: 8,
		/**
		 * Fretboard line width in pixels
		 * @property fretBox.lineWidth
		 * @type decimal
		 */
		lineWidth: 1.6,
		/**
		 * top-left position -- the offset for chord box. Doing this programatically
		 * had "issues", decided to make this adjustment manual.
		 * @property fretBox.topLeftPos
		 * @type JSON
		 */
		topLeftPos: {
			x: 22,
			y: 25
		},
		/**
		 * muted string "X" width of the 'X' crossbars. Recommend this be about 0.5 to 0.9 relative to stringSpace.
		 * @property fretBox.xWidth
		 * @type decimal
		 */
		xWidth: 0.45 * 20,
		/**
		 * muted string "X" stroke thickness. Recommend this be about 1.3 to 2.1 relative to lineWidth
		 * @property fretBox.xStroke
		 * @type decimal
		 */
		xStroke: 1.6 * 1.6
	};

	/**
	 * Layout of Chord Digrams when inlineFredBoxes are being used. Identical in
	 * structure to "fretBox". See fretBox for properties.
	 * @property layout
	 * @type JSON Object
	 */
	_public.inlineFretBox = {
		showText: false,
		height: 50,
		width: 40,
		fretSpace: 9,
		stringSpace: 7,
		dotRadius: 3,
		lineWidth: 1,
		topLeftPos: {
			x: 10,
			y: 2
		},
		xWidth: 0.7 * 7,
		xStroke: 1.4 * 1,
		fonts: {
			dot: '8pt Arial',
			text: '8pt Arial',
			fret: '8pt Arial'
		}
	};

	/**
	 * ID's of key HTML page elements
	 * @property ids
	 * @type JSON Object
	 */
	_public.ids = {
		songText: 'ukeSongText', // element holding the song's text
		canvas: 'ukeChordsCanvas', // canvas
		container: 'ukeSongContainer' // wraps BOTH Song Text and Chord Canvas
	};

	/**
	 * CSS Class names used to find page elements-- be careful if renaming!
	 * @property wrapClasses
	 * @type JSON Object
	 */
	_public.wrapClasses = {
		wrap: 'ugs-song-wrap', // wraps BOTH Song Text and Chord Canvas
		diagrams: 'ugs-diagrams-wrap', // canvas
		text: 'ugs-source-wrap' // element holding the song's text
	};

	/**
	 * Options (Features) you can turn on or off
	 * @property opts
	 * @type JSON Object
	 */
	_public.opts = {
		columnsEnabled: true,
		/**
		 * the [ and ] surrounding chord names often looks bad in print (usually only good when inline)
		 * set true to keep then, false to get rid of the buggers.
		 * @property opts.retainBrackets
		 * @type Boolean
		 */
		retainBrackets: false,
		/**
		 * if TRUE chords in the "commonChords" list will be ignored (excluded) from having thier
		 * master chord diagram drawn
		 * @property opts.ignoreCommonChords
		 * @type Boolean
		 */
		ignoreCommonChords: false,
		/**
		 * If true chord reference diagrams are sorted alphabetically, otherwise chords are shown in the
		 * order in which they appear within the song.
		 * @property opts.sortAlphabetical
		 * @type Boolean
		 */
		sortAlphabetical: false,
		/**
		 * if TRUE chords that overlap each other (in the music area) will have their spacing adjuste
		 * to prevent overlapping.
		 * @property opts.autoFixOverlaps
		 * @type Boolean
		 */
		autoFixOverlaps: true
	};

	/**
	 * If TRUE the Chord Digram is drawn ABOVE lyrics
	 * @property inlineDiagrams
	 * @type Bool
	 */
	_public.inlineDiagrams = false;

	/**
	 * Number of frets to draw. Default is 5 (as this is as wide as my hand can go and
	 * I've never seen a chord diagram requiring more than this. But ya never know.
	 * @property numFrets
	 * @type int
	 */
	_public.numFrets = 5;

	/**
	 * Array of string names, changes between baritone and soprano
	 * @property tuning
	 * @type string Array
	 */
	_public.tuning = ['G', 'C', 'E', 'A'];

	/**
	 * The initial tuning when page first loads, used in scriptasaurus.init.
	 * @property defaultInstrument
	 * @type {enum_int}
	 */
	_public.defaultInstrument = ukeGeeks.definitions.instrument.sopranoUke;

	/**
	 * TODO: Clean-up Tab Options!!
	 * @property tabs
	 * @type JSON Object
	 */
	_public.tabs = {
		lineSpacing: 16, // pixels between lines (or strings)
		noteSpacing: 14, // pixels between finger dots
		lineWidth: 1, // pixels
		lineColor: '#999999', // hex
		labelWidth: 12, // pixels, how much room to allow for string names, eg, "G" or "A"
		labelFont: '10pt Arial, Helvetica, Verdana, Geneva, sans-serif',
		dotColor: '#eaeaea', // hex
		dotRadius: 10, // pixels, finger dot's radius
		textFont: 'bold 12pt Arial, Helvetica, Verdana, Geneva, sans-serif',
		textColor: '#000000',
		bottomPadding: 10 // extra blank space added to bottom of diagram
	};

	// Info about runtime environment. Not really a setting.
	_public.environment = {
		/**
		 * set in scriptasaurus. True if UserAgent is Internet Explorer
		 * @property environment.isIe
		 * @type bool
		 */
		isIe: false
	};

	/**
	 * List of common chords to be "ignored" (won't show master chord diagrams)
	 * @property commonChords
	 * @type string Array
	 */
	_public.commonChords = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'Am'];

	/**
	 * TODO: determine minimum value... 1?
	 * @method _scaleNode
	 * @private
	 * @param node {datatype} Description
	 * @param mulitplier {int} see scale method's parameter
	 * @return mixed
	 */
	var _scaleNode = function(node, mulitplier) {
		if (typeof(node) == 'number') {
			return node * mulitplier;
		}
		else if (typeof(node) == 'object') {
			for (var i in node) {
				node[i] = _scaleNode(node[i], mulitplier);
			}
			return node;
		}
		return node;
	};

	var _sizeRe = /\b(\d+)(pt|px)\b/;

	/**
	 * TODO: determine minimum font size... 5pt/px?
	 * @method _scaleFont
	 * @private
	 * @param font {string} Description
	 * @param mulitplier {int} see scale method's parameter
	 * @return {void}
	 */
	var _scaleFont = function(font, mulitplier) {
		var bits = font.match(_sizeRe);
		if (bits.length < 2) {
			return font;
		}
		var size = parseInt(bits[1], 10) * mulitplier;
		return font.replace(_sizeRe, size + bits[2]);
	};

	/**
	 * Scales the standard chord diagram's dimensions and font sizes by multiplying
	 * all falues by passed in value. Note: this is currently a destructive change: no
	 * backup of original values is retained.
	 * @method scale
	 * @param mulitplier {int}
	 * @return {void}
	 */
	_public.scale = function(mulitplier) {
		if (mulitplier == 1.0) {
			return;
		}

		for (var i in this.fonts) {
			this.fonts[i] = _scaleFont(this.fonts[i], mulitplier);
		}

		// Note getting x/y scaled.
		this.fretBox = _scaleNode(this.fretBox, mulitplier);
	};

	/* return our public interface
	 */
	return _public;
}());
;/**
 * A container or Models library. ukegeeks.data is really a "Models" namespace. Please refactor.
 * @class data
 * @namespace ukeGeeks
 * @singleton
 */
ukeGeeks.data = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type {Object}
	 */
	var _public = {};

	/**
	 * Chord info sutiable for plotting on Canvas; has name and dot positions
	 * @class expandedChord
	 * @constructor
	 * @for ukeGeeks.data
	 * @namespace ukeGeeks.data
	 */
	_public.expandedChord = function(name) {
		/**
		 * string, i.e. 'C#6'
		 * @property name
		 * @type string
		 * @for ukeGeeks.data.expandedChord
		 */
		this.name = name;
		/**
		 * Array of data.dot objects
		 * @property dots
		 * @type array
		 */
		this.dots = [];
		/**
		 * Array of bools, true means that string is not played (muted). i.e. chord.mute[2] means third string is muted.
		 * @property mute
		 * @type array
		 */
		this.muted = [];
	};

	/**
	 * Song object holds all meta info (Title, Subtitles) plus an array of plot
	 * @class song
	 * @constructor
	 * @for ukeGeeks.data
	 * @namespace ukeGeeks.data
	 */
	_public.song = function() {
		/**
		 * Song Title
		 * @property title
		 * @type string
		 * @for ukeGeeks.data.song
		 */
		this.title = '';
		/**
		 * Album
		 * @property album
		 * @type string
		 */
		this.album = '';
		/**
		 * Artist Info
		 * @property artist
		 * @type string
		 */
		this.artist = '';
		/**
		 * Subtitle, often Artist Info
		 * @property st
		 * @type string
		 */
		this.st = '';
		/**
		 * Subtitle Number 2, subtitle2 (not used yet)
		 * @property st2
		 * @type string
		 */
		this.st2 = '';
		/**
		 * Song's Key ('A', 'C', etc)
		 * @property key
		 * @type string
		 */
		this.key = '';
		/**
		 *
		 * @property body
		 * @type string
		 */
		this.body = '';
		/**
		 * True if there is at least one chord in use, false otherwise. Useful for laying out tablature, which might have no chords.
		 * @property hasChords
		 * @type bool
		 */
		this.hasChords = false;

		this.ugsMeta = [];
		/**
		 * array of data.dots
		 * @property defs
		 * @type array
		 */
		this.defs = [];

		/**
		 * array of chord names found in current song
		 * @property chords
		 * @type array(strings)
		 */
		this.chords = [];
	};

	/**
	 * A single fretboard fingering "dot" -- the position on the Canvas object that a dot should occupy.
	 * @class dot
	 * @constructor
	 * @for ukeGeeks.data
	 * @namespace ukeGeeks.data
	 */
	_public.dot = function(string, fret, finger) {
		/**
		 * The ukulele's string, numbered from "top" (1) to "bottom" (4). Sporano uke strings would be ['G' => 1,'C' => 2,'E' => 3,'A' => 4]
		 * @property string
		 * @type int
		 * @for ukeGeeks.data.dot
		 */
		this.string = string;
		/**
		 * Fret position, i.e. 0-12
		 * @property fret
		 * @type int
		 */
		this.fret = fret;
		/**
		 * Your finger, 0-4
		 * @property finger
		 * @type int
		 */
		this.finger = finger;
	};

	/**
	 * @class instrument
	 * @constructor
	 * @param  {string} key
	 * @param  {string} name
	 * @param  {string} tuning
	 * @param  {array} chords
	 */
	_public.instrument = function(key, name, tuning, chords) {
		this.key = key;
		this.name = name;
		this.tuning = tuning;
		this.chords = chords;
	};

	_public.htmlHandles = function(wrap, diagrams, text) {
		this.wrap = wrap;
		this.diagrams = diagrams;
		this.text = text;
	};

	// -----------------------------------------------------------------------------------------
	// *** DOCUMENTAION ONLY ***
	// -----------------------------------------------------------------------------------------
	/**
	 * Documentation Only (no JS Definition)
	 * <br />
	 * <br />The JSON format used for add-in fingerings. Frequently you'll add this to indicate
	 * "nutting" or "barring" with one or more fingers.
	 * <br />
	 * <br />For example, the D7 is often played by laying the index finger across the entire
	 * second fret and then placing middle finger on 3rd fret of "A" string like this:
	&gt;pre&lt;
		G C E A
		- - - -  (1st fret)
		X X X X
		- - - X
		- - - -  (4th fret)
	</pre>
	 * The "A" string has two fingers on it, obviously one does nothing -- except to make the
	 * chord much easier to play.
	 *
	 * @class addInFinger
	 * @constructor
	 * @for ukeGeeks.data
	 * @namespace ukeGeeks.data
	 */
	/**
	 * ex: 'G'
	 * @property string
	 * @type char
	 * @for ukeGeeks.data.addInFinger
	 */
	/**
	 * ex: 0-12
	 * @property fret
	 * @type int
	 * @for ukeGeeks.data.addInFinger
	 */
	/**
	 * ex: 0-4 (where 1 = index finger and 4 = pinky)
	 * @property  finger
	 * @type int
	 * @for ukeGeeks.data.addInFinger
	 */

	return _public;

}());
;/**
 * some jQuery-like tools (very, very crappy. wish we could count on jQuery being on the page.)
 * if you do want to use jQuery (and why wouldn't you) I'm not offended if you yank this out.
 * @class toolsLite
 * @namespace ukeGeeks
 * @singleton
 */
ukeGeeks.toolsLite = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type {Object}
	 */
	var _public = {};

	var regEx = {
		dbleSpace: /\s{2,}/g,
		trim: /^\s+|\s+$/g
	};

	/**
	 * adds className to element.
	 * @method addClass
	 * @param element {DOM_element} target element
	 * @param className {string} CSS classname to add
	 * @return {void}
	 */
	_public.addClass = function(element, className) {
		if (!_public.hasClass(element, className)) {
			element.className += ' ' + className;
		}
	};

	_public.hasClass = function(element, className) {
		return element.className.match(getRegEx(className));
	};

	_public.removeClass = function(element, className) {
		if (_public.hasClass(element, className)) {
			var reg = getRegEx(className);
			element.className = element.className.replace(reg, ' ');
		}
	};

	_public.setClass = function(element, className, isActive) {
		if (isActive) {
			_public.addClass(element, className);
		}
		else {
			_public.removeClass(element, className);
		}
	};

	var getRegEx = function(className) {
		return new RegExp('(\\s|^)' + className + '(\\s|$)');
	};

	/**
	 * Removes all white space at the begining and end of a string.
	 * @method trim
	 * @param str {String} String to trim.
	 * @return {String} Returns string without leading and following white space characters.
	 */
	_public.trim = function(str) {
		return str.replace(regEx.trim, '');
	};

	_public.pack = function(value) {
		return value.replace(regEx.dbleSpace, ' ').replace(regEx.trim, '');
	};

	/**
	 * Searches within Node for tags with specified CSS class.
	 * @method getElementsByClass
	 * @param searchClass {string}  CSS Classname
	 * @param node {HtmlNode} parent node to begin search within. Defaults to entire document.
	 * @param tag {string} restrict search to a specific tag name. defaults to all tags.
	 * @return {arrayDomElements}
	 */
	_public.getElementsByClass = function(searchClass, node, tag) {
		var i, j;
		// use falsey -- if ((node === null) || (node === undefined)) {
		if (!node) {
			node = document;
		}
		if (node.getElementsByClassName) {
			return node.getElementsByClassName(searchClass);
		}

		var classElements = [];
		if (!tag) {
			tag = '*';
		}
		var els = node.getElementsByTagName(tag);
		var elsLen = els.length;
		var pattern = new RegExp("(^|\\s)" + searchClass + "(\\s|$)");
		for (i = 0, j = 0; i < elsLen; i++) {
			if (pattern.test(els[i].className)) {
				classElements[j] = els[i];
				j++;
			}
		}
		return classElements;
	};

	return _public;

}());
;/**
 * Converts text to JSON objects. Accetps either large text blocks or single lines of
 * text written in CPM syntax (looks for instrument, tuning, and define statements).
 * @class chordImport
 * @namespace ukeGeeks
 * @singleton
 */
ukeGeeks.chordImport = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type {Object}
	 */
	var _public = {};

	/**
	 * Internal storage of partially converted "define" statements. The Definition (string) and addIn (array<strings>)
	 * @class chordImport.chordParts
	 * @constructor
	 * @type ClassDefinition
	 * @private
	 */
	var chordParts = function(definition, addIns) {
		this.define = definition;
		this.adds = addIns;
	};

	/**
	 * All regular expressions used in this class. Note, Changed parsing from "\n" to "{" which means "define: ..." cannot depend on that opening curly-brace!
	 * @property regEx
	 * @type JSON Object of Regular Expressions
	 * @private
	 */
	var regEx = {
		// first pass filters
		define: /\s*{?define\s*:(.*?)(}|add:)/i,
		add: /(add:.*?)(}|add:)/i,
		// chord building filters
		name: /(\S+)\s+/,
		frets: /\s+frets\s+([\dx]{4}|(([\dx]{1,2}\s){3})[\dx]{1,2})/i,
		fingers: /\s+fingers\s+((\d\s+){3}\d|\d{4})/i,
		muted: /\s+mute\s+(\d\s){0,3}\d?/i,
		// TODO: ignores "base-fret 1"
		// filter "add-in" chord fingers
		addin: /add:\s*string\s*(\S+)\s+fret\s+(\d+)\sfinger\s(\d)/i,
		// extra commands
		instr: /{\s*instrument\s*:\s*(.*?)\s*}/i,
		tuning: /{\s*tuning\s*:\s*(\S+)\s+(\S+)\s+(\S+)\s+(\S+)\s*}/i,
		// single digit numbers
		//num: /(\d)/g,
		numOrX: /(\d{1,2}|x)/gi,
		any: /(.)/g
	};

	/**
	 * TODO:
	 * @method _lineToParts
	 * @private
	 * @param line {string} Single line (string with one statment)
	 * @return {array<chordParts>}
	 */
	var _lineToParts = function(line) {
		var s = ukeGeeks.toolsLite.pack(line);
		if (s.length > 1 && s[0] != '#') {
			var m = s.match(regEx.define);
			if (m && m.length > 1) {
				return new chordParts(m[1], _getAddIns(s));
			}
		}
		return null;
	};

	/**
	 * TODO:
	 * @method _textToParts
	 * @private
	 * @param line {array<string>} Array of lines (stings) each wtih one statment
	 * @return {void}
	 */
	var _textToParts = function(lines) {
		var p = [];
		for (var i in lines) {
			var c = _lineToParts(lines[i]);
			if (c) {
				p.push(c);
			}
		}
		return p;
	};

	/**
	 * TODO:
	 * @method _getAddIns
	 * @private
	 * @param txt {string}
	 * @return {void}
	 */
	var _getAddIns = function(txt) {
		var finds = [];
		var m = txt.match(regEx.add);
		while (m && m.length > 1) {
			finds.push(m[1]);
			txt = txt.replace(m[1], '');
			m = txt.match(regEx.add);
		}
		return finds;
	};

	/**
	 * TODO:
	 * @method _getInstrument
	 * @private
	 * @param text {string} Single statement to be searched
	 * @return {string}
	 */
	var _getInstrument = function(text) {
		var c = text.match(regEx.instr);
		return !c ? null : ukeGeeks.toolsLite.pack(c[1]);
	};

	/**
	 * TODO: expects FOUR strings.
	 * @method _getTuning
	 * @private
	 * @param text {string} Single statement to be searched
	 * @return {string}
	 */
	var _getTuning = function(text) {
		var c = text.match(regEx.tuning);
		return !c ? null : [c[1], c[2], c[3], c[4]];
	};

	/**
	 * TODO:
	 * @method _getName
	 * @private
	 * @param text {string} Single statement to be searched
	 * @return {string}
	 */
	var _getName = function(text) {
		var c = text.match(regEx.name);
		return !c ? null : c[1];
	};

	/**
	 * TODO:
	 * @method _getKey
	 * @private
	 * @param name {string}
	 * @param tuning {array<string>}
	 * @return {string}
	 */
	var _getKey = function(name, tuning) {
		var s = name.replace(' ', '-');
		for (var i in tuning) {
			s += '-' + tuning[i];
		}
		return s.toLowerCase();
	};

	/**
	 * TODO: Change will affect "packed" chord fingers -- spaces required. No longer accepts "frets 1231", it must be "frets 1 2 3 1"
	 * Replaces _getFrets. Sets frets and muted arrays.
	 * @method _fretOMatic
	 * @private
	 * @param text {string} string to be searched
	 * @param frets {array<int>}
	 * @param muted {array<bool>}
	 * @return {void}
	 */
	var _fretOMatic = function(text, frets, muted) {
		var f = text.match(regEx.frets);
		if (!f) {
			return;
		}
		var m = (f[1].length == 4) ? f[1].match(regEx.any) : f[1].match(regEx.numOrX);
		for (var i = 0; i < m.length; i++) {
			var isX = m[i] == 'x' || m[i] == 'X';
			frets[i] = isX ? 0 : parseInt(m[i], 10);
			muted[i] = isX;
		}
	};

	/**
	 * TODO:
	 * @method _getFingers
	 * @private
	 * @param text {string} string to be searched
	 * @return {array<string>}
	 */
	var _getFingers = function(text) {
		var f = text.match(regEx.fingers);
		if (!f) {
			return [];
		}
		var x = f[1];
		if (x.length == 4) {
			x = x.replace(regEx.any, '$1 ');
		}
		return x.split(' ');
	};

	/**
	 * Pass in integer arrays, frets is list of frets, plus corresponding fingers array
	 * @method _toDots
	 * @private
	 * @param frets {array}
	 * @param fingers {array}
	 * @return {array<ukeGeeks.data.dot>} array of dots
	 */
	var _toDots = function(frets, fingers) {
		var dots = [];
		var tuning = ukeGeeks.settings.tuning;
		for (var j = 0; j < tuning.length; j++) {
			var n = parseInt(frets[j], 10);
			if (n > 0) {
				dots.push(new ukeGeeks.data.dot(j, n, (fingers.length - 1 >= j) ? parseInt(fingers[j], 10) : 0));
			}
		}
		return dots;
	};

	/**
	 * If a valid "add" instruction is present pushes a new dot object into dots array.
	 * @method _addInDots
	 * @private
	 * @param dots {array<ukeGeeks.data.dot>}
	 * @param adds {array<string>} array of "add instruction" to be parsed (i.e. "add: string G fret 1 finger 1")
	 * @return {void}
	 */
	var _addInDots = function(dots, adds) {
		if (!adds || adds.length < 1) {
			return;
		}
		for (var i in adds) {
			var a = adds[i].match(regEx.addin);
			if (a && a.length > 2) {
				dots.push(new ukeGeeks.data.dot(parseInt(a[1], 10) - 1, parseInt(a[2], 10), parseInt(a[3], 10)));
			}
		}
	};

	/**
	 * TODO:
	 * @method _getExpandedChord
	 * @private
	 * @param text {type}
	 * @param adds {type}
	 * @return {void}
	 */
	var _getExpandedChord = function(text, adds) {
		var frets = [];
		var muted = [];
		_fretOMatic(text, frets, muted);

		var name = _getName(text);
		var fingers = _getFingers(text);

		if (name === null || name == 'frets') {
			_log('bad "define" instruction: chord name not found: ' + text);
			return null;
		}
		if (frets === null) {
			_log('bad "define" instruction: frets not found: ' + text);
			return null;
		}
		var chrd = new ukeGeeks.data.expandedChord(name);
		// chrd.name = name;
		var dots = _toDots(frets, fingers);
		_addInDots(dots, adds);
		chrd.dots = dots;
		chrd.muted = muted;
		return chrd;
	};

	/**
	 * TODO:
	 * @method _partsToChords
	 * @private
	 * @param parts {type}
	 * @return {void}
	 */
	var _partsToChords = function(parts) {
		var c = [];
		var x = null;
		for (var i in parts) {
			x = _getExpandedChord(parts[i].define, parts[i].adds);
			if (x) {
				c.push(x);
			}
		}
		return c;
	};


	/**
	 * Add an error. As one would with console.log("blah").
	 * @private
	 * @method _log
	 * @param msg {string} Error message to be added
	 * @return {void}
	 */
	var _log = function(msg) {
		_errs.push(msg);
	};

	var _errs = [];

	var _echoLog = function() {
		for (var i in _errs) {
			console.log(i + '. ' + _errs[i]);
		}
	};

	/**
	 * Returns an expandedChord object (JSON) converted from single statement text input line.
	 * @method runLine
	 * @param line {string} Single line (string with one statment)
	 * @return {ukeGeeks.data.expandedChord}
	 */
	_public.runLine = function(line) {
		var c = _lineToParts(line);
		return !c ? null : _getExpandedChord(c.define, c.adds);
	};

	/**
	 * Returns array of expandedChord objects (JSON), converted from text input.
	 * @method runBlock
	 * @param text {string} Multiline text block containing definition, instrument, and tuning statements.
	 * @return {ukeGeeks.data.instrument}
	 */
	_public.runBlock = function(text) {
		//TODO: newlines get lost in strings, do I always rely on "{"?
		var linesAry = text.split('\n');
		if (linesAry.length < 2) {
			linesAry = text.split('{');
		}
		var parts = _textToParts(linesAry);
		var name = _getInstrument(text);
		var tuning = _getTuning(text);
		return new ukeGeeks.data.instrument(
			_getKey(name, tuning), // key
			name, // name
			tuning, // tuning
			_partsToChords(parts) // chords
		);
	};

	return _public;

}());
;/**
 * Can shift a single chord or list of chords up/down by a series of steps. Hangles
 * finding equivalent chord names (i.e. A# is same as Bb)
 *
 * @class transpose
 * @namespace ukeGeeks
 * @static
 * @singleton
 */
ukeGeeks.transpose = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type {Object}
	 */
	var _public = {};

	var re = /^([A-G][#b]?)(.*)/;
	var tones = {
		'A': 0,
		'A#': 1,
		'Bb': 1,
		'B': 2,
		'C': 3,
		'C#': 4,
		'Db': 4,
		'D': 5,
		'D#': 6,
		'Eb': 6,
		'E': 7,
		'F': 8,
		'F#': 9,
		'Gb': 9,
		'G': 10,
		'G#': 11,
		'Ab': 11
	};

	/**
	 * Pass in a chord name returns new chord name for the original chord shifted by "steps" semitones.
	 * @method shift
	 * @param name (string) chord name, should be in chord dictionary
	 * @param steps (int) number of semitones to transpose
	 * @return string
	 */
	_public.shift = function(name, steps) {
		var t = getTone(name);
		if (t === null) {
			return null;
		}
		var tone = (t.tone + steps) % 12;
		// TODO: negative steps are allowed!!!
		if (tone < 0) {
			tone = tone + 12;
		}
		for (var key in tones) {
			if (tone == tones[key]) {
				return key + t.suffix;
			}
		}
		return null;
	};

	/**
	 * Returns object with name (A - G with flat/sharp), integer value (0 - 11), and its "suffix" (minor, 7th, etc)
	 * @method getTone
	 * @param name (string)
	 * @return JSON
	 */
	var getTone = function(name) {
		var m = name.match(re);
		if (!m || m.length < 1) {
			return null;
		}
		return {
			tone: parseInt(tones[m[1]], 10),
			prefix: m[1],
			suffix: m[2]
		};
	};

	/**
	 * Returns a mapping -- an array of JSON with "original" chord name and "transposed" chord names.
	 * @method retune
	 * @param offset (int) optional
	 * @return {array}
	 */
	_public.retune = function() {
		var offset = (arguments.length > 0) ? arguments[0] : 0;
		var chords = ukeGeeks.definitions.getChords();
		var s = [];
		if (offset === 0) {
			for (var i in chords) {
				s.push({
					original: chords[i].name,
					transposed: chords[i].name
				});
			}
		}
		else {
			for (var z in chords) {
				s.push({
					original: chords[z].name,
					transposed: _public.shift(chords[z].name, offset)
				});
			}
		}
		return s;
	};

	/**
	 * returns copy of input string array shifted by number of steps
	 * @method shiftChords
	 * @param  array<strings> chords chord names to be shifted
	 * @param  int steps  number of semitone steps (up or down)
	 * @return array<strings>
	 */
	_public.shiftChords = function(chords, steps) {
		var newChords = [];
		for (var i = 0; i < chords.length; i++) {
			newChords.push(_public.shift(chords[i], steps));
		}
		return newChords;
	};

	// ---------------------------------------
	// return public interface
	// ---------------------------------------
	return _public;

}());
;// -------------------------------------------------------
// Scriptasaurus preloads Soprano Uke chord dictionary.
// Unusual array joined to make multi-lined super string
// being used to avoid JsLint warnings about JS string
// continuation character: \
// -------------------------------------------------------
ukeGeeks.definitions.sopranoUkuleleGcea = [
	// Required: Instruement Name and Tuning (string names)
	// -------------------------------------------------------
	'{instrument: Soprano Ukulele}',
	'{tuning: G C E A}',
	//  Ab returns G#
	//  A
	// -------------------------------------------------------
	'{define: A frets 2 1 0 0 fingers 1 2 0 0}',
	'{define: Am frets 2 0 0 0 fingers 1 0 0 0}',
	'{define: A7 frets 0 1 0 0 fingers 0 1 0 0}',
	'{define: A7sus4 frets 0 2 0 0 fingers 0 2 0 0}',
	'{define: Am7 frets 0 0 0 0}',
	'{define: Adim frets 2 3 2 3 fingers 1 3 2 4}',
	'{define: Amaj7 frets 1 1 0 0 fingers 1 2 0 0}',
	'{define: A6 frets 2 4 2 4 fingers 1 3 2 4}',
	'{define: Asus2 frets 2 4 5 2 fingers 2 3 4 1}',
	'{define: Asus4 frets 2 2 0 0 fingers 1 2 0 0}',
	'{define: Aaug frets 2 1 1 4 fingers 2 1 1 4 add: string 1 fret 1 finger 1 add: string 4 fret 1 finger 1}',
	'{define: Am6 frets 2 4 2 3 fingers 1 3 1 2 add: string 2 fret 2 finger 1}',
	'{define: A9 frets 0 1 0 2 fingers 0 1 0 2}',
	//  A# retruns Bb
	//  Bb
	// -------------------------------------------------------
	'{define: Bb frets 3 2 1 1 fingers 3 2 1 1}',
	'{define: Bbm frets 3 1 1 1 fingers 3 1 1 1 add: string 1 fret 1 finger 1}',
	'{define: Bb7 frets 1 2 1 1 fingers 1 2 1 1 add: string 2 fret 1 finger 1}',
	'{define: Bb7sus4 frets 1 3 1 1 fingers 1 3 1 1 add: string 2 fret 1 finger 1}',
	'{define: Bbm7 frets 1 1 1 1 fingers 1 1 1 1}',
	'{define: Bbdim frets 0 1 0 1 fingers 0 1 0 2}',
	'{define: Bbmaj7 frets 2 2 1 1 fingers 2 2 1 1}',
	'{define: Bb6 frets 0 2 1 1 fingers 0 2 1 1}',
	'{define: Bbm6 frets 0 1 1 1 fingers 0 1 1 1}',
	'{define: Bbsus2 frets 3 0 1 1 fingers 3 0 1 1}',
	'{define: Bbsus4 frets 3 3 1 1 fingers 3 3 1 1}',
	'{define: Bbaug frets 3 2 2 5 fingers 2 1 1 4 add: string 1 fret 2 finger 1 add: string 4 fret 2 finger 1}',
	'{define: Bb9 frets 1 2 1 3 fingers 2 1 4 3}',
	'{define: Bbmaj7 frets 2 2 1 1 fingers 2 2 1 1}',
	'{define: Bbm7-5 frets 1 1 0 1 fingers 1 2 0 3}',
	//  B
	// -------------------------------------------------------
	'{define: B frets 4 3 2 2 fingers 3 2 1 1}',
	'{define: Bm frets 4 2 2 2 fingers 3 1 1 1 add: string 1 fret 2 finger 1}',
	'{define: Bm6 frets 1 2 2 2 fingers 1 2 3 4}',
	'{define: B7 frets 2 3 2 2 fingers 1 2 1 1 add: string 2 fret 2 finger 1}',
	'{define: B7sus4 frets 2 4 2 2 fingers 1 3 1 1 add: string 2 fret 2 finger 1}',
	'{define: Bm7 frets 2 2 2 2 fingers 1 1 1 1}',
	'{define: Bdim frets 1 2 1 2 fingers 1 3 2 4}',
	'{define: Bmaj7 frets 3 3 2 2 fingers 2 2 1 1}',
	'{define: B6 frets 1 3 2 2 fingers 1 4 2 3}',
	'{define: Bsus2 frets 5 1 2 2 fingers 4 1 3 2}',
	'{define: Bsus4 frets 4 4 2 2 fingers 2 2 1 1}',
	'{define: Baug frets 0 3 3 2 fingers 0 2 2 1}',
	'{define: B9 frets 2 3 2 4}',
	//  C
	// -------------------------------------------------------
	'{define: C frets 0 0 0 3 fingers 0 0 0 3}',
	'{define: Cm frets 0 3 3 3 fingers 0 1 2 3}',
	'{define: C7 frets 0 0 0 1 fingers 0 0 0 1}',
	'{define: C7sus4 frets 0 0 1 1 fingers 0 0 1 1}',
	'{define: Cm7 frets 3 3 3 3 fingers 1 1 1 1}',
	'{define: Cdim frets 2 3 2 3 fingers 1 3 2 4}',
	'{define: Cmaj7 frets 0 0 0 2 fingers 0 0 0 1}',
	'{define: C6 frets 0 0 0 0}',
	'{define: Cm6 frets 0 3 5 5 fingers 0 1 3 1}',
	'{define: Csus2 frets 0 2 3 3 fingers 0 1 2 2}',
	'{define: Csus4 frets 0 0 1 3 fingers 0 0 1 3}',
	'{define: Caug frets 1 0 0 3 fingers 1 0 0 4}',
	'{define: C9 frets 0 2 0 1 fingers 0 2 0 1}',
	//  C#
	// -------------------------------------------------------
	'{define: C# frets 1 1 1 4 fingers 1 1 1 4 add: string 4 fret 1 finger 1}',
	'{define: C#m frets 1 4 4 4 fingers 1 2 3 3}',
	'{define: C#7 frets 1 1 1 2 fingers 1 1 1 2 add: string 4 fret 1 finger 1}',
	'{define: C#7sus4 frets 1 1 2 2 fingers 1 1 2 3}',
	'{define: C#m7 frets 1 4 4 2 fingers 1 3 3 2}',
	'{define: C#dim frets 0 1 0 1 fingers 0 1 0 2}',
	'{define: C#maj7 frets 1 1 1 3 fingers 1 1 1 3 add: string 4 fret 1 finger 1}',
	'{define: C#6 frets 1 1 1 1 fingers 1 1 1 1}',
	'{define: C#m6 frets 1 1 0 1 fingers 1 2 0 3}',
	'{define: C#sus2 frets 1 3 4 4 fingers 1 2 3 3}',
	'{define: C#sus4 frets 1 1 2 4 fingers 1 1 2 4}',
	'{define: C#aug frets 2 1 1 4 fingers 2 1 1 4 add: string 1 fret 1 finger 1 add: string 4 fret 1 finger 1}',
	'{define: C#9 frets 1 3 1 2}',
	//  Db returns C#
	//  D
	// -------------------------------------------------------
	'{define: D frets 2 2 2 0 fingers 1 1 1 0}',
	'{define: Dm frets 2 2 1 0 fingers 2 2 1 0}',
	'{define: Dm6 frets 0 2 1 2 fingers 0 2 1 3}',
	'{define: D7 frets 2 2 2 3 fingers 1 1 1 2 add: string 4 fret 2 finger 1}',
	'{define: D7sus4 frets 2 2 3 3 fingers 1 1 2 3}',
	'{define: Dm7 frets 2 2 1 3 fingers 2 2 1 3}',
	'{define: Ddim frets 1 2 1 2 fingers 1 3 2 4}',
	'{define: Dmaj7 frets 2 2 2 4 fingers 1 1 1 2 add: string 4 fret 2 finger 1}',
	'{define: D6 frets 2 2 2 2 fingers 2 2 2 2}',
	'{define: Dsus2 frets 2 2 0 0 fingers 1 2 0 0}',
	'{define: Dsus4 frets 0 2 3 0 fingers 0 1 2 0}',
	'{define: Daug frets 3 2 2 5 fingers 2 1 1 4 add: string 1 fret 2 finger 1 add: string 4 fret 2 finger 1}',
	'{define: D9 frets 2 4 2 3}',
	//  D# returns Eb
	//  Eb
	// -------------------------------------------------------
	'{define: Eb frets 0 3 3 1 fingers 0 2 2 1}',
	'{define: Ebm frets 3 3 2 1 fingers 3 3 2 1}',
	'{define: Eb7 frets 3 3 3 4 fingers 1 1 1 2 add: string 4 fret 3 finger 1}',
	'{define: Eb7sus4 frets 3 3 4 4 fingers 1 1 2 3}',
	'{define: Ebm7 frets 3 3 2 4 fingers 2 2 1 4}',
	'{define: Ebdim frets 2 3 2 3 fingers 1 3 2 4}',
	'{define: Ebmaj7 frets 3 3 3 5 fingers 1 1 1 2 add: string 4 fret 3 finger 1}',
	'{define: Eb6 frets 3 3 3 3 fingers 1 1 1 1}',
	'{define: Ebm6 frets 3 3 2 3 fingers 2 3 1 4}',
	'{define: Ebsus2 frets 3 3 1 1 fingers 2 2 1 1}',
	'{define: Ebsus4 frets 1 3 4 1 fingers 2 3 4 1}',
	'{define: Ebaug frets 0 3 3 2 fingers 0 2 2 1}',
	'{define: Eb9 frets 0 1 1 1}',
	//  E
	// -------------------------------------------------------
	'{define: E frets 4 4 4 2 fingers 2 3 4 1}',
	'{define: Em frets 0 4 3 2 fingers 0 3 2 1}',
	'{define: E7 frets 1 2 0 2 fingers 1 2 0 3}',
	'{define: E7sus4 frets 2 2 0 2 fingers 2 3 0 4}',
	'{define: Em6 frets 4 4 3 4 fingers 2 3 1 4}',
	'{define: Em7 frets 0 2 0 2 fingers 0 1 0 2}',
	'{define: Edim frets 0 1 0 1 fingers 0 1 0 2}',
	'{define: Emaj7 frets 1 3 0 2 fingers 1 3 0 2}',
	'{define: E6 frets 4 4 4 4 fingers 1 1 1 1}',
	'{define: Esus2 frets 4 4 2 2 fingers 3 3 1 1}',
	'{define: Esus4 frets 2 4 0 2 fingers 2 4 0 1}',
	'{define: Eaug frets 1 0 0 3 fingers 1 0 0 4}',
	'{define: E9 frets 1 2 2 2}',
	//  F
	// -------------------------------------------------------
	'{define: F frets 2 0 1 0 fingers 2 0 1 0}',
	'{define: Fm frets 1 0 1 3 fingers 1 0 2 4}',
	'{define: F7 frets 2 3 1 0 fingers 2 3 1 0}',
	'{define: F7sus4 frets 3 3 1 3 fingers 2 3 1 4}',
	'{define: Fm6 frets 1 2 1 3 fingers 1 2 1 3 add: string 2 fret 1 finger 1 add: string 4 fret 1 finger 1}',
	'{define: Fm7 frets 1 3 1 3 fingers 1 3 2 4}',
	'{define: Fdim frets 1 2 1 2 fingers 1 3 2 4}',
	'{define: Fmaj7 frets 5 5 0 0 fingers 1 2 0 0}',
	'{define: F6 frets 2 2 1 3 fingers 2 2 1 4}',
	'{define: Fsus2 frets 0 0 1 3 fingers 0 0 1 3}',
	'{define: Fsus4 frets 3 0 1 3 fingers 3 0 1 4}',
	'{define: F6sus2 frets 0 0 1 3 fingers 0 0 1 3}',
	'{define: F6sus4 frets 3 0 1 1 fingers 3 0 1 1}',
	'{define: F6aug frets 2 1 1 4 fingers 2 1 1 4 add: string 1 fret 1 finger 1 add: string 4 fret 1 finger 1}',
	'{define: F9 frets 2 3 3 3}',
	'{define: Faug frets 2 1 1 0 fingers 3 1 2 0}',
	//  F#
	// -------------------------------------------------------
	'{define: F# frets 3 1 2 1 fingers 3 1 2 1 add: string 1 fret 1 finger 1 add: string 3 fret 1 finger 1}',
	'{define: F#m frets 2 1 2 0 fingers 2 1 3 0}',
	'{define: F#7 frets 3 4 2 4 fingers 2 3 1 4}',
	'{define: F#7sus4 frets 4 4 2 4 fingers 2 3 1 4}',
	'{define: F#m7 frets 2 4 2 4 fingers 1 3 2 4}',
	'{define: F#dim frets 2 3 2 3 fingers 1 3 2 4}',
	'{define: F#maj7 frets 3 5 2 4 fingers 2 4 1 3}',
	'{define: F#m6 frets 2 1 2 4 fingers 2 1 3 4}',
	'{define: F#6 frets 3 3 2 4 fingers 2 2 1 4}',
	'{define: F#sus2 frets 1 1 2 4 fingers 1 1 2 4}',
	'{define: F#sus4 frets 4 1 2 2 fingers 4 1 2 3}',
	'{define: F#aug frets 3 2 2 5 fingers 2 1 1 4 add: string 1 fret 2 finger 1 add: string 4 fret 2 finger 1}',
	'{define: F#9 frets 1 1 0 1}',
	//  Gb returns F#
	//  G
	// -------------------------------------------------------
	'{define: G frets 0 2 3 2 fingers 0 1 3 2}',
	'{define: Gm frets 0 2 3 1 fingers 0 2 3 1}',
	'{define: Gm6 frets 0 2 0 1 fingers 0 2 0 1}',
	'{define: G7 frets 0 2 1 2 fingers 0 2 1 3}',
	'{define: G7sus4 frets 0 2 1 3 fingers 0 2 1 4}',
	'{define: Gm7 frets 0 2 1 1 fingers 0 2 1 1}',
	'{define: Gdim frets 0 1 0 1 fingers 0 1 0 2}',
	'{define: Gmaj7 frets 0 2 2 2 fingers 0 1 2 3}',
	'{define: G6 frets 0 2 0 2 fingers 0 1 0 2}',
	'{define: Gsus2 frets 0 2 3 0 fingers 0 1 2 0}',
	'{define: Gsus4 frets 0 2 3 3 fingers 0 1 2 3}',
	'{define: Gaug frets 0 3 3 2 fingers 0 2 2 1}',
	'{define: Gsus4 frets 0 2 3 3}',
	'{define: G9 frets 2 2 1 2}',
	//  G#
	// -------------------------------------------------------
	'{define: G# frets 5 3 4 3 fingers 3 1 2 1 add: string 1 fret 3 finger 1 add: string 3 fret 3 finger 1}',
	'{define: G#m frets 1 3 4 2 fingers 1 3 4 2}',
	'{define: G#7 frets 1 3 2 3 fingers 1 3 2 4}',
	'{define: G#7sus4 frets 1 3 2 4 fingers 1 3 2 4}',
	'{define: G#m7 frets 1 3 2 2 fingers 1 4 2 3}',
	'{define: G#dim frets 1 2 1 2 fingers 1 3 2 4}',
	'{define: G#maj7 frets 1 3 3 3 fingers 1 2 2 3}',
	'{define: G#6 frets 1 3 1 3 fingers 1 3 2 4}',
	'{define: G#m6 frets 1 3 1 2 fingers 1 3 1 2 add: string 2 fret 1 finger 1 add: string 4 fret 1 finger 1}',
	'{define: G#sus2 frets 1 3 4 1 fingers 2 3 4 1}',
	'{define: G#sus4 frets 1 3 4 4 fingers 1 2 3 3}',
	'{define: G#aug frets 1 0 0 3 fingers 1 0 0 4}',
	'{define: G#9 frets 1 0 2 1 fingers 1 0 3 2}',
	//  slash chords & other oddities
	// -------------------------------------------------------
	'{define: C-F frets 2 0 1 3}',
	'{define: D/A frets 2 2 2 0}',
	'{define: Dm/C frets 2 2 1 3}',
	'{define: Fm7/C frets 1 3 1 3}',
	'{define: G/B frets 0 2 3 2}',
	'{define: G/F# frets 0 2 2 2}',
	'{define: G/F frets 0 2 1 2}',
	'{define: G7/B frets 0 2 1 2}'
];
;/**
 * Wraps three common canvas actions: adding canvas element to DOM, drawing a dot, adding text.
 * @class canvasTools
 * @namespace ukeGeeks
 * @static
 * @singleton
 * @module ukeGeeks
 */
ukeGeeks.canvasTools = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	/**
	 * @method drawDot
	 * @param ctx {CanvasContext} Valid Canvas Context handle
	 * @param centerPos {XyPositionJson} JSON with two properties: x & y ints, position in pixels, format {x: <int>, y: <int>}
	 * @param radius {int} Dot's Radius
	 * @param color {string} Hex color
	 * @return {void}
	 */
	_public.drawDot = function(ctx, centerPos, radius, color) {
		ctx.beginPath();
		ctx.arc(centerPos.x, centerPos.y, radius, 0, Math.PI * 2, true);
		ctx.closePath();
		ctx.fillStyle = color;
		ctx.fill();
	};

	/**
	 * @method drawText
	 * @param ctx {CanvasContext} Valid Canvas Context handle
	 * @param pos {XYPosObject} JSON with two properties: x & y ints, position in pixels, format {x: <int>, y: <int>}
	 * @param text {string} Any string to be places at Pos
	 * @param font {string} Font, CSS-like definition of size and font-family, i.e.
	 * @param color {string} Hexadecimal RGB color definition
	 * @param align {string} (optional) Text will be aligned at position (pos) as [left,right,center]. Default is center.
	 * @return {void}
	 */
	_public.drawText = function(ctx, pos, text, font, color, align) {
		if (!ctx.fillText) {
			return; // IE check
		}
		ctx.font = font;
		ctx.textAlign = (align || 'center');
		ctx.fillStyle = color;
		ctx.fillText(text, pos.x, pos.y);
	};

	/**
	 * Create new canvas DOM element and add it to element. Return convas context handle. Reutns null if there's a problem.
	 * @method addCanvas
	 * @param element {DOMEelement} Destination DOM element
	 * @param width {int} Desired width of new canvas element
	 * @param height {int} Desired height of new canvas element
	 * @return {canvasContextHandle}
	 */
	_public.addCanvas = function(element, width, height) {
		// make element
		var c = document.createElement('canvas');
		if (!c) {
			return null;
		}
		// because IE is an abomination... must init & place in DOM BEFORE doing anything else
		if (ukeGeeks.settings.environment.isIe) {
			c = G_vmlCanvasManager.initElement(c);
		}
		element.appendChild(c);
		c.width = width;
		c.height = height;
		// canvas context handle
		var ctx = c.getContext('2d');
		if (!ctx) {
			return null;
		}
		return ctx;
	};

	return _public;
}());
;/**
 * First places a Canvas element within a DOM element, then draws a chord diagram on it.
 * @class chordBrush
 * @namespace ukeGeeks
 */
ukeGeeks.chordBrush = function() {

	/**
	 * attach public members to this object
	 * @property _public
	 * @type {Object}
	 */
	var _public = {};

	/////////////////////////////////////////////////////////////////////////////
	//
	// PUBLIC methods
	//
	/////////////////////////////////////////////////////////////////////////////

	/**
	 * Again this is a constructor replacement
	 * @method init
	 * @return {void}
	 */
	_public.init = function() {};

	/**
	 * Puts a new Canvas within ChordBox and draws the chord diagram on it.
	 * @method plot
	 * @param chordBox {DOMElement} Handle to the DOM element where the chord is to be drawn.
	 * @param chord {expandedChord} Chord Diagram to be drawn.
	 * @param fretBox {JSON} Appropriate ukeGeeks.settings.fretBox -- either "fretBox" or "inlineFretBox"
	 * @param {JSON} fontSettings (optional) Defaults to settings.fonts
	 * @param {JSON} colorSettings (optional) Defaults to settings.colors
	 * @return {void}
	 */
	_public.plot = function(chordBox, chord, fretBox, fontSettings, colorSettings) {
		var ctx = ukeGeeks.canvasTools.addCanvas(chordBox, fretBox.width, fretBox.height);
		if (!ctx) {
			return;
		}

		if (!fontSettings) {
			fontSettings = ukeGeeks.settings.fonts;
		}
		if (!colorSettings) {
			colorSettings = ukeGeeks.settings.colors;
		}

		// starting top-left position for chord diagram
		var pos = {
			x: fretBox.topLeftPos.x,
			y: fretBox.topLeftPos.y
		};
		_drawFretboard(ctx, pos, fretBox, colorSettings.fretLines);
		// find where the circle centers should be:
		var centers = {
			x: pos.x,
			y: (pos.y + fretBox.dotRadius)
		};

		// find the vertical shift by dividing the freespace between top and bottom (freespace is the row height less circle diameter)
		var fudgeY = (fretBox.fretSpace - 2 * fretBox.dotRadius) / 2;
		var fretRange = _getFretRange(chord.dots);
		var firstFret = (fretRange.last <= 5) ? 1 : fretRange.last - 4;

		// now add Dots (with finger numbers, if present)
		for (var i = 0; i < chord.dots.length; i++) {
			var s = chord.dots[i].string;
			var p = {
				x: (centers.x + s * fretBox.stringSpace),
				y: (fudgeY + centers.y + (chord.dots[i].fret - firstFret) * fretBox.fretSpace)
			};
			ukeGeeks.canvasTools.drawDot(ctx, p, fretBox.dotRadius, colorSettings.dots);
			// check that the dot's radius isn't stupidly small
			if (chord.dots[i].finger > 0 && fretBox.showText && fretBox.dotRadius > 4) {
				ukeGeeks.canvasTools.drawText(ctx, {
					x: p.x,
					y: (p.y + 5)
				}, chord.dots[i].finger, fontSettings.dot, colorSettings.dotText);
			}
		}

		// If the chord is above the normal first 5 frets we need to add labels for the first and last frets
		if (firstFret != 1) {
			// Label the starting and ending frets (0-12). It's assumed that the fretboard covers frets 1-5.
			// If instead the top fret is 6, say, well, this is the method called to add that "6".
			// The Y position calculation is a bit klunky. How big of a fret range is present in the chord?
			var txtPos = {
				x: 0,
				y: pos.y + fretBox.fretSpace * (0.96 * (5.0 - (fretRange.last - fretRange.first)))
				// Old Y caculcation: pos.y + (0.8 * fretBox.fretSpace)
			};
			ukeGeeks.canvasTools.drawText(ctx, txtPos, fretRange.first, fontSettings.fret, colorSettings.fretText, 'left');

			// no point in double plotting a fret (i.e. barred 8th fret) so only add second label if
			// first and last frets are different. Also, it's odd to see both 8 & 9, so only show if there's
			// at least one fret between first and last (i.e. 8 & 10)
			if ((fretRange.last - fretRange.first) > 1) {
				txtPos.y = pos.y + (4.8 * fretBox.fretSpace);
				ukeGeeks.canvasTools.drawText(ctx, txtPos, fretRange.last, fontSettings.fret, colorSettings.fretText, 'left');
			}
		}

		// TODO: top offset
		if (fretBox.showText) {
			ukeGeeks.canvasTools.drawText(ctx, {
				x: (pos.x + 1.5 * fretBox.stringSpace),
				y: (pos.y - 5)
			}, chord.name, fontSettings.text, colorSettings.text);
		}

		_mutedStrings(ctx, fretBox, chord.muted, colorSettings.xStroke);
	};

	/////////////////////////////////////////////////////////////////////////////
	//
	// PRIVATE methods
	//
	/////////////////////////////////////////////////////////////////////////////

	/**
	 * @method _drawFretboard
	 * @private
	 * @param ctx {CanvasContext} Valid Canvas Context Handle
	 * @param pos {XYPosObject} Object with two properties: x & y ints, position in pixels
	 * @param fretBox {settings}
	 * @return {void}
	 */
	var _drawFretboard = function(ctx, pos, fretBox, fretColor) {
		// width offset, a "subpixel" adjustment
		var i, offset = fretBox.lineWidth / 2;
		// locals
		var stringHeight = ukeGeeks.settings.numFrets * fretBox.fretSpace;
		var fretWidth = 3 * fretBox.stringSpace;
		// build shape
		ctx.beginPath();
		// add "C" & "E" strings
		for (i = 1; i < 3; i++) {
			var x = pos.x + i * fretBox.stringSpace + offset;
			ctx.moveTo(x, pos.y + offset);
			ctx.lineTo(x, pos.y + stringHeight + offset);
		}
		// add frets
		for (i = 1; i < ukeGeeks.settings.numFrets; i++) {
			var y = pos.y + i * fretBox.fretSpace + offset;
			ctx.moveTo(pos.x + offset, y);
			ctx.lineTo(pos.x + fretWidth + offset, y);
		}
		//
		ctx.rect(pos.x + offset, pos.y + offset, fretWidth, stringHeight);
		// stroke shape
		ctx.strokeStyle = fretColor;
		ctx.lineWidth = fretBox.lineWidth;
		ctx.stroke();
		ctx.closePath();
	};

	/**
	 * TODO: Loop over the muted array, dropping X's whenever a string position is TRUE
	 * @method _mutedStrings
	 * @private
	 * @param  {CanvasContext} ctx  Valid Canvas Context handle
	 * @param  {JSON} fretBox  See Settings.fretBox
	 * @param  {bool} muted    Is this string "muted"?
	 * @param  {string} strokeColor Valid CSS hex color (shorthand not recommended)
	 * @return {void}
	 */
	var _mutedStrings = function(ctx, fretBox, muted, strokeColor) {
		var x = fretBox.topLeftPos.x + fretBox.lineWidth / 2;
		var y = fretBox.topLeftPos.y + fretBox.lineWidth / 4;
		for (var i = 0; i < muted.length; i++) {
			if (muted[i]) {
				_drawX(ctx, {
					x: x + i * fretBox.stringSpace,
					y: y
				}, fretBox, strokeColor);
			}
		}
	};

	/**
	 * Plots an "X" centered at POSITION
	 * @method _drawX
	 * @private
	 * @param {CanvasContext} ctx Valid Canvas Context handle
	 * @param centerPos {XyPositionJson} JSON with two properties: x & y ints, position in pixels, format {x: <int>, y: <int>}
	 * @param  {JSON} fretBox  See Settings.fretBox
	 * @param  {string} strokeColor Valid CSS hex color (shorthand not recommended)
	 * @return {void}
	 */
	var _drawX = function(ctx, pos, fretBox, strokeColor) {
		pos.x -= fretBox.xWidth / 2;
		pos.y -= fretBox.xWidth / 2;

		ctx.beginPath();

		ctx.moveTo(pos.x, pos.y);
		ctx.lineTo(pos.x + fretBox.xWidth, pos.y + fretBox.xWidth);
		ctx.moveTo(pos.x, pos.y + fretBox.xWidth);
		ctx.lineTo(pos.x + fretBox.xWidth, pos.y);

		ctx.strokeStyle = strokeColor;
		ctx.lineWidth = fretBox.xStroke;
		ctx.stroke();
		ctx.closePath();
	};

	/**
	 * Returns first & last frets, 0 if none found.
	 * @method _getFretRange
	 * @private
	 * @param dots {array<data.dot>} Array of ukeGeeks.data.dot objects
	 * @return {JSON}
	 */
	var _getFretRange = function(dots) {
		var max = -1;
		var min = 300;

		for (var i = 0; i < dots.length; i++) {
			if (dots[i].fret > max) {
				max = dots[i].fret;
			}
			if (dots[i].fret < min) {
				min = dots[i].fret;
			}
		}
		return {
			first: (min < 300) ? min : 0,
			last: (max > 0) ? max : 0
		};
	};

	/* return our public interface
	 */
	return _public;

};
;/**
 * Reads an HTML (text) block looking for chords in format: [Emaj7]
 * Returns the HTML block with wrapped chords: &lt;code&gt;&lt;strong&gt;&lt;em&gt;
 * @class chordParser
 * @namespace ukeGeeks
 */
ukeGeeks.chordParser = function() {

	/**
	 * attach public members to this object
	 * @property _public
	 * @type {Object}
	 */
	var _public = {};

	var _chords = [];

	/////////////////////////////////////////////////////////////////////////////
	//
	// PUBLIC methods
	//
	/////////////////////////////////////////////////////////////////////////////
	/**
	 * Again this is a constructor replacement. Just here for consistency. Does nothing.
	 * @method init
	 * @return {void}
	 */
	_public.init = function() {};

	/**
	 * This does all of the work -- it's a Wrapper method that calls all of this classes other
	 * (private) methods in correct order.
	 * @method parse
	 * @param text {string} CPM Text Block to be parsed
	 * @return {string}
	 */
	_public.parse = function(text) {
		_chords = _findChords(text);
		text = _encloseChords(text, _chords);
		text = _packChords(text);
		return text;
	};

	/**
	 * Getter method for _chords
	 * @method getChords
	 * @return {Array-chords}
	 */
	_public.getChords = function() {
		return _chords;
	};

	/////////////////////////////////////////////////////////////////////////////
	//
	// PRIVATE methods
	//
	/////////////////////////////////////////////////////////////////////////////
	/**
	 * Returns an array of all of the unique bracket chord names. So even if [D7] appears a
	 * dozen times you'll only see it once in this list.
	 * @method _findChords
	 * @private
	 * @param text {string} CPM Text Block to be parsed
	 * @return {StringArray}
	 */
	var _findChords = function(text) {
		var i, j;
		var re = /\[(.+?)]/img;
		var m = text.match(re);
		if (!m) {
			return [];
		}

		// why not use associative array?
		var chords = [];
		var found;
		for (i = 0; i < m.length; i++) {
			found = false;
			for (j = 0; j < chords.length; j++) {
				if (chords[j] == m[i]) {
					found = true;
					break;
				}
			}
			if (!found) {
				chords.push(m[i]);
			}
		}
		// clean 'em
		for (j in chords) {
			chords[j] = chords[j].replace('[', '').replace(']', '');
		}
		// done
		return chords;
	};

	/**
	 * Returns the input string having replaced all of the "bracketed chord names" (i.e. [D7]) with HTML
	 * marked-up version (i.e. &lt;code&gt;&lt;strong&gt;[&lt;em&gt;D7&lt;/em&gt;]&lt;/strong&gt;&lt;/code&gt;)
	 * @method _encloseChords
	 * @private
	 * @param text {string}
	 * @param chords {StringArray}
	 * @return {string}
	 */
	var _encloseChords = function(text, chords) {
		var openBracket = ukeGeeks.settings.opts.retainBrackets ? '[' : ' ';
		var closeBracket = ukeGeeks.settings.opts.retainBrackets ? ']' : ' ';
		for (var i in chords) {
			do {}
			while (text.length != (text = text.replace(
				'[' + chords[i] + ']',
				'<code data-chordName="' + chords[i] + '"><strong>' + openBracket + '<em>' + chords[i] + '</em>' + closeBracket + '</strong></code>')).length);
		}
		return text;
		/*
		// need to handle chords such as: [A7+5]
		var escapeRegEx = new RegExp('([+])','g');
		for (var j = 0; j < this.chords.length; j++){
			var s = this.chords[j].replace(escapeRegEx, '\\\$1')
			var re = new RegExp('[[]' + s + ']', 'img');
			text = text.replace(re, '<code data-chordName="' + this.chords[j] + '"><strong>[<em>' + this.chords[j] + '</em>]</strong></code>');
		}
		*/
	};

	/**
	 * Looks for consecutive chords and strips the whitespace between them -- thus "packing" the
	 * chords against each other with only a single space separating them.
	 * @method _packChords
	 * @private
	 * @param text {string}
	 * @return {string}
	 */
	var _packChords = function(text) {
		var re;

		if (ukeGeeks.settings.inlineDiagrams) {
			/* TODO: problem with packing */
			re = /(<\/strong><\/code>)[ \t]*(<code data-chordName="[^"]*"><strong>)/ig;
			return text.replace(re, '$1<span class="ugsInlineSpacer">&nbsp;</span>$2');
		}

		re = /<\/strong><\/code>[ \t]*<code data-chordName="[^"]*"><strong>/ig;
		return text.replace(re, ' ');
	};

	/* return our public interface
	 */
	return _public;
};
;/**
 * Reads a text block and returns an object containing whatever ChordPro elements it recognizes.
 *
 * A cleaned, HTML version of song is included.
 *
 * @class cpmParser
 * @namespace ukeGeeks
 */
ukeGeeks.cpmParser = function() {

	/**
	 * attach public members to this object
	 * @property _public
	 * @type {Object}
	 */
	var _public = {};

	/**
	 * Number of columns defined
	 * @property _columnCount
	 * @private
	 * @type int
	 */
	var _columnCount = 1;

	/**
	 * Under development, bool indicating whether any chords were found within the lyrics.
	 * Helpful for tablature-only arrangements.
	 * TODO: do not rely on this!!!
	 * @property _hasChords
	 * @private
	 * @type bool
	 */
	var _hasChords = false; // TODO:

	/**
	 * Song's key. May be set via command tag {key: C} otherwise use the first chord found (if available)
	 * @property _firstChord
	 * @private
	 * @type string
	 */
	var _firstChord = '';

	/**
	 * Again this is a constructor replacement. Just here for consistency. Does nothing.
	 * @method init
	 * @return {void}
	 */
	_public.init = function() {};

	/**
	 * Accepts CPM text, returning HTML marked-up text
	 * @method parse
	 * @param text {string} string RAW song
	 * @return {songObject}
	 */
	_public.parse = function(text) {
		var song = new ukeGeeks.data.song();
		text = _stripHtml(text);
		var songDom = _domParse(text);
		songDom = _parseInstr(songDom);
		songDom = _parseSimpleInstr(songDom);
		songDom = _markChordLines(songDom);
		song.body = _export(songDom);
		if (_columnCount > 1) {
			song.body = '<div class="' + _classNames.ColumnWrap + ' ' + _classNames.ColumnCount + _columnCount + '">' + '<div class="' + _classNames.Column + '">' + song.body + '</div>' + '</div>';
		}
		song.hasChords = _hasChords;
		var tmp;
		// Song Title
		tmp = _getInfo(songDom, _blockTypeEnum.Title);
		if (tmp.length > 0) {
			song.title = tmp[0];
		}
		// Artist
		tmp = _getInfo(songDom, _blockTypeEnum.Artist);
		if (tmp.length > 0) {
			song.artist = tmp[0];
		}
		// Song Subtitle
		tmp = _getInfo(songDom, _blockTypeEnum.Subtitle);
		if (tmp.length > 0) {
			song.st = tmp[0];
		}
		if (tmp.length > 1) {
			song.st2 = tmp[1];
		}
		// Album
		tmp = _getInfo(songDom, _blockTypeEnum.Album);
		if (tmp.length > 0) {
			song.album = tmp[0];
		}
		// UkeGeeks "Extras"
		tmp = _getInfo(songDom, _blockTypeEnum.UkeGeeksMeta);
		if (tmp.length > 0) {
			song.ugsMeta = tmp;
		}
		// Key
		tmp = _getInfo(songDom, _blockTypeEnum.Key);
		if (tmp.length > 0) {
			song.key = tmp[0];
		}
		else if (_firstChord !== '') {
			// Setting Key to first chord found
			song.key = _firstChord;
		}
		// Chord Definitions
		tmp = _getInfo(songDom, _blockTypeEnum.ChordDefinition);
		if (tmp.length > 0) {
			for (var i in tmp) {
				song.defs.push(ukeGeeks.chordImport.runLine('{define: ' + tmp[i] + '}'));
			}
		}
		return song;
	};

	/*
		TODO: add ukeGeeks Meta support:
		$regEx = "/{(ukegeeks-meta|meta)\s*:\s*(.+?)}/i";
	*/
	var _regEx = {
		blocks: /\s*{\s*(start_of_tab|sot|start_of_chorus|soc|end_of_tab|eot|end_of_chorus|eoc)\s*}\s*/im,
		tabBlock: /\s*{\s*(start_of_tab|sot)\s*}\s*/im,
		chorusBlock: /\s*{\s*(start_of_chorus|soc)\s*}\s*/im
	};

	/**
	 * All of the CSS classnames used by UkeGeeks JavaScript
	 * @property _classNames
	 * @private
	 * @type JSON
	 */
	var _classNames = {
		Comment: 'ugsComment',
		Tabs: 'ugsTabs',
		Chorus: 'ugsChorus',
		PreChords: 'ugsChords', // preformatted with chords
		PrePlain: 'ugsPlain', // preformated, no chords
		NoLyrics: 'ugsNoLyrics', // preformated, chords ONLY -- no lyrics (text) between 'em
		ColumnWrap: 'ugsWrap',
		ColumnCount: 'ugsColumnCount',
		Column: 'ugsColumn',
		NewPage: 'ugsNewPage'
	};

	/**
	 * Enumeration defining the types of nodes used within this class to parse CPM
	 * @property _blockTypeEnum
	 * @private
	 * @type JSON-enum
	 */
	var _blockTypeEnum = {
		// Multiline Nodes
		TextBlock: 1, // temporary type, should be replaced with Chord Text or Plain Text
		ChorusBlock: 2,
		TabBlock: 3,
		// Single Line "Instruction" Nodes
		Comment: 101,
		Title: 102,
		Subtitle: 103,
		Album: 104,
		ChordDefinition: 105,
		UkeGeeksMeta: 106,
		ColumnBreak: 107, // Defining this as an instruction instead of a node since I'm not requiring a Begin/End syntax and it simplifies processing
		Artist: 108,
		NewPage: 109,
		Key: 110,
		// Text Types
		ChordText: 201,
		PlainText: 202,
		ChordOnlyText: 203, //
		// Undefined
		Undefined: 666
	};

	/**
	 * Retuns the block type (_blockTypeEnum) of passed in line.
	 * @method _getBlockType
	 * @private
	 * @param line {songNode}
	 * @return {_blockTypeEnum}
	 */
	var _getBlockType = function(line) {
		// TODO: verify line's type in documentation
		if (_regEx.chorusBlock.test(line)) {
			return _blockTypeEnum.ChorusBlock;
		}
		else if (_regEx.tabBlock.test(line)) {
			return _blockTypeEnum.TabBlock;
		}
		return _blockTypeEnum.TextBlock;
	};

	/**
	 * Convert passed in song to HTML block
	 * @method _export
	 * @private
	 * @param song {songNodeArray}
	 * @return {strings}
	 */
	var _export = function(song) {
		var nl = "\n";
		var html = '';
		for (var i = 0; i < song.length; i++) {
			
			if (song[i].type == _blockTypeEnum.Title){
				html += '<h1>' + song[i].lines[0] + '</h1>' + nl;
			}
			else if (song[i].type == _blockTypeEnum.Subtitle){
				html += '<h2>' + song[i].lines[0] + '</h2>' + nl;
			}
			else if (song[i].type == _blockTypeEnum.Album){
				html += '<h3 class="ugsAlbum">' + song[i].lines[0] + '</h3>' + nl;
			}
			else if (song[i].type == _blockTypeEnum.UkeGeeksMeta){
				html += '<h3>' + song[i].lines[0] + '</h3>' + nl;
			}
			else
			
			if (song[i].type == _blockTypeEnum.Comment) {
				html += '<h6 class="' + _classNames.Comment + '">' + song[i].lines[0] + '</h6>' + nl;
			}
			else if (song[i].type == _blockTypeEnum.NewPage) {
				html += '<hr class="' + _classNames.NewPage + '" />' + nl;
			}
			else if ((song[i].type == _blockTypeEnum.ChordText) || (song[i].type == _blockTypeEnum.PlainText) || (song[i].type == _blockTypeEnum.ChordOnlyText)) {
				// TODO: beware undefined's!!!
				// Repack the text, only open/close <pre> tags when type changes
				// problem: exacerbates WebKit browsers' first chord position bug.
				if (song[i].lines[0].length < 1) {
					// prevent empty blocks (usually caused by comments mixed in header tags)
					continue;
				}
				var myClass = (song[i].type == _blockTypeEnum.PlainText) ? _classNames.PrePlain : _classNames.PreChords;
				if (song[i].type == _blockTypeEnum.ChordOnlyText) {
					myClass += ' ' + _classNames.NoLyrics;
				}
				var myType = song[i].type;
				var lastType = ((i - 1) >= 0) ? song[i - 1].type : _blockTypeEnum.Undefined;
				var nextType = ((i + 1) < song.length) ? nextType = song[i + 1].type : _blockTypeEnum.Undefined;
				html += (lastType != myType) ? ('<pre class="' + myClass + '">') : nl;
				html += song[i].lines[0];
				html += (nextType != myType) ? ('</pre>' + nl) : '';
			}
			else if (song[i].type == _blockTypeEnum.ChorusBlock) {
				html += '<div class="' + _classNames.Chorus + '">' + nl;
				html += _export(song[i].lines);
				html += '</div>' + nl;
			}
			else if (song[i].type == _blockTypeEnum.TabBlock) {
				html += '<pre class="' + _classNames.Tabs + '">';
				for (var j in song[i].lines) {
					html += song[i].lines[j] + nl;
				}
				html += '</pre>' + nl;
			}
			else if (song[i].type == _blockTypeEnum.TextBlock) {
				html += _export(song[i].lines);
			}
			else if (song[i].type == _blockTypeEnum.ColumnBreak) {
				html += '</div><div class="' + _classNames.Column + '">';
			}
			// else {}
		}
		return html;
	};

	/**
	 * Debugging tool for Firebug. Echos the song's structure.
	 * @method _echo
	 * @private
	 * @param song {songNodeArray}
	 * @return {void}
	 */
	var _echo = function(song) {
		for (var i in song) {
			console.log('>> ' + i + '. ' + song[i].type + ' node, ' + song[i].lines.length + ' lines');
			for (var j in song[i].lines) {
				console.log(song[i].lines[j]);
			}
		}
	};

	/**
	 * Explodes passed in text block into an array of songNodes ready for further parsing.
	 * @method _domParse
	 * @private
	 * @param text {string}
	 * @return {songNodeArray}
	 */
	var _domParse = function(text) {
		var lines = text.split('\n');
		var song = [];
		var tmpBlk = null;
		var isMarker; // block marker
		for (var i in lines) {
			// strip comments
			if ((lines[i].length > 0) && (lines[i][0] == '#')) {
				continue;
			}
			isMarker = _regEx.blocks.test(lines[i]);
			if (isMarker || tmpBlk === null) {
				// save last block, start new one...
				if (tmpBlk !== null) {
					song.push(tmpBlk);
				}
				tmpBlk = {
					type: _getBlockType(lines[i]),
					lines: []
				};
				if (!isMarker) {
					// Don't miss that first line!
					tmpBlk.lines.push(lines[i]);
				}
			}
			else {
				var s = ukeGeeks.toolsLite.trim(lines[i]);
				if (s.length > 0) {
					tmpBlk.lines.push(s);
				}
			}
		}
		if (tmpBlk.lines.length > 0) {
			song.push(tmpBlk);
		}
		return song;
	};

	/**
	 * Goes through songNodes, those nodes that are "instructions" are exploded and
	 * a "the resulting "songDomElement" built, this songDomElement then replaces the
	 * original line.
	 *
	 * The regular expression look for instructions with this format:
	 * {commandVerb: commandArguments}
	 *
	 * @method _parseInstr
	 * @private
	 * @param song {songNodeArray}
	 * @return {songNodeArray}
	 */
	var _parseInstr = function(song) {
		var regEx = {
			instr: /\{[^}]+?:.*?\}/im,
			cmdArgs: /\{.+?:(.*)\}/gi,
			cmdVerb: /\{(.+?)\s*:.*\}/gi
		};
		for (var i in song) {
			for (var j in song[i].lines) {
				if (regEx.instr.test(song[i].lines[j])) {
					var args = song[i].lines[j].replace(regEx.cmdArgs, '$1');
					var verb = song[i].lines[j].replace(regEx.cmdVerb, '$1').toLowerCase();
					verb = verb.replace(/\r/, ''); // IE7 bug
					var tmpBlk = {
						type: '',
						lines: []
					};
					switch (verb) {
						case 'title':
						case 't':
							tmpBlk.type = _blockTypeEnum.Title;
							break;
						case 'artist':
							tmpBlk.type = _blockTypeEnum.Artist;
							break;
						case 'subtitle':
						case 'st':
							tmpBlk.type = _blockTypeEnum.Subtitle;
							break;
						case 'album':
							tmpBlk.type = _blockTypeEnum.Album;
							break;
						case 'comment':
						case 'c':
							tmpBlk.type = _blockTypeEnum.Comment;
							break;
						case 'key':
						case 'k':
							tmpBlk.type = _blockTypeEnum.Key;
							break;
						case 'define':
							tmpBlk.type = _blockTypeEnum.ChordDefinition;
							break;
						case 'ukegeeks-meta':
							tmpBlk.type = _blockTypeEnum.UkeGeeksMeta;
							break;
						default:
							tmpBlk.type = 'Undefined-' + verb;
							break;
					}
					tmpBlk.lines[0] = ukeGeeks.toolsLite.trim(args);
					song[i].lines[j] = tmpBlk;
				}
			}
		}
		return song;
	};

	/**
	 * A "Simple Instruction" is one that accepts no arguments. Presently this only handles Column Breaks.
	 * @method _parseSimpleInstr
	 * @private
	 * @param song {songNodeArray}
	 * @return {songNodeArray}
	 */
	var _parseSimpleInstr = function(song) {
		var regEx = {
			columnBreak: /\s*{\s*(column_break|colb|np|new_page)\s*}\s*/im
		};
		for (var i in song) {
			for (var j in song[i].lines) {
				if (regEx.columnBreak.test(song[i].lines[j])) {
					var verb = song[i].lines[j].replace(regEx.columnBreak, '$1').toLowerCase();
					switch (verb) {
						case 'column_break':
						case 'colb':
							_columnCount++;
							song[i].lines[j] = {
								type: _blockTypeEnum.ColumnBreak,
								lines: []
							};
							break;
						case 'new_page':
						case 'np':
							song[i].lines[j] = {
								type: _blockTypeEnum.NewPage,
								lines: []
							};
							break;
					}
				}
			}
		}
		return song;
	};

	/**
	 * Runs through songNodes and if the line contains at least one chord it's type is et to
	 * ChordText, otherwise it's marked as "PlainText", meaning straight lyrics
	 * @method _markChordLines
	 * @private
	 * @param song {songNodeArray}
	 * @return {songNodeArray}
	 */
	var _markChordLines = function(song) {
		var regEx = {
			chord: /\[(.+?)]/i,
			allChords: /\[(.+?)]/img
		};

		var chordFound,
			hasOnlyChords,
			line;

		for (var i in song) {
			if ((song[i].type != _blockTypeEnum.TextBlock) && (song[i].type != _blockTypeEnum.ChorusBlock)) {
				continue;
			}
			for (var j in song[i].lines) {
				line = song[i].lines[j];
				if (typeof(line) != 'string') {
					continue;
				}

				chordFound = regEx.chord.test(line);
				_hasChords = _hasChords || chordFound;
				hasOnlyChords = chordFound && (ukeGeeks.toolsLite.trim(line.replace(regEx.allChords, '')).length < 1);
				// need to find
				song[i].lines[j] = {
					type: (hasOnlyChords ? _blockTypeEnum.ChordOnlyText : (chordFound ? _blockTypeEnum.ChordText : _blockTypeEnum.PlainText)),
					lines: [line]
				};

				if (chordFound && _firstChord === '') {
					var m = line.match(regEx.chord);
					if (m) {
						_firstChord = m[1];
					}
				}
			}
		}
		return song;
	};

	/**
	 * Searches the songNodes for the specified block type, retunrs all matching node line (text) values.
	 * @method _getInfo
	 * @private
	 * @param song {songNodeArray}
	 * @param type {_blockTypeEnum}
	 * @return {array}
	 */
	var _getInfo = function(song, type) {
		var rtn = [];
		for (var i in song) {
			if (song[i].type == type) {
				rtn.push(song[i].lines[0]);
			}
			else if (song[i].type == _blockTypeEnum.TextBlock) {
				for (var j in song[i].lines) {
					if (song[i].lines[j].type == type) {
						rtn.push(song[i].lines[j].lines[0]);
					}
				}
			}
		}
		return rtn;
	};

	/**
	 * Removes HTML "pre" tags and comments.
	 * @method _stripHtml
	 * @private
	 * @param text {string}
	 * @return {string}
	 */
	var _stripHtml = function(text) {
		var regEx = {
			pre: /<\/?pre>/img, // HTML <pre></pre>
			htmlComment: /<!--(.|\n)*?-->/gm // HTML <!-- Comment -->
		};
		return text.replace(regEx.pre, '').replace(regEx.htmlComment, '');
	};

	/* return our public interface */
	return _public;
};
;/**
 * Draws large chord diagram grid (aka "reference" diagrams) on canvas
 * @class chordPainter
 * @namespace ukeGeeks
 */
ukeGeeks.chordPainter = function() {

	/**
	 * attach public members to this object
	 * @property _public
	 * @type {Object}
	 */
	var _public = {};

	/**
	 * ukeGeeks.canvas object handle
	 * @property _brush
	 * @type ukeGeeks.chordBrush instance handle
	 * @private
	 */
	var _brush = null;

	/**
	 * keep an array of missing chords (strings)
	 * @property _errors
	 * @type array
	 * @private
	 */
	var _errors = [];

	var _handles = null;

	/**
	 * If ignoreCommonChords option is true then this will contain list of
	 * matched chords: ones defined in the ignore list that were also found in the song
	 * @property _ignoreMatchList
	 * @type {Array}
	 * @private
	 */
	var _ignoreMatchList = [];

	/**
	 * Ignore "tacet" or "no chord" chords
	 * @property _tacet
	 * @type {RegExp}
	 * @private
	 */
	var _tacet = /^(n.?\/?c.?|tacet)$/i;

	/**
	 * Again this is a constructor replacement
	 * @method init
	 * @param htmlHandles {ukeGeeks.data.htmlHandles} DOM Element object
	 * @return {void}
	 */
	_public.init = function(htmlHandles) {
		_brush = new ukeGeeks.chordBrush();
		_brush.init();
		_handles = htmlHandles;
	};

	/**
	 * Checks whether speicified chord (name) is on the ignore list.
	 * @method ignoreChord
	 * @param  {string} chord Chord name
	 * @return {boolean}	return TRUE if "chord" is on ignore list.
	 */
	var ignoreChord = function(chord) {
		for (var i = 0; i < ukeGeeks.settings.commonChords.length; i++) {
			if (chord == ukeGeeks.settings.commonChords[i]) {
				return true;
			}
		}
		return false;
	};

	/**
	 * Plots the passed in chords (array of ) by adding canvas elements inside passed DOM element.
	 * @method show
	 * @param chords {array<expandedChord>} Array of chord objects to be plotted
	 * @return {void}
	 */
	_public.show = function(chords) {
		_handles.diagrams.innerHTML = '';
		_errors = [];
		_ignoreMatchList = [];

		if (ukeGeeks.settings.opts.sortAlphabetical) {
			chords.sort();
		}

		for (var i = 0; i < chords.length; i++) {
			if (_tacet.test(chords[i])) {
				continue;
			}
			if (ukeGeeks.settings.opts.ignoreCommonChords && ignoreChord(chords[i])) {
				if ((typeof Array.prototype.indexOf === 'function') && (_ignoreMatchList.indexOf(chords[i]) == -1)) {
					_ignoreMatchList.push(chords[i]);
				}
				continue;
			}
			var chord = ukeGeeks.definitions.get(chords[i]);
			if (!chord) {
				_errors.push(chords[i]);
				continue;
			}
			_brush.plot(_handles.diagrams, chord, ukeGeeks.settings.fretBox);
		}

		if (_ignoreMatchList.length > 0) {
			var para = document.createElement('p');
			para.className = 'ugsIgnoredChords';
			para.innerHTML = 'Also uses: ' + _ignoreMatchList.sort().join(', ');
			_handles.diagrams.appendChild(para);
		}
	};

	/**
	 * Plots chords "inline" with the lyrics. Searches for &lt;code data-chordName=&quot;Am7&quot;&gt;&lt;/code&gt;.
	 * When found adds canvas element and draws chord named in data-chordName attribute
	 * @method showInline
	 * @param chords {array<expandedChord>} Array of chord objects to be plotted
	 * @return {void}
	 */
	_public.showInline = function(chords) {
		var e = _handles.text.getElementsByTagName('code');
		if (e.length < 1) {
			return;
		}
		for (var i = 0; i < chords.length; i++) {
			var chord = ukeGeeks.definitions.get(chords[i]);
			if (!chord) {
				/* TODO: error reporting if not found */
				// _errors.push(chords[i]);
				continue;
			}
			for (var j = 0; j < e.length; j++) {
				if (e[j].getAttribute('data-chordName') == chord.name) {
					_brush.plot(e[j], chord, ukeGeeks.settings.inlineFretBox, ukeGeeks.settings.inlineFretBox.fonts);
				}
			}
		}
	};

	/**
	 * returns array of unknown chords
	 * @method getErrors
	 * @return {array}
	 */
	_public.getErrors = function() {
		return _errors;
	};

	/**
	 * List of chords excluded from the master chord diagrams
	 * @method getIgnoredChords
	 * @return {array} array of strings
	 */
	_public.getIgnoredChords = function() {
		return _ignoreMatchList;
	};

	/* return our public interface
	 */
	return _public;
};
;/**
 * Tablature renderer -- reads tab data and draws canvas elements.
 * Creates "packed" versions of the tabs, including a "key line" that's comprised
 * only of '-' and '*' -- the asterisks denoting where a dot will eventually be placed.
 * @class tabs
 * @constructor
 * @namespace ukeGeeks
 */
ukeGeeks.tabs = function() {

	/**
	 * alias for external Settings dependencies (helps with complression, too)
	 * @property tab_settings
	 * @private
	 * @type {JSON}
	 */
	var tab_settings = ukeGeeks.settings.tabs;

	// TODO: use ukeGeeks.settings.tuning for NUM_STRINGS and LAST_STRING_NAME??

	/**
	 * (Constant) Number of Strings (dashed lines of tablature notation) expected. (For now
	 * a constant -- ukueleles "always" have four). Making a variable to help support port
	 * for other instruments.
	 * @property NUM_STRINGS
	 * @private
	 * @type int
	 */
	var NUM_STRINGS= 4;

	/**
	 * (Constant) Last String Name (Note), as above, on Ukulele is a "G". Here for other instruments.
	 * @property LAST_STRING_NAME
	 * @private
	 * @type string
	 */
	var LAST_STRING_NAME= 'G';

	/* PUBLIC METHODS
	---------------------------------------------- */
	/**
	 * Again this is a constructor replacement
	 * @method init
	 * @public
	 * @return {void}
	 */
	var init= function() {};

	/**
	 * Races through all &lt;pre&gt; tags within h, any with the CSS class of "ugsTabs" will be replaced with the canvas element.
	 * @method replace
	 * @public
	 * @param h {DOM-element}
	 * @return {void}
	 */
	var replace= function(h) {
		var tabBlocks = h.getElementsByTagName('pre');
		for (var i in tabBlocks) {
			if (tabBlocks[i].className == 'ugsTabs') {
				var s = tabBlocks[i].innerHTML;
				tabBlocks[i].innerHTML = '';
				loadBlocks(s, tabBlocks[i]);
			}
		}
	};

	/**
	 *
	 * @method loadBlocks
	 * @param text {string} Block of text that contains one or more tablature blocks
	 * @param outElement {string or DOM} Either: (string) the Id to a DOM element, or DOM element handle where the canvas/converted text will be placed.
	 * @return {void}
	 */
	var loadBlocks= function(text, outElement) {
		var lines = text.split('\n');
		var tab = [];
		for (var i in lines) {
			var s = ukeGeeks.toolsLite.trim(lines[i]);
			if (s.length > 0) {
				tab.push(s);
			}
			if (tab.length == NUM_STRINGS) {
				redraw(tab, outElement);
				tab = [];
			}
		}
	};

	/**
	 *
	 * @method redraw
	 * @param inTabs {string or array} Block of text or four element array containing tablbature to be parsed
	 * @param outElement {string or DOM} Either: (string) the Id to a DOM element, or DOM element handle where the canvas/converted text will be placed.
	 * @return {void}
	 */
	var redraw= function(inTabs, outElement) {
		// validate inTabs input...
		// TODO: instead of this if it's text pop the entire processing back to loadBlocks!
		inTabs = (typeof(inTabs) == 'string') ? (inTabs.split('\n')) : inTabs;
		if (inTabs.length < NUM_STRINGS) {
			return;
		}
		// read tabs
		var tabInfo = readTabs(inTabs);
		var labelOffset = (tabInfo.hasLabels) ? tab_settings.labelWidth : 0;
		var tabs = tabInfo.tabs;
		// how much space?
		var height = ((NUM_STRINGS - 1) * tab_settings.lineSpacing) + (2 * tab_settings.dotRadius) + tab_settings.bottomPadding;
		// prep canvas
		outElement = (typeof(outElement) == 'string') ? document.getElementById(outElement) : outElement;

		var ctx = ukeGeeks.canvasTools.addCanvas(outElement, getWidth(tabs, labelOffset, false), height);
		var pos = {
			x: tab_settings.dotRadius + labelOffset,
			y: 1 + tab_settings.dotRadius
		};
		var lineWidth = getWidth(tabs, labelOffset, true);
		drawStaff(ctx, pos, lineWidth, tab_settings);
		drawNotes(ctx, pos, tabs, tab_settings, lineWidth);
		if (tabInfo.hasLabels) {
			drawLabels(ctx, pos, tab_settings);
		}
	};

	/**
	 * This is insanely long, insanely kludgy, but, insanely, it works. This will read break a block of text into
	 * four lines (the ukulele strings), then find which frets are used by each. Then, the hard part, pack un-needed
	 * dashes. Once it's done that a 2-dimentional array (strings X frets) is created and returned.
	 * @method readTabs
	 * @private
	 * @param ukeStrings {array<string>} Block of tablbabure to be parsed
	 * @return {2-dimentional array}
	 */
	var readTabs= function(ukeStrings) {
		var hasLabels = ukeStrings[NUM_STRINGS - 1][0] == LAST_STRING_NAME;
		if (hasLabels) {
			stripStringLabels(ukeStrings);
		}
		var frets = getFretNumbers(ukeStrings);
		var symbols = getSymbols(ukeStrings);
		var minLength = getMinLineLength(ukeStrings);
		var guide = getGuideLine(symbols, minLength);

		return {
			tabs: getPackedLines(frets, symbols, guide, minLength),
			hasLabels: hasLabels
		};
	};

	/**
	 * @method getWidth
	 * @private
	 * @param tabs {2Darray}
	 * @param labelOffset {int}
	 * @param isTruncate {bool} If TRUE returns the length of the line, allowing for a terminating "|" character, othwrwise, it's for canvas width
	 * @return {int}
	 */
	var getWidth= function(tabs, labelOffset, isTruncate) {
		if (!isTruncate) {
			return (tab_settings.noteSpacing * tabs[0].length) + labelOffset + tab_settings.dotRadius;
		}

		var len = tabs[0].length;
		var plusDot = tab_settings.dotRadius;
		if (tabs[0][len - 1] == '|') {
			// TODO: too much??? retest
			len -= 1;
			plusDot = 0;
		}

		return tab_settings.noteSpacing * len + labelOffset + plusDot;
	};

	/**
	 * Processes ukeStrings stripping the first character from each line
	 * @method stripStringLabels
	 * @private
	 * @param ukeStrings {array<string>}
	 * @return {void}
	 */
	var stripStringLabels= function(ukeStrings) {
		for (var i = 0; i < NUM_STRINGS; i++) {
			ukeStrings[i] = ukeStrings[i].substr(1);
		}
	};

	/**
	 * Finds the frets in used for each line. In other words, ignoring
	 * spacers ("-" or "|") this returns arrays of numbers, the frets
	 * in use, for each line.
	 * @method getFretNumbers
	 * @private
	 * @param ukeStrings {array<string>}
	 * @return {void}
	 */
	var getFretNumbers= function(ukeStrings) {
		// first, get the frets
		var reInts = /([0-9]+)/g;
		var frets = [];
		for (var i = 0; i < NUM_STRINGS; i++) {
			frets[i] = ukeStrings[i].match(reInts);
		}
		return frets;
	};

	/**
	 * Returns array of the strings with placeholders instead of the numbers.
	 * This helps us pack because "12" and "7" now occupy the same space horizontally.
	 * @method getSymbols
	 * @private
	 * @param ukeStrings {array<string>}
	 * @return {void}
	 */
	var getSymbols= function(ukeStrings) {
		// convert to symbols
		var reDoubles = /([0-9]{2})/g;
		var reSingle = /([0-9])/g;
		var symbols = [];
		// TODO: verify why using NUM_STRINGS instead of ukeStrings.length (appears in other methods, again, do you recall why?)
		for (var i = 0; i < NUM_STRINGS; i++) {
			symbols[i] = ukeStrings[i].replace(reDoubles, '-*');
			symbols[i] = symbols[i].replace(reSingle, '*');
		}
		return symbols;
	};

	/**
	 * Run through all of the strings (array) and return the length of the shortest one.
	 * would prefer the max length, but then I'd need to pad the shorter ones and ... well, it's complicated.
	 * this gets a TODO: get max!
	 * @method getMinLineLength
	 * @private
	 * @param ukeStrings {array<string>}
	 * @return {void}
	 */
	var getMinLineLength = function(ukeStrings){
		var minLength = 0;
		var line;
		var re = /-+$/gi;

		for (var i = 0; i < ukeStrings.length; i++) {
			line = ukeStrings[i].trim().replace(re, '');
			if (line.length > minLength){
				minLength = line.length;
			}
		}
		return minLength;
	};

	/**
	 * OK, having created symbolic representations for the lines in earlier steps
	 * here we go through and "merge" them into a single, master "guide" -- saying
	 * "somewhere on this beat you'll pluck (or not) one note". This normalized
	 * guide will be the master for the next step.
	 * @method getGuideLine
	 * @private
	 * @param symbols {undefined}
	 * @param minLength {int}
	 * @return {void}
	 */
	var getGuideLine= function(symbols, minLength) {
		// Build a master pattern "guide" and eliminate double dashes
		var guide = '';
		for (var i = 0; i < minLength; i++) {
			if (symbols[0][i] == '|') {
				guide += '|';
			}
			else {
				// TODO: assumes 4 strings, use NUM_STRINGS
				guide += ((symbols[0][i] == '*') || (symbols[1][i] == '*') || (symbols[2][i] == '*') || (symbols[3][i] == '*')) ? '*' : '-';
			}
		}
		var reDash = /--/g;
		guide = guide.replace(reDash, '- ');
		reDash = / -/g;
		var lastGuide = guide;
		while (true) {
			guide = guide.replace(reDash, '  ');
			if (guide == lastGuide) {
				break;
			}
			lastGuide = guide;
		}
		return guide;
	};

	/**
	 * Using the packed "guide" line we loop over the strings, rebuilding each string
	 * with either a space, measure marker, or the note -- as an integer! Now the frets
	 * are the same regardless of whether they are single or double digit numbers:
	 * a "12" occupies no more horizontal space than a "5".
	 * @method getPackedLines
	 * @private
	 * @param frets {undefined}
	 * @param symbols {undefined}
	 * @param guide {undefined}
	 * @param minLength {int}
	 * @return {void}
	 */
	var getPackedLines= function(frets, symbols, guide, minLength) {
		// pack it!
		var packed = [],
		chrNote = '', // a temp variable to hold the 'note'
		guideIdx, // loop index for guide string
		stringIdx, // loop index for instrument's strings (uke's 4)
		lineIdx,  // index to single line within packed array (along a string)
		fretCount; // fret marker counter

		for (stringIdx = 0; stringIdx < NUM_STRINGS; stringIdx++) {
			packed.push([]);
		}

		for (stringIdx = 0; stringIdx < NUM_STRINGS; stringIdx++) { // loop over lines
			lineIdx = 0;
			fretCount = 0;
			for (guideIdx = 0; guideIdx < minLength; guideIdx++) { // loop over guide
				if (guide[guideIdx] != ' ') {
					if (symbols[stringIdx][guideIdx] == '*') {
						chrNote = frets[stringIdx][fretCount];
						fretCount++;
					}
					else {
						chrNote = ((guide[guideIdx] == '|')) ? '|' : '-';
					}
					packed[stringIdx][lineIdx] = chrNote;
					lineIdx++;
				}
			}
		}
		return packed;
	};

	/**
	 * Create the staff -- really the four tablature strings
	 * @method drawStaff
	 * @private
	 * @param ctx {canvasContext} Handle to active canvas context
	 * @param pos {xyPos} JSON (x,y) position
	 * @param length {int} Length in pixels
	 * @param settings {settingsObj}
	 * @return {voie}
	 */
	var drawStaff= function(ctx, pos, length, settings) {
		var offset = settings.lineWidth / 2;
		var x = pos.x + offset;
		var y = pos.y + offset;
		ctx.beginPath();
		for (var i = 0; i < NUM_STRINGS; i++) {
			ctx.moveTo(x, y);
			ctx.lineTo(x + length, y);
			y += settings.lineSpacing;
		}
		ctx.strokeStyle = settings.lineColor;
		ctx.lineWidth = settings.lineWidth;
		ctx.stroke();
		ctx.closePath();
	};

	/**
	 * Loop over the normalized tabs emitting the dots/fingers on the passed in canvase
	 * @method drawNotes
	 * @private
	 * @param ctx {canvasContext} Handle to active canvas context
	 * @param pos {xyPos} JSON (x,y) position
	 * @param tabs {array} Array of normalized string data -- space (character) or int (fret number)
	 * @param settings {settingsObj}
	 * @param lineWidth {int} Length in pixels (used only when line ends with a measure mark)
	 * @return {void}
	 */
	var drawNotes= function(ctx, pos, tabs, settings, lineWidth) {
		var c;
		var center = {
			x: 0,
			y: pos.y
		};

		for (var strIdx in tabs) {
			if (strIdx > 3) {
				return;
			}
			center.x = pos.x;
			for (var chrIdx in tabs[strIdx]) {
				c = tabs[strIdx][chrIdx];
				// (c != '-'){
				if (c == '|') {
					var jnum = parseInt(chrIdx, 10);
					var heavy = (((jnum + 1) < (tabs[strIdx].length - 1)) && (tabs[strIdx][jnum + 1] == '|')) || ((jnum == (tabs[strIdx].length - 1)) && (tabs[strIdx][jnum - 1] == '|'));
					drawMeasure(ctx, {
						x: (chrIdx == tabs[strIdx].length - 1) ? pos.x + lineWidth : center.x,
						y: pos.y
					}, settings, heavy);
				}
				else if (!isNaN(c)) {
					ukeGeeks.canvasTools.drawDot(ctx, center, settings.dotRadius, settings.dotColor);
					ukeGeeks.canvasTools.drawText(ctx, {
						x: center.x,
						y: (center.y + 0.5 * settings.dotRadius)
					}, c, settings.textFont, settings.textColor);
				}
				center.x += settings.noteSpacing;
			}
			center.y += settings.lineSpacing;
		}
	};

	/**
	 * Draws a vertical "measure" demarcation line
	 * @method drawMeasure
	 * @private
	 * @param ctx {canvasContext} Handle to active canvas context
	 * @param pos {xyPos} JSON (x,y) position
	 * @param settings {settingsObj}
	 * @param heavy {bool} if TRUE hevy line
	 * @return {void}
	 */
	var drawMeasure= function(ctx, pos, settings, heavy) {
		var offset = settings.lineWidth / 2;
		ctx.beginPath();
		ctx.moveTo(pos.x + offset, pos.y);
		ctx.lineTo(pos.x + offset, pos.y + (NUM_STRINGS - 1) * settings.lineSpacing);
		ctx.strokeStyle = settings.lineColor;
		ctx.lineWidth = (heavy ? 4.5 : 1) * settings.lineWidth;
		ctx.stroke();
		ctx.closePath();
	};

	/**
	 * Adds the string letters on the left-side of the canvas, before the tablature string lines
	 * @method drawLabels
	 * @private
	 * @param ctx {canvasContext} Handle to active canvas context
	 * @param pos {xyPos} JSON (x,y) position
	 * @param settings {settingsObj}
	 * @return {void}
	 */
	var drawLabels= function(ctx, pos, settings) {
		// ['A','E','C','G'];
		var labels = ukeGeeks.settings.tuning.slice(0).reverse();
		for (var i = 0; i < NUM_STRINGS; i++) {
			ukeGeeks.canvasTools.drawText(ctx, {
				x: 1,
				y: (pos.y + (i + 0.3) * settings.lineSpacing)
			}, labels[i], settings.labelFont, settings.lineColor, 'left');
		}
	};

	/* return our public interface */
	return {
		init: init,
		replace: replace
	};
};

;/**
 * Singleton to correct overlapping chord names/diagrams in songs rendered by UGS
 * @class overlapFixer
 * @namespace ukeGeeks
 * @project UkeGeeks' Scriptasaurus
 * @singleton
 */
ukeGeeks.overlapFixer = (function() {

	// private
	// ---------------------------
	var _public = {};

	/**
	 * returns TRUE if Box A overlaps Box B. Detailed horizontal check, we "cheat" the
	 * vertical check by assuming that tops must be equal to collide (a simplification
	 * over a full height check.)
	 * @method checkOverlap
	 * @param  {object} "a" box
	 * @param  {object} "b" box
	 * @return {boolean}
	 */
	var checkOverlap = function(a, b) {
		// "cheat" vertical check
		if (a.top != b.top) {
			return false;
		}

		if ((b.left > a.right) || (b.right < a.left)) {
			//overlap not possible
			return false;
		}
		if ((b.left > a.left) && (b.left < a.right)) {
			return true;
		}
		if ((b.right > a.left) && (b.right < a.right)) {
			return true;
		}
		return false;
	};


	/**
	 * returns object with width and left & right offsets
	 * @method getBox
	 * @param  {DOM_element} element to be measured
	 * @return {object}
	 */
	var getBox = function(ele) {
		var box = getOffsets(ele);
		box.width = getWidth(ele);

		// due to how CSS & HTML is defined it's possible that the <em> wrapping the
		// chord name is actually wider than the <strong>, let's check.
		// BTW: this will happen on the "mini-chord diagram" option
		var em = ele.getElementsByTagName('em')[0];
		if (em) {
			var emWidth = getWidth(em);
			if (emWidth > box.width) {
				//console.log('box strong.width: ' + box.width + 'px, em.width: ' + emWidth +'px');
				box.width = emWidth + 2;
			}
		}

		box.right = box.left + box.width;
		return box;
	};

	/**
	 * source: http://www.cjboco.com/blog.cfm/post/determining-an-elements-width-and-height-using-javascript/
	 * @method getWidth
	 * @param  {DOM_element} element to be measured
	 * @return {int}
	 */
	var getWidth = function(ele) {
		if (typeof ele.clip !== "undefined") {
			return ele.clip.width;
		}

		return (ele.style.pixelWidth) ? ele.style.pixelWidth : ele.offsetWidth;
	};

	/**
	 * Returns JSON with left, right, top, and width properties. ONLY left and top are calculate,
	 * width & right need to be added later.
	 * source: http://stackoverflow.com/questions/442404/dynamically-retrieve-the-position-x-y-of-an-html-element
	 * @method getOffsets
	 * @param  {DOM_element} element to be measured
	 * @return {JSON}
	 */
	var getOffsets = function(ele) {
		var box = {
			top: 0,
			left: 0,
			right: 0,
			width: 0
		};

		while (ele && !isNaN(ele.offsetLeft) && !isNaN(ele.offsetTop)) {
			box.left += ele.offsetLeft - ele.scrollLeft;
			box.top += ele.offsetTop - ele.scrollTop;
			ele = ele.offsetParent;
		}

		return box;
	};


	/**
	 * checks (and fixes if problem is presetn) two code tags
	 * @method checkChords
	 * @param  {[DOM_element]} codeA [description]
	 * @param  {[DOM_element]} codeB [description]
	 * @return {void}
	 */
	var checkChords = function(codeA, codeB) {
		var strongA = codeA.getElementsByTagName('strong')[0];
		var strongB = codeB.getElementsByTagName('strong')[0];

		if (!strongA || !strongB) {
			return;
		}

		var boxA = getBox(strongA);
		var boxB = getBox(strongB);

		if (checkOverlap(boxA, boxB)) {
			var width = boxA.right - boxB.left + 1;
			codeA.style.paddingRight = (width < 1 ? 1 : width) + 'px';
		}
	};

	/**
	 * Runs through the element looking for UkeGeek chords (based on HTML) and
	 * adjust the horizontal spacing if any of the chords overlap.
	 * @method Fix
	 * @param  {DOM_element} element containing the UGS HTML song
	 */
	_public.Fix = function(ele) {
		var i,
			elements = ele.getElementsByTagName('code');

		for (i = 0; i < elements.length; i++) {
			elements[i].style.paddingRight = '0px';
		}

		for (i = 0; i < (elements.length - 1); i++) {
			checkChords(elements[i], elements[i + 1]);
		}
	};

	return _public;
})();
;/**
 * Finds page HTML elements & creates ukeGeek objects;
 * Reads song text, parses, draws choard diagrams.
 *
 * @class scriptasaurus
 * @namespace ukeGeeks
 * @static
 * @singleton
 */
ukeGeeks.scriptasaurus = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type {Object}
	 */
	var _public = {};

	/**
	 * Preps this class for running
	 * @method init
	 * @param isIeFamily {bool} TRUE if UserAgent (Browser to you and me) is Internet Explorer
	 * @return {void}
	 */
	_public.init = function(isIeFamily) {
		var defs = ukeGeeks.definitions;

		ukeGeeks.settings.environment.isIe = isIeFamily;
		// TODO: known problem -- need to preload Sorprano chord libarary then we can retune if needed
		defs.addInstrument(defs.sopranoUkuleleGcea);
		defs.useInstrument(defs.instrument.sopranoUke);
		if (ukeGeeks.settings.defaultInstrument != defs.instrument.sopranoUke) {
			defs.useInstrument(ukeGeeks.settings.defaultInstrument);
		}
	};

	/**
	 * Runs all Scriptasaurus methods using the element Ids defined in the settings class.
	 * This is your "Do All". See data.song for structure.
	 * @method run
	 * @return {songObject}
	 */
	_public.run = function() {
		//console.log('run (Classic Mode)');
		var handles = _getHandlesFromId();
		if (!handles || !handles.diagrams || !handles.text || !handles.wrap) {
			return null;
		}
		_errList = [];
		var song = _runSong(handles);
		showErrors(_errList[0]);
		return song;
	};

	/**
	 * Same as "run" except runs using class names, this allows you to have multiple songs on a single page.
	 * @method runByClasses
	 * @return {Array of songObject}
	 */
	_public.runByClasses = function() {
		var songs = [];
		var songWraps = ukeGeeks.toolsLite.getElementsByClass(ukeGeeks.settings.wrapClasses.wrap);
		for (var i = 0; i < songWraps.length; i++) {
			var handles = _getHandlesFromClass(songWraps[i]);
			if (handles === null) {
				continue;
			}
			songs.push(_runSong(handles));
		}
		return songs;
	};

	/**
	 * Is this really nececessary?
	 * @method setTuningOffset
	 * @param offset {int} (optional) default 0. Number of semitones to shift the tuning. See ukeGeeks.definitions.instrument.
	 */
	_public.setTuningOffset = function(offset) {
		ukeGeeks.definitions.useInstrument(offset);
	};

	var _errList = [];
	// song

	/**
	 *
	 * @method _runSong
	 * @private
	 * @param handles {ukeGeeks.data.htmlHandles}
	 * @return {songObj}
	 */
	var _runSong = function(handles) {
		// console.log('run Song');

		// read Music, find chords, generate HTML version of song:
		var cpm = new ukeGeeks.cpmParser();
		cpm.init();
		var song = cpm.parse(handles.text.innerHTML);
		ukeGeeks.definitions.replace(song.defs);

		var chrdPrsr = new ukeGeeks.chordParser();
		chrdPrsr.init();
		handles.text.innerHTML = chrdPrsr.parse(song.body);
		song.chords = chrdPrsr.getChords();

		// Draw the Chord Diagrams:
		var painter = new ukeGeeks.chordPainter();
		painter.init(handles);
		painter.show(song.chords);
		// Show chord diagrams inline with lyrics
		if (ukeGeeks.settings.inlineDiagrams) {
			ukeGeeks.toolsLite.addClass(handles.wrap, 'ugsInlineDiagrams');
			painter.showInline(song.chords);
		}

		// Do Tablature:
		var tabs = new ukeGeeks.tabs();
		tabs.init();
		tabs.replace(handles.text);

		// error reporting:
		_errList.push(painter.getErrors());

		var container = handles.wrap;
		if (container) {
			ukeGeeks.toolsLite.setClass(container, 'ugsNoChords', !song.hasChords);
		}

		if (ukeGeeks.settings.opts.autoFixOverlaps) {
			ukeGeeks.overlapFixer.Fix(handles.text);
		}

		// done!
		return song;
	};

	/**
	 * Shows a JavaScript alert box containing list of unknown chords.
	 * @method showErrors
	 * @return {void}
	 */
	var showErrors = function(errs) {
		if (errs.length < 1) {
			return;
		}

		//console.log(typeof(errs[0]));
		var s = '';
		for (var i = 0; i < errs.length; i++) {
			s += (s.length > 0) ? ', ' : '';
			s += errs[i];
		}
		//alert('Forgive me, but I don\'t know the following chords: ' + s);
	};

	/**
	 *
	 * @method _getHandlesFromClass
	 * @private
	 * @param wrap {domElement}
	 * @return {ukeGeeks.data.htmlHandles}
	 */
	var _getHandlesFromClass = function(wrap) {
		var diagrams = ukeGeeks.toolsLite.getElementsByClass(ukeGeeks.settings.wrapClasses.diagrams, wrap);
		var text = ukeGeeks.toolsLite.getElementsByClass(ukeGeeks.settings.wrapClasses.text, wrap);
		if ((diagrams === undefined) || (diagrams.length < 1) || (text === undefined) || (text.length < 1)) {
			return null;
		}
		return new ukeGeeks.data.htmlHandles(wrap, diagrams[0], text[0]);
	};

	/**
	 *
	 * @method _getHandlesFromId
	 * @private
	 * @return {ukeGeeks.data.htmlHandles}
	 */
	var _getHandlesFromId = function() {
		return new ukeGeeks.data.htmlHandles(
			document.getElementById(ukeGeeks.settings.ids.container),
			document.getElementById(ukeGeeks.settings.ids.canvas),
			document.getElementById(ukeGeeks.settings.ids.songText)
		);
	};

	return _public;
}());
</script>
<script type="text/javascript" id="../js/ugsEditorPlus.merged.js">
/**
 * <ul>
 * <li>Project: UkeGeeks' Song-a-matic Editor</li>
 * <li>Homepage: http://ukegeeks.com</li>
 * <li>Project Repository: https://github.com/buzcarter/UkeGeeks</li>
 * <li>Author: Buz Carter</li>
 * <li>Contact: buz@ukegeeks.com</li>
 * <li>Copyright: Copyright 2010-2014 Buz Carter.</li>
 * <li>License GNU General Public License (http://www.gnu.org/licenses/gpl.html)</li>
 * </ul>
 *
 * <h3>Overview</h3>
 * This library implments the UkeGeeks Scriptasaurus Song-a-matic editor functions, bridging the page UI and scriptasaurus methods.
 *
 * @module ugsEditorPlus
 * @main ugsEditorPlus
 **/
var ugsEditorPlus = window.ugsEditorPlus || {};
;/**
 * Options (Features) you can turn on or off. Where available defaults to values defined in UkeGeeks.settings
 *
 * @class options
 * @namespace ugsEditorPlus
 * @static
 * @singleton
 */
ugsEditorPlus.options = {
	/**
	 * If true attempts compatibility for versions of Microsoft Internet Explorer prior to IE9
	 * @example
	 *  Allowed values: true, false
	 * @property useLegacyIe
	 * @type Boolean
	 * @default false
	 */
	useLegacyIe: false,

	/**
	 * If true the Edit Song box is shown when the page loads; false hides it.
	 * @example
	 *  Allowed values: true, false
	 * @property showEditOnLoad
	 * @type Boolean
	 * @default true
	 */
//	showEditOnLoad: true,
	showEditOnLoad: false,

	/**
	 * Lyric's font size (pts)
	 * @example
	 *  Allowed values: 6, 6.5, 7, 7.5, 8, 8.5, 9, 10, 11, 12, 13, 14
	 * @property fontSize
	 * @type Number
	 * @default 12
	 */
	fontSize: 12,

	/**
	 * Reference diagram size expressed as a percentage (100% being max)
	 * @example
	 *  Allowed values: 40 ("tiny"), 65 ("small"), 80 ("medium"), 90 ("large"), 100 ("x-large")
	 * @property diagramSize
	 * @type Integer
	 * @default 100
	 */
	diagramSize: 100,

	/**
	 * Specify where reference diagrams should be show
	 * @example
	 *  Allowed values: left, top, or none
	 * @property diagramPosition
	 * @type Text
	 * @default left
	 */
	diagramPosition: "left",

	/**
	 * Specify how chord names within lyrics should be shown
	 * @example
	 *  Allowed values: inline, above, or miniDiagrams
	 * @property lyricStyle
	 * @type Text
	 * @default above
	 */
	lyricStyle: "above",

	/**
	 * Specify page width (mock paper)
	 * @example
	 *  Allowed values: letter, a4, screen
	 * @property paper
	 * @type Text
	 * @default letter
	 */
	paper: "screen",

	/**
	 * Theme shortname applied on page load.
	 * @example
	 *  Allowed values: frosty, jellyBean, justBlack, krampus, normal, notebook, pumpkin, reversed, western, zombie
	 * @property theme
	 * @type Text
	 * @default normal
	 */
	theme: "normal",

	/**
	 * Ukulele tuning ("instrument") for drawing diagrams.
	 * @example
	 *  Allowed values: soprano or baritone
	 * @property tuning
	 * @type Text
	 * @default soprano
	 */
	tuning: "soprano",

	/**
	 * Show/hide the square brackets around chord names within lyrics, ex: [Am]
	 * @example
	 *  Allowed values: true, false
	 * @property hideChordEnclosures
	 * @type Boolean
	 * @default see UkeGeeks.settings
	 */
	hideChordEnclosures: false,

	/**
	 * Order in which reference diagrams are sorted, either alphabetically (true) or order
	 * in which they appear within the song (false).
	 * @example
	 * Allowed values: true, false
	 * @property sortAlphabetical
	 * @type Boolean
	 * @default see UkeGeeks.settings
	 */
	sortAlphabetical: false,

	/**
	 * If TRUE chords in the "commonChords" list will be ignored (excluded from reference chord diagrams)
	 * @example
	 * Allowed values: true, false
	 * @property ignoreCommonChords
	 * @type Boolean
	 * @default see UkeGeeks.settings
	 */
	ignoreCommonChords: false,

	/**
	 * Array of chords to be ignored when drawing reference diagrams (if "ignoreCommonChords" is enabled)
	 * @example
	 *  (string or array of strings): as an  array of strings: ["A", "G"] or comma delimited list: "A, G"
	 * @property commonChords
	 * @type mixed
	 * @default see UkeGeeks.settings
	 */
	commonChords: []
};
;/**
 * Does the work by providing "doAction" method to respond to events (does not
 * attach event handlers); Modifes some page elements -- adjust CSS classes on page,
 * runs Scriptasaurus, etc.
 * @class actions
 * @namespace ugsEditorPlus
 * @module ugsEditorPlus
 */
ugsEditorPlus.actions = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @public
	 * @type JsonObject
	 */
	var _public = {};

	/**
	 * associative array/JSON handles to key/frequently accessed DOM Elements (see init()
	 * @property _ele
	 * @private
	 * @type {JSON}
	 */
	var _ele = {};

	// misc
	var _song = null;
	//
	var _originalSource = null;
	var _originalChords = [];

	var _regEx = {
		safe: /^([A-G][#b]?)(m|m6|7|m7|dim|maj7|6|sus2|sus4|aug|9)?$/
	};

	/**
	 * associative array/JSON of last click value used; intended to be used to prevent
	 * rerunning more expensize operations unnecessailry (when the value didn't actually change)
	 * @property _prevValues
	 * @type {JSON}
	 */
	var _prevValues = {
		'placement': 'above',
		'transpose': 'up_0'
	};

	/**
	 * Sets up this class; modifies form elements; attaches event handlers, etc
	 * @method init
	 * @public
	 */
	_public.init = function() {
		_ele = {
			songText: document.getElementById('ukeSongText'),
			songContainer: document.getElementById('ukeSongContainer'),
			cpmSource: document.getElementById('chordProSource'),
			scalableArea: document.getElementById('scalablePrintArea')
		};

		$(document).on('option:click', function(e, data) {
			doAction(data.action, data.value);
		});

		syncOptions(ugsEditorPlus.options);
	};

	/* ----------------------------------------------------------------------------------- *|
	|* Common "All Powerful" Helper Methods
	|* ----------------------------------------------------------------------------------- */

	/**
	 * Executes the requested Action using passed in Value
	 * @method doAction
	 * @private
	 * @param action {string} Action's name; must match one of those defined in the switch below
	 * @param value {string} Value used by Action (OK, a couple methods assume this is boolean/falsy)
	 */
	var doAction = function(action, value) {
		// actions that modify song's HTML or reference diagrams require rerunning Scriptasaurus
		var runRequired = false;

		switch (action) {
			case 'zoomFonts':
				doSetFontSize(value);
				break;
			case 'zoomDiagrams':
				doSetDiagramSize(value);
				break;
			case 'layout':
				doLayout(value);
				break;
			case 'placement':
				runRequired = doPlacement(value);
				break;
			case 'tuning':
				doTuning(value);
				runRequired = true;
				break;
			case 'colors':
				doSetTheme(value);
				runRequired = true;
				break;
			case 'transpose':
				doTranspose(value);
				break;
			case 'paper':
				doSetPageWidth(value);
				break;
			case 'showEnclosures':
				setEnclosureVisible(value);
				runRequired = true;
				break;
			case 'hideCommonChords':
				setIgnoreCommon(value);
				runRequired = true;
				break;
			case 'sortAlphabetical':
				setSortAlphabetical(value);
				runRequired = true;
				break;
			case 'setCommonChords':
				setCommonChordsList(value);
				runRequired = ukeGeeks.settings.opts.ignoreCommonChords;
				break;
			case 'update':
				doUpdate();
				break;
			default:
				console.log('Unrecognized ' + action + ' > ' + value);
		}

		if (runRequired) {
			_public.run();
		}
	};

	var syncOptions = function(options) {
		// direct menus
		doSetFontSize(options.fontSize);
		doSetDiagramSize(options.diagramSize);
		doLayout(options.diagramPosition);
		doSetPageWidth(options.paper);
		doSetTheme(options.theme);
		doTuning(options.tuning);
		doPlacement(options.lyricStyle);

		// advanced options
		setEnclosureVisible(!options.hideChordEnclosures);
		setIgnoreCommon(options.ignoreCommonChords);
		setCommonChordsList(options.commonChords);
		setSortAlphabetical(options.sortAlphabetical);
	};

	/**
	 * Rerun for new song text; updates UI
	 * @method doUpdate
	 * @private
	 */
	var doUpdate = function() {
		_public.run(true);
	};

	/**
	 * Rebuilds song, info, chord diagrams using current settings.
	 * @method run
	 * @param isDoBackup {bool} true forces backup; optional, default false.
	 */
	_public.run = function(isDoBackup) {
		isDoBackup = (arguments.length > 0) && isDoBackup;
		_ele.songText.innerHTML = '<pre>' + _ele.cpmSource.value + '</pre>';
		_song = ukeGeeks.scriptasaurus.run();

		if (_song.chords.length < 1) {
			ugsEditorPlus.autoReformat.run(_ele);
		}

		if (_song) {
			ugsEditorPlus.songUi.update(_song);

			// maintains last copy of USER edited song -- used for transpose etc
			if (isDoBackup || (_originalSource === null)) {
				_originalSource = _ele.cpmSource.value;
				_originalChords = _song.chords;
				var key = _song.key !== '' ? _song.key : (_song.chords.length < 1 ? '' : _song.chords[0]);
				resetTranspose(key);
			}
		}
	};

	/* ----------------------------------------------------------------------------------- *|
	|* Zoom Methods
	|* ----------------------------------------------------------------------------------- */

	/**
	 * Zooms (scales) fonts
	 * @method doSetFontSize
	 * @private
	 * @param value {string} point-size; value of the clicked value item
	 */
	var doSetFontSize = function(value) {
		var pt = parseFloat(value, 10);
		_ele.scalableArea.style.fontSize = pt + 'pt';
	};

	/**
	 * Zooms (scales) chord diagrams
	 * @method doSetDiagramSize
	 * @private
	 * @param value {string} percentage, integer between 0 and, well, 100?; value of the clicked value item
	 */
	var doSetDiagramSize = function(value) {
		var prct = parseInt(value, 10) / 100;
		// apologies for the magic number...
		var columnWidth = Math.round(prct * 225);

		var s = ugsEditorPlus.styles.getSheet('ugsEditorCss');
		var m = s.find('.scalablePrintArea .ugs-diagrams-wrap canvas');
		m.style.width = Math.round(prct * ukeGeeks.settings.fretBox.width) + 'px';
		m.style.height = Math.round(prct * ukeGeeks.settings.fretBox.height) + 'px';

		m = s.find('.scalablePrintArea .ugs-diagrams-wrap');
		m.style.width = columnWidth + 'px';

		m = s.find('.scalablePrintArea .ugs-source-wrap');
		m.style.marginLeft = (25 + columnWidth) + 'px';
	};

	/* ----------------------------------------------------------------------------------- *|
	|* Layout (Reference Diagram Position) Methods
	|* ----------------------------------------------------------------------------------- */

	/**
	 * Changes positions for Reference Chord Diagrams -- handled entirely via CSS classes
	 * @method doLayout
	 * @private
	 * @param value {string} value of the clicked value item
	 */
	var doLayout = function(value) {
		$('body')
			.toggleClass('diagramsOnTop', value == 'top')
			.toggleClass('diagramsOnSide', value == 'left')
			.toggleClass('ugsHideDiagrams', value == 'none');
	};

	/* ----------------------------------------------------------------------------------- *|
	|* Chord Name Placement Methods
	|* ----------------------------------------------------------------------------------- */

	/**
	 * Chord Name placement (&amp; "Mini-chord diagrams"). Returns true if Scriptasaurus should be rerun.
	 * @method doPlacement
	 * @private
	 * @param value {string} value of the clicked value item
	 * @return {Boolean}
	 */
	var doPlacement = function(value) {
		var isRunRequired = false;
		ukeGeeks.toolsLite.setClass(_ele.songContainer, 'ugsInline', (value == 'inline'));

		// NOTE: ugs already adds the "chord diagrams above" class based on setting,
		// BUT does NOT remove it!!!!
		var isMiniDiagrams = (value == 'miniDiagrams');
		if (!isMiniDiagrams) {
			ukeGeeks.toolsLite.removeClass(_ele.songContainer, 'ugsInlineDiagrams');
		}

		if (isMiniDiagrams || (_prevValues.placement == 'miniDiagrams')) {
			ukeGeeks.settings.inlineDiagrams = isMiniDiagrams;
			isRunRequired = true;
		}
		else if (!isMiniDiagrams && (_prevValues.placement != 'miniDiagrams')) {
			// we're jumping between "above" and "inline", either way we need to
			// manually fix the overlaps
			ukeGeeks.overlapFixer.Fix(_ele.songText);
		}

		_prevValues.placement = value;

		return isRunRequired;
	};

	/* ----------------------------------------------------------------------------------- *|
	|* Color Methods
	|* ----------------------------------------------------------------------------------- */

	/**
	 * Change the color scheme -- requires changing CSS Class and reruning (to regenerate reference chord diagrams)
	 * @method doSetTheme
	 * @private
	 * @param value {string} value of the clicked value item
	 */
	var doSetTheme = function(value) {
		ugsEditorPlus.themes.set(value);
	};

	/* ----------------------------------------------------------------------------------- *|
	|* Page Width Methods
	|* ----------------------------------------------------------------------------------- */

	/**
	 * (option dialog) changes body class, moving the right page edge
	 * @method doSetPageWidth
	 * @private
	 * @param value {string} currently selected option value
	 */
	var doSetPageWidth = function(value) {
		var opts = ['letter', 'a4', 'screen'];
		var $body = $('body');
		for (var i = 0; i < opts.length; i++) {
			$body.removeClass('pageWidth_' + opts[i]);
		}
		$body.addClass('pageWidth_' + value);
	};

	/* ----------------------------------------------------------------------------------- *|
	|* Instrument & Tuning Methods
	|* ----------------------------------------------------------------------------------- */

	/**
	 * Change the instrument (tuning)
	 * @method doTuning
	 * @private
	 * @param value {string} value of the clicked value item
	 */
	var doTuning = function(value) {
		var tuning = ukeGeeks.definitions.instrument.sopranoUke,
			msg = 'Standard <strong>GCEA</strong> Soprano Ukulele';

		if (value == 'baritone') {
			tuning = ukeGeeks.definitions.instrument.baritoneUke;
			msg = 'Standard <strong>DGBE</strong> Baritone Ukulele';
		}

		$('#footTuningInfo').html(msg);
		ukeGeeks.scriptasaurus.setTuningOffset(tuning);
	};

	/**
	 * Parses Value to decide number of steps "up" or "down", then fires off transpose
	 * @method doTranspose
	 * @private
	 * @param value {string} value of the clicked value item
	 */
	var doTranspose = function(value) {
		var sign = value[0] == 'u' ? 1 : -1;
		var steps = parseInt(value[value.length - 1], 10);
		transpose(sign * steps);
	};

	/**
	 * Rebuilds song as "run", but first transposes chords
	 * @method transpose
	 * @param steps {int} number of semitones, +/-6
	 */
	var transpose = function(steps) {
		var safeChords = [],
			bad = '',
			i;

		// find "shiftable" chords
		for (i = 0; i < _originalChords.length; i++) {
			if (_regEx.safe.test(_originalChords[i])) {
				safeChords.push(_originalChords[i]);
			}
			else {
				bad += _originalChords[i] + ', ';
			}
		}

		if (bad.length > 0) {
			if (!confirm('Sorry, but some of your chords can\'t be transposed:\n' + bad + '\n\nDo you want to continue anyway?')) {
				return;
			}
		}

		var newChords = ukeGeeks.transpose.shiftChords(safeChords, steps);
		var s = _originalSource;
		var rEx;

		// "safe" (temp) rename chords (prepend noise "ugsxx_" so a renamed G will be distinguisable from a new G)
		for (i = 0; i < safeChords.length; i++) {
			rEx = new RegExp('\\[' + safeChords[i] + '\\]', 'g');
			s = s.replace(rEx, '[ugsxx_' + i + ']');
		}

		// final rename; placeholder names to desired names
		for (i = 0; i < newChords.length; i++) {
			rEx = new RegExp('\\[ugsxx_' + i + '\\]', 'g');
			s = s.replace(rEx, '[' + newChords[i] + ']');
		}

		// find & replace {key} command (if present)
		rEx = /^\s*\{\s*(key|k)\s*:\s*(\S*?)\s*\}\s*$/im;
		if (rEx.test(s)) {
			var m = s.match(rEx);
			var key = m[2];
			if ((key !== '') && _regEx.safe.test(key)) {
				s = s.replace(rEx, m[0].replace(key, ukeGeeks.transpose.shift(key, steps)));
			}
		}

		// manipulations done, ready to...
		_ele.cpmSource.value = s;
		_public.run();

	};

	/**
	 * Sets Transpose menu's selected value to "Original"; adds example chord names
	 * @method resetTranspose
	 * @private
	 * @param keyChord {string}
	 */
	var resetTranspose = function(keyChord) {
		var ul = document.getElementById('transposeOptions');
		var items = ul.getElementsByTagName('li');
		var sample;
		var steps = -6;

		_prevValues['transpose'] = 'up_0';

		ugsEditorPlus.submenuUi.resetTransposeLabel();

		for (var i = 0; i < items.length; i++) {
			ukeGeeks.toolsLite.removeClass(items[i], 'checked');
			sample = (keyChord.length < 1) ? '' : ukeGeeks.transpose.shift(keyChord, steps);
			items[i].getElementsByTagName('em')[0].innerHTML = sample;
			if (steps === 0) {
				ukeGeeks.toolsLite.addClass(items[i], 'checked');
			}
			steps++;
		}
	};

	/* ----------------------------------------------------------------------------------- *|
	|* "Other Options" Methods
	|* ----------------------------------------------------------------------------------- */
	// a grab bag of single, odd switches... mea culpa

	/**
	 * (option dialog) change whether to show/hide the bracket characters
	 * @method setEnclosureVisible
	 * @private
	 * @param isVisible {bool}
	 */
	var setEnclosureVisible = function(isVisible) {
		ukeGeeks.settings.opts.retainBrackets = isVisible;
	};

	/**
	 * (option dialog) change whether reference diagrams are sorted alphabetically or by their "song order"
	 * @method setSortAlphabetical
	 * @private
	 * @param isAlphabetical {bool}
	 */
	var setSortAlphabetical = function(isAlphabetical) {
		ukeGeeks.settings.opts.sortAlphabetical = isAlphabetical;
	};

	/**
	 * "Ignore Common" was checked, need to update master chord diagrams
	 * @method setIgnoreCommon
	 * @private
	 * @param isIgnore {bool}
	 */
	var setIgnoreCommon = function(isIgnore) {
		ukeGeeks.settings.opts.ignoreCommonChords = isIgnore;
	};

	/**
	 * the list of common chords has been change; update UGS setting
	 * @method setCommonChordsList
	 * @private
	 * @param chordList {mixed} Either string, as comma seperated values list, or array of chord names
	 * @return {void}
	 */
	var setCommonChordsList = function(chordList) {
		if (typeof chordList == 'string') {
			var inputList = chordList.split(/[ ,]+/);
			var cleanList = [];

			for (var i = 0; i < inputList.length; i++) {
				var c = ukeGeeks.toolsLite.trim(inputList[i]);
				if (c.length > 0) {
					cleanList.push(c);
				}
			}

			chordList = cleanList;
		}

		ukeGeeks.settings.commonChords = chordList;
	};

	// ---------------------------------------
	// return public interface "JSON handle"
	// ---------------------------------------
	return _public;

}());
;/**
 * Handles transfering the easy text bits of a Song -- title, artist, etc -- to the page.
 * @class songUi
 * @namespace ugsEditorPlus
 */
ugsEditorPlus.songUi = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	/**
	 * Sets an element's Inner HTML and sets visibility based on whether the value is empty (or not)
	 * @method trySet
	 * @private
	 * @param id {string} element's Id
	 * @param value {string} content value
	 */
	var trySet = function(id, value){
		var hasValue = value && (value.length > 0);
		var h = document.getElementById(id);
		if (!h){
			return;
		}
		h.innerHTML = hasValue ? value : "";
		h.style.display = hasValue ? 'block' : 'none';
	};

 /**
	 * Update various HTML parts (H1 &amp; H2 etc.) using TEXT values of Song
	 * @method updateUi
	 * @private
	 * @param song {Song(Object)}
	 */
	_public.update = function(song){
		var h = document.getElementById('songTitle');
		h.innerHTML = (song.title.length > 0) ? song.title : 'Untitled-Song';

		trySet('songArtist', song.artist);
		trySet('songAlbum', song.album);
		trySet('songSubtitle', song.st);

		h = document.getElementById('songMeta');
		if (!song.ugsMeta || (song.ugsMeta.length < 1)){
			h.style.display = 'none';
		}
		else {
			var s = '';
			for(var i = 0; i < song.ugsMeta.length; i++){
				s += '<p>' + song.ugsMeta[i] + '</p>';
			}
			h.innerHTML = s;
			h.style.display = 'block';
		}
	};

	// ---------------------------------------
	// return public interface "JSON handle"
	// ---------------------------------------
	return _public;

}()
);

;/**
 * from: http://www.javascriptkit.com/dhtmltutors/externalcss.shtml
 * @class styles
 * @namespace ugsEditorPlus
 * @singleton
 */
ugsEditorPlus.styles = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {
		Rules: null
	};

	var _sheet = null;

	_public.getSheet = function(title) {
		_sheet = _getSheet(title);
		_public.Rules = _getRules();
		return this;
	};

	var _getSheet = function(title) {
		for (var i = 0; i < document.styleSheets.length; i++) {
			if (document.styleSheets[i].title == title) {
				return document.styleSheets[i];
			}
		}
		return null;
	};

	var _getRules = function() {
		if (_sheet == null) {
			return [];
		}
		return _sheet.cssRules ? _sheet.cssRules : _sheet.rules;
	};

	_public.find = function(selector) {
		selector = selector.toLowerCase();
		for (var i = 0; i < _public.Rules.length; i++) {
			if (!_public.Rules[i].selectorText) {
				continue;
			}
			if (_public.Rules[i].selectorText.toLowerCase() == selector) {
				return _public.Rules[i];
			}
		}
		return null;
	};

	// ---------------------------------------
	// return public interface
	// ---------------------------------------
	return _public;

}());
;/**
 * Changes the song's color scheme ("theme") by changing both the applied body class
 * and the UkeGeek settings used to draw the diagrams.
 * @class themes
 * @namespace ugsEditorPlus
 * @singleton
 */
ugsEditorPlus.themes = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	/**
	 * available color schemes (see UkeGeeks.settings)
	 * @property _colorSchemes
	 * @type {JSON-Object}
	 */
	var _colorSchemes = {
		'normal': {
			name: 'Normal (white paper)',
			selectText: 'Normal colors (white paper)',
			description: 'Simple, legible text on white paper',
			song: {
				fretLines: '#003366',
				dots: '#ff0000',
				dotText: '#ffffff',
				text: '#000000',
				fretText: '#4a4a4a'
			},
			tabs: {
				lines: '#999999',
				dots: '#eaeaea',
				text: '#000000'
			}
		},

		'reversed': {
			name: 'Reversed for projectors',
			selectText: 'Reversed colors (for projectors)',
			description: 'Light text on dark background',
			song: {
				fretLines: '#365F70',
				dots: '#FDD96F',
				dotText: '#000000',
				text: '#FF6040',
				fretText: '#999999'
			},
			tabs: {
				lines: '#365F70',
				dots: '#FDD96F',
				text: '#000000'
			}
		},

		'frosty': {
			name: 'Frostcicle',
			selectText: 'Frostcicle (cool blue)',
			description: 'Brrrr... icy cool blues',
			song: {
				fretLines: '#66B4CC',
				dots: '#332335',
				dotText: '#9FE1F9',
				text: '#0896FE',
				fretText: '#E3D8BA'
			},
			tabs: {
				lines: '#6699FF',
				dots: '#EFFCF9',
				text: '#00558E'
			}
		},

		'jellyBean': {
			name: 'Jelly Beans',
			selectText: 'Jelly Beans (vibrant)',
			description: 'Sugary, vibrant bowl of jelly beans!',
			song: {
				fretLines: '#49BC45',
				dots: '#FF9417',
				dotText: '#FCF49F',
				text: '#D20070',
				fretText: '#4a4a4a'
			},
			tabs: {
				lines: '#6699FF',
				dots: '#FFF9BA',
				text: '#75003E'
			}
		},

		'justBlack': {
			name: 'Just Black',
			selectText: 'Black (for laser printers)',
			description: 'No color, but black, best for B&W laser printers',
			song: {
				fretLines: '#cccccc',
				dots: '#000000',
				dotText: '#ffffff',
				text: '#000000',
				fretText: '#000000'
			},
			tabs: {
				lines: '#cccccc',
				dots: '#000000',
				text: '#ffffff'
			}
		},

		'krampus': {
			name: 'Gruss vom Krampus',
			selectText: 'Krampus (Ye Olde Christmas)',
			description: 'Seasons Greetin\'s, Happy Holidays, Merry Christmas, Krampus Nichte!',
			song: {
				fretLines: '#929867',
				dots: '#A22C27',
				dotText: '#EBD592',
				text: '#4F2621',
				fretText: '#4a4a4a'
			},
			tabs: {
				lines: '#B69C01',
				dots: '#E1EEC8',
				text: '#75003E'
			}
		},

		'western': {
			name: 'Out West',
			selectText: 'Out West (dust country)',
			description: 'Dusty Honky Tonk/Country/Western look',
			song: {
				fretLines: '#B5A679',
				dots: '#CF8300',
				dotText: '#ffffff',
				text: '#386571',
				fretText: '#4a4a4a'
			},
			tabs: {
				lines: '#697665',
				dots: '#F1E3C5',
				text: '#632424'
			}
		},

		'pumpkin': {
			name: 'Pumpkin Pie',
			selectText: 'Pumpkin Pie (fall colors)',
			description: 'Fall \'n Halloween \'n Jack o\'Lantern \'n Thanksgiving Fun',
			song: {
				fretLines: '#8E9A6C',
				dots: '#DA6328',
				dotText: '#FFEE4A',
				text: '#68391D',
				fretText: '#B14623'
			},
			tabs: {
				lines: '#BED379',
				dots: '#FFF4D8',
				text: '#B14623'
			}
		},

		'notebook': {
			name: 'Rock Notebook',
			selectText: 'Rock Notebook (marker)',
			description: 'A strong, hand-scrawled, and edgily unreliable look',
			song: {
				fretLines: '#747CAD',
				dots: '#1C0866',
				dotText: '#ffffff',
				text: '#B22000',
				fretText: '#A4A0B2'
			},
			tabs: {
				lines: '#A4A0B2',
				dots: '#F1E3C5',
				text: '#2E2ECC'
			}
		},

		'zombie': {
			name: 'Zombies!!!',
			selectText: 'Zombies!!!',
			description: 'Blood \'n gore for Halloween',
			song: {
				fretLines: '#9EB036',
				dots: '#E52501',
				dotText: '#FEDA79',
				text: '#798666',
				fretText: '#B14623'
			},
			tabs: {
				lines: '#602749',
				dots: '#F7F9EA',
				text: '#4F5F3E'
			}
		}

	};

	var setBody = function(themeName) {
		var $body = $('body');
		// see: http://stackoverflow.com/questions/921789/how-to-loop-through-javascript-object-literal-with-objects-as-members
		for (var key in _colorSchemes) {
			if (_colorSchemes.hasOwnProperty(key)) {
				$body.removeClass('theme-' + key);
			}
		}
		$body.addClass('theme-' + themeName);
	};

	/**
	 * Returns text to be deisplayed when the  specified theme is selected.
	 * @method  getDescription
	 * @param  {string} themeName
	 * @return {string}
	 */
	_public.getDescription = function(themeName) {
		return _colorSchemes[themeName].selectText;
	};

	/**
	 * Populates the UL (identified via CSS/jQuery selector) with the color scheme List Items (LIs)
	 * @method loadList
	 * @param {string} selector
	 * @param {string} selectedValue value that should be "checked"
	 */
	_public.loadList = function(selector, selectedValue) {
		var s = '';
		for (var key in _colorSchemes) {
			if (_colorSchemes.hasOwnProperty(key)) {
				var cssClass = (key == selectedValue) ? 'checked' : '';
				s += '<li class="' + cssClass + '"><a href="#' + key + '" title="' + _colorSchemes[key].description + '">' + _colorSchemes[key].name + '</a></li>';
			}
		}
		$(selector).html(s);
	};

	/**
	 * Sets body class and UkeGeeks settings to specified theme.
	 * @method set
	 * @param {string} themeName
	 */
	_public.set = function(themeName) {
		setBody(themeName);

		var c = _colorSchemes[themeName];
		ukeGeeks.settings.colors = c.song;
		ukeGeeks.settings.tabs.lineColor = c.tabs.lines;
		ukeGeeks.settings.tabs.dotColor = c.tabs.dots;
		ukeGeeks.settings.tabs.textColor = c.tabs.text;
	};

	// ---------------------------------------
	// return public interface
	// ---------------------------------------
	return _public;

}());
;/**
 * UI mechanics of the Other Options "dialog"'s checkboxes and input
 * fields (does NOT manage "pageWidth" since its standard submenu behavior
 * is already handled in that class)
 * @class optionsDlg
 * @namespace ugsEditorPlus
 */
ugsEditorPlus.optionsDlg = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	/**
	 * Sets up this class by attaching event handlers to form elements;
	 * @method init
	 * @public
	 */
	_public.init = function() {
		var ele,
			options = ugsEditorPlus.options;

		// Update Button
		document.getElementById('updateBtn').onclick = function() {
			triggerNotify('update', '');
			return false;
		};/*
		document.getElementById('chordProSource').onkeypress = function() {
			triggerNotify('update', '');
			return false;
		};
    */
		document.getElementById('chordProSource').onkeyup = function() {
			triggerNotify('update', '');
			return false;
		};/*
		document.getElementById('chordProSource').onclick = function() {
			triggerNotify('update', '');
			return false;
		};*/


		// show/hide square bracket (chord enclosure)
		ele = document.getElementById('chkEnclosures');
		ele.checked = options.hideChordEnclosures;
		ele.onclick = function() {
			// Boolean "isVisible"
			triggerNotify('showEnclosures', !this.checked);
		};

		// list of chord names to ignore
		ele = document.getElementById('commonChordList');
		ele.value = (typeof options.commonChords == 'string') ? options.commonChords : options.commonChords.join(", ");
		ele.onchange = function() {
			triggerNotify('setCommonChords', this.value);
		};

		// toggle order of reference diagrams
		ele = document.getElementById('chkSortAlpha');
		if (ele) {
			ele.checked = options.sortAlphabetical;
			ele.onclick = function() {
				triggerNotify('sortAlphabetical', this.checked);
			};
		}

		// toggle ignore common chords
		ele = document.getElementById('chkIgnoreCommon');
		ele.checked = options.ignoreCommonChords;
		ele.onclick = function() {
			// Boolean for "isIgnore"
			triggerNotify('hideCommonChords', this.checked);
		};

		// ugh! Event bubbling!
		$('.checkboxBlock label, input[type=checkbox]').click(function(e) {
			e.stopPropagation();
		});

		$('.overlay').draggable({
			handle: 'hgroup'
			//containParent: true
		});
	};

	var triggerNotify = function(action, value) {
		$.event.trigger('option:click', {
			action: action,
			value: value
		});
	};

	// ---------------------------------------
	// return public interface "JSON handle"
	// ---------------------------------------
	return _public;

}());
;var ugsEditorPlus = window.ugsEditorPlus || {};

/**
 * TK
 * @class reformat
 * @namespace ugsEditorPlus
 * @singleton
 */
ugsEditorPlus.reformat = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	var _hasChords = false;

	/**
	 *
	 * @property _enums
	 * @private
	 */
	var _enums = {
		lineTypes: {
			blank: 0,
			chords: 1,
			lyrics: 2,
			tabs: 3
		}
	};

	/**
	 * Line Object Class Definition (sets defaults)
	 * @class reformat.LineObj
	 * @private
	 * @constructor
	 * @for reformat
	 */
	var LineObj = function() {
		this.source = '';
		this.wordCount = 0;
		this.spaceCount = 0;
		this.words = [];
		this.chordCount = 0;
		this.lineType = _enums.lineTypes.blank;
	};

	var _re = {
		words: /\b(\S+)\b/gi,
		spaces: /(\s+)/g,
		leadingSpace: /(^\s+)/,
		chordNames: /\b[A-G][#b]?(m|m6|m7|m9|dim|dim7|maj7|sus2|sus4|aug|6|7|9|add9|7sus4)?\b/,
    /////////////////???????? masih kurang paham tentang regex ??????/////////////
    //chordNames: /\b[Aa-Zz/\////|]?[0-7,'.][|][]]?(p|p|m|mf|rit|rall|maj7|sus2|sus4|aug|6|7|9|add9|7sus4)?\b/,
    //////////////////??????????????///////////////////////////////////////////////////////////
		chrdBlock: /\b(\S+\s*)/g,
		tabs: /^\s*(\|{0,2}[A-Gb]?\|{0,2}[-x0-9|:]{4,})/
	};

	// Hal Leonard Uke Chord Finder:
	// + aug
	// o dim
	// -----------------
	// F Fm F+ Fdim
	// F5 Fadd9 Fm(add9) Fsus4
	// Fsus2 F6 Fm6 Fmaj7
	// Fmaj9 Fm7 Fm(maj7) Fm7b5
	// Fm9 Fm11 F7 Fsus4
	// F+7 F7b5 F9 F7#9
	// F7b9 F11 F13 Fdim7

	/**
	 * Accepts a text block, returns "ChordPro" text block with chord lines merged into lyric lines with chords enclosed in square-brackets (i.e. [Cdim])
	 * @method run
	 * @public
	 * @param text {string} songstring
	 * @return {string} ChordPro format text block
	 * @for reformat
	 */
	_public.run = function(text) {
		_hasChords = false;
		var lines = read(text);
		return merge(lines);
	};

	/**
	 * TRUE if one or more chord lines detected
	 * @method hasChords
	 * @return {bool}
	 */
	_public.hasChords = function() {
		return _hasChords;
	};

	/**
	 * Accepts a text block
	 * @method read
	 * @param text {string} string RAW song
	 * @return {array of Lines}
	 */
	var read = function(text) {
		var lineAry = [];
		text = text.replace('	', '    ');
		var lines = text.split('\n');
		for (var i = 0; i < lines.length; i++) {
			var words = lines[i].match(_re.words);
			var l = new LineObj();
			l.source = lines[i];
			if ((words != null) && (words.length > 0)) {
				l.wordCount = words.length;
				l.words = words;
				l.chordCount = countChords(words);
			}
			var spaces = lines[i].match(_re.spaces);
			if ((spaces != null) && (spaces.length > 0)) {
				l.spaceCount = spaces.length;
			}
			l.lineType = toLineType(l);
			lineAry.push(l);
		}
		return lineAry;
	};

	/**
	 * Guesses as to the line's tyupe --
	 * @method toLineType
	 * @param line {line}
	 * @return {_enums.lineTypes}
	 */
	var toLineType = function(line) {
		if ((line.spaceCount + line.wordCount) < 1) {
			return _enums.lineTypes.blank;
		}

		var tabs = line.source.match(_re.tabs);
		if (tabs != null) {
			return _enums.lineTypes.tabs;
		}

		var t = _enums.lineTypes.lyrics;
		if ((line.chordCount > 0) && (line.wordCount == line.chordCount)) {
			t = _enums.lineTypes.chords;
			_hasChords = true;
		}

		return t;
	};

	/**
	 * Looks for supported chords.
	 * @method countChords
	 * @param words {array of words}
	 * @return [int] number found
	 */
	var countChords = function(words) {
		var count = 0;
		for (var i = 0; i < words.length; i++) {
			if (words[i].match(_re.chordNames)) {
				count++;
			}
		}
		return count;
	};

	/**
	 * Return merged song -- chords embedded within lyrics
	 * @method merge
	 * @param lines {array of Lines}
	 * @return [string]
	 */
	var merge = function(lines) {
		var s = '';
		var thisLine, nextLine;
		for (var i = 0; i < lines.length;) {
			thisLine = lines[i];
			nextLine = lines[i + 1];
			i++;
			// If this line's blank or its the last line...
			if (!nextLine || (thisLine.lineType == _enums.lineTypes.blank)) {
				s += thisLine.source + '\n';
				continue;
			}

			// OK, we've complicated things a bit by adding tabs, so we'll handle this in a helper...
			if ((thisLine.lineType == _enums.lineTypes.tabs) && isTabBlock(lines, i)) {
				s += '{start_of_tab}\n' + thisLine.source.replace(_re.leadingSpace, '') + '\n' + nextLine.source.replace(_re.leadingSpace, '') + '\n' + lines[i + 1].source.replace(_re.leadingSpace, '') + '\n' + lines[i + 2].source.replace(_re.leadingSpace, '') + '\n' + '{end_of_tab}\n';
				i += 3;
				continue;
			}

			// finally, look for a "mergable" pair: this line is chords and the next is lyrics -- if not this we'll just output the current line
			if ((thisLine.lineType != _enums.lineTypes.chords) || (nextLine.lineType != _enums.lineTypes.lyrics)) {
				s += (thisLine.lineType == _enums.lineTypes.chords) ? wrapChords(thisLine.source) + '\n' : thisLine.source + '\n';
				continue;
			}

			// OK, if you're here it's because the current line is chords and the next lyrics, meaning, we're gonna merge them!
			i++;
			s += mergeLines(thisLine.source, nextLine.source) + '\n';
		}
		return s;
	};

	/**
	 * TRUE if we can make a Tab block using this and the following 3 linrd (we need a set of four tab lines followed by a non-tab line)
	 * @method isTabBlock
	 * @param lines {array of Lines}
	 * @param index {int} current line's index within line array
	 * @return [bool]
	 */
	var isTabBlock = function(lines, index) {
		if (index + 3 >= lines.length) {
			return false;
		}
		for (var i = index; i < index + 3; i++) {
			if (lines[i].lineType != _enums.lineTypes.tabs) {
				return false;
			}
		}
		return true;
	};

	/**
	 * Return a single line
	 * @method mergeLines
	 * @param chordLine {string} the line containing the chord names
	 * @param lyricsLine {string} the line of lyrics
	 * @return [string] merged lines
	 */
	var mergeLines = function(chordLine, lyricsLine) {
		while (lyricsLine.length < chordLine.length) {
			lyricsLine += ' ';
		}
		var s = '';
		var blocks = chordLine.match(_re.chrdBlock);
		var lead = chordLine.match(_re.leadingSpace);
		var offset = 0;
		if (lead) {
			s += lyricsLine.substr(offset, lead[0].length);
			offset = lead[0].length;
		}
		for (var j = 0; j < blocks.length; j++) {
			s += '[' + blocks[j].replace(_re.spaces, '') + ']' + lyricsLine.substr(offset, blocks[j].length);
			offset += blocks[j].length;
		}
		if (offset < lyricsLine.length) {
			s += lyricsLine.substr(offset, lyricsLine.length);
		}
		return s;
	};

	/**
	 * Wraps the words on the line within square brackets " C D " is returned as "[C] [D]"
	 * @method wrapChords
	 * @param chordLine {string} the line containing the chord names
	 * @return [string] each word of input line gets bracketed
	 */
	var wrapChords = function(chordLine) {
		var chords = chordLine.replace(_re.spaces, ' ').split(' ');
		var s = '';
		for (var i = 0; i < chords.length; i++) {
			if (chords[i].length > 0) {
				s += '[' + chords[i] + '] ';
			}
		}
		return s;
	};

	// ---------------------------------------
	// return public interface
	// ---------------------------------------
	return _public;

}());
;/**
 *
 * @class autoReformat
 * @namespace ugsEditorPlus
 */
ugsEditorPlus.autoReformat = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	/**
	 * associative array/JSON handles to key/frequently accessed DOM Elements (see init()
	 * @property _ele
	 * @type {JSON}
	 */
	var _ele = {};

	var _formatted;
	var _isDisabled = false;

	_public.run = function(elements) {
		if (_isDisabled) {
			return;
		}
		_ele = elements;
		_ele.reformatTextBox = document.getElementById('reformatSource');
		_ele.reformatDlg = document.getElementById('reformatDlg');

		document.getElementById('reformatYesBtn').onclick = function() {
			doOk();
			return false;
		};
		document.getElementById('reformatNoBtn').onclick = function() {
			doClose();
			return false;
		};

		// need to reset on reload
		var chk = document.getElementById('reformatDisable');
		chk.checked = false;
		chk.onclick = function() {
			doDisable(this.checked);
		};

		runNow();
	};

	var doOk = function() {
		_ele.cpmSource.value = _formatted;
		doClose();
		ugsEditorPlus.actions.run(true);
	};

	var doClose = function() {
		ukeGeeks.toolsLite.addClass(_ele.reformatDlg, 'isHidden');
	};

	var doDisable = function(isDisabled) {
		_isDisabled = isDisabled;
	};

	var runNow = function() {
		_formatted = ugsEditorPlus.reformat.run(_ele.cpmSource.value);
		_ele.reformatTextBox.innerHTML = _formatted;

		if (!ugsEditorPlus.reformat.hasChords()) {
			return;
		}

		ukeGeeks.toolsLite.removeClass(_ele.reformatDlg, 'isHidden');
	};

	// ---------------------------------------
	// return public interface "JSON handle"
	// ---------------------------------------
	return _public;

}());
;/**
 * Handles Top Menu UI -- includes the show/hide dialogs (why? cuz they're attached to top menu buttons)
 * Shows (a) dialongs (such as Edit) and (b) those tool-tippy options thingies.
 * @class topMenus
 * @namespace ugsEditorPlus
 */
ugsEditorPlus.topMenus = (function() {

	/**
	 * attaches events...
	 * @method _init
	 * @public
	 * @return {void}
	 */
	var _init = function() {
		// $('#ugsAppToolbar > ul a')
		$('#ugsAppToolbar > ul li').not('[data-dialog]').children('a').click(_onMenuItemClick);
		$('.showOptionsBox a').click(_onShowOptionsClick);

		$('#ugsAppToolbar > ul li[data-dialog]').click(_onShowDlgBtnClick);
		$('.closeBtn').click(_onCloseBtnClick);
		$('.resizeBtn').click(_onResizeBtnClick);
	};

	/**
	 * Click handler for nav items that are NOT attached to a dialog box.
	 * @method _onMenuItemClick
	 * @private
	 * @return {void}
	 */
	var _onMenuItemClick = function() {
		// the clicked anchor tag
		var $parent = $(this).parent();
		var isOpen = $parent.hasClass('active');
		_makeAllInactive();
		if (isOpen) {
			return;
		}
		$parent.addClass('active');
	};

	/**
	 * Deselects all items in app's top menu/nav bar (just removes active state from all items)
	 * @method _makeAllInactive
	 * @private
	 * @return {void}
	 */
	var _makeAllInactive = function() {
		$('#ugsAppToolbar > ul > li').removeClass('active');
	};

	/**
	 * Same as _makeAllInactive method PLUS closes any open drop down/arrow boxes.
	 * @method _closeAll
	 * @private
	 * @return {void}
	 */
	var _closeAll = function() {
		// hide any drop-down/arrow boxes currently open
		_makeAllInactive();
		$('.arrowBox').hide();
	};

	/**
	 * handles nav menu/toolbar click event. The data-dialog="X" attribute
	 * on the element assocaites the menu item with the dialog box (the
	 * box's id)
	 * @method _onShowDlgBtnClick
	 * @private
	 * @param e {event}
	 * @return {bool} false to kill event bubbling
	 */
	var _onShowDlgBtnClick = function(e) {
		_closeAll();

		// now show dialog associated with the clicked button
		var id = $(this).data('dialog');
		$('#' + id).fadeIn();

		// prevent event bubbling
		return false;
	};

	/**
	 * dialog box's close button's click handler. Hides the first parent
	 * with class.
	 * @method _onCloseBtnClick
	 * @private
	 * @param e {event}
	 * @return {bool} false to kill event bubbling
	 */
	var _onCloseBtnClick = function(e) {
		$(this).parents('.overlay').fadeOut();
		// prevent event bubbling
		return false;
	};

	var _onResizeBtnClick = function(e) {
		_closeAll();
		var dlg = $(this).parents('.overlay');
		ugsEditorPlus.resize.toggle(dlg);
		return false;
	};

	/**
	 * display a "tooltip" options dialog
	 * @method _onShowOptionsClick
	 * @private
	 * @param e {event}
	 * @return {bool} false to kill event bubbling
	 */
	var _onShowOptionsClick = function(e) {
		var id = $(this).attr('href');

		$('.arrowBox').not(id).hide();

		var $dlg = $(id);
		$dlg.find('dd').hide();
		$dlg.fadeToggle();

		ugsEditorPlus.submenuUi.reset($dlg);

		// prevent event bubbling
		return false;
	};

	// ---------------------------------------
	// return public interface
	// ---------------------------------------
	return {
		init: _init,
		makeAllInactive: _makeAllInactive
	};

}());
;/**
 * Wires up all the "pseudo-selects" (aka "dropdownlists") on a Tooltip-Dialog boxes on
 * the page; assumes consistent HTML (hello, jQuery)
 * TODO: Refactor -- quite brittle!
 * @class submenuUi
 * @namespace ugsEditorPlus
 */
ugsEditorPlus.submenuUi = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	var _open = null;

	/**
	 * attaches event handlers
	 * @method init
	 * @public
	 * @return {[type]} [description]
	 */
	_public.init = function() {
		ugsEditorPlus.themes.loadList('#colorPicker .pseudoSelect', ugsEditorPlus.options.theme);
		$('.enablePseudoSelects label').click(onLabelClick);
		$('.pseudoSelect li').click(onOptionClick);
		$('body').bind('click', closeAll);
		$('.arrowBox').click(doCollapseAllLists);

		syncOptions(ugsEditorPlus.options);
	};

	/**
	 * a list item has been clicked
	 * @method onOptionClick
	 * @param  {event} e
	 * @return {bool} false to kill event bubbling
	 */
	var onOptionClick = function(e) {
		var $optionItem = $(this);
		var value = stripHash($optionItem.children().attr('href'));

		// the element holding the "pseudo-select"
		var $select = $optionItem.parents('dd');
		var id = $select.attr('id');
		var actionName = $select.data('action');

		// a selection's been made so we hide the (sub) select list
		$('#' + id).hide();
		// ...and reset ("uncheck") all items and check ("highlight") this selected item
		setChecked($optionItem);

		onListActive(this, false);
		_open = null;

		// now bubble out the info -- update display to show selected value ...
		$('label[for=' + id + '] span').text(getLabelText(actionName, value, $optionItem));
		$('label[for=' + id + ']').parents('dt').removeClass('active');

		// lastly, execute the action
		$.event.trigger('option:click', {
			action: actionName,
			value: value
		});

		// prevent event bubbling
		return false;
	};

	var setChecked = function($item) {
		if (!$item) {
			//console.log('item for option not found');
			return;
		}
		$item.siblings().removeClass('checked');
		$item.addClass('checked');
	};

	var syncOptions = function(options) {
		var $item, id,
			map = [{
				action: 'zoomFonts',
				value: options.fontSize
			}, {
				action: 'zoomDiagrams',
				value: options.diagramSize
			}, {
				action: 'layout',
				value: options.diagramPosition
			}, {
				action: 'paper',
				value: options.paper
			}, {
				action: 'colors',
				value: options.theme
			}, {
				action: 'tuning',
				value: options.tuning
			}, {
				action: 'placement',
				value: options.lyricStyle
			}];

		for (var i = map.length - 1; i >= 0; i--) {
			$item = $('[data-action=' + map[i].action + '] a[href=#' + map[i].value + ']').closest('li');
			id = $item.closest('dd').attr('id');
			setChecked($item);
			$('label[for=' + id + '] span').text(getLabelText(map[i].action, map[i].value, $item));
		}
	};

	/**
	 * Label has been clicked, show associated options dialog box.
	 * Watch for 2-clicks on same label (should hide on second click)
	 * @method onLabelClick
	 * @param  {event} e
	 * @return {bool} false to kill event bubbling
	 */
	var onLabelClick = function(e) {
		var $thisLabel = $(this);
		var id = $thisLabel.attr('for');
		setActiveLabel($thisLabel);
		$('#' + id).show();
		onListActive(this, true);
		if (_open !== null) {
			$('#' + _open.id).hide();
		}
		if (_open !== null && _open.id == id) {
			_open = null;
		}
		else {
			_open = {
				"id": id
			};
		}

		// prevent event bubbling
		return false;
	};

	_public.reset = function($dlg) {
		$dlg.find('dt').removeClass('active');
		$dlg.find('.event-userSelecting').removeClass('event-userSelecting');
	};

	var setActiveLabel = function($label) {
		$label.closest('dl').children('dt').removeClass('active');
		$label.closest('dt').addClass('active');
	};

	/**
	 * trying prevent the options not being set from being too distractive --
	 * (trying and clearly failing)
	 * @method onListActive
	 * @param  {DOM-elemnt}  ele     [description]
	 * @param  {Boolean} isInUse [description]
	 * @return void
	 */
	var onListActive = function(ele, isInUse) {
		$(ele).parents('.enablePseudoSelects').toggleClass('event-userSelecting', isInUse);
	};

	/**
	 * @method  doCollapseAllLists
	 * @param  {event} e
	 * @return bool
	 */
	var doCollapseAllLists = function(e) {
		if ($(e.target).is('a')) {
			return;
		}
		$(this).find('dd').hide();
		_open = null;
		return false;
	};

	/**
	 * user clicked off the current dialog -- close 'em all
	 * @method closeAll
	 * @param  {event} e
	 */
	var closeAll = function(e) {
		$('.arrowBox').fadeOut(270);
		ugsEditorPlus.topMenus.makeAllInactive();
	};

	var stripHash = function(value) {
		return (value[0] == '#') ? value.substr(1) : value;
	};

	/* ----------------------------------------------------------------------------------- *|
	|* Display Text Methods
	|* ----------------------------------------------------------------------------------- */

	/**
	 * used to construct the descriptions for current values
	 * @property _descriptions
	 * @private
	 * @type {JSON}
	 */
	var _desriptions = {
		'zoomDiagrams': ['Tiny', 'Small', 'Medium', 'Large', 'Stupid Large'],
		'layout': ['Reference diagrams on left', 'Reference diagrams at top', 'No reference diagrams'],
		'placement': ['Chord names inline with lyrics', 'Chord names above lyrics', 'Names & diagrams above lyrics'],
		'tuning': ['Soprano (GCEA) tuning', 'Baritone (DBEA) tuning']
	};

	/**
	 * Builds a descriptor string of the current values for the pseudo-select labels
	 * @method getLabelText
	 * @param  {string} action
	 * @param  {string} value
	 * @param  {jQueryElement} $ele jQuery element that ...
	 * @return {string}
	 */
	var getLabelText = function(action, value, $ele) {
		var index = $ele.index();

		switch (action) {
			case 'paper':
				return 'Width ' + $ele.text();
			case 'zoomFonts':
				return 'Font size ' + value + 'pt';
			case 'zoomDiagrams':
				return _desriptions.zoomDiagrams[index] + ' diagrams';
			case 'colors':
				return ugsEditorPlus.themes.getDescription(value);
			case 'transpose':
				if (value == 'up_0') {
					return 'Original key';
				}
				var txt = $ele.text();
				return txt.replace(' ', ' steps - "') + '"';
			default:
				return _desriptions[action][index];
		}
	};

	_public.resetTransposeLabel = function() {
		$('label[for=transposePicker] span').text('Original key');
	};

	// ---------------------------------------
	// return public interface "JSON handle"
	// ---------------------------------------
	return _public;

}());
;/**
 * Creates a new song via AJAX.
 * Dependencies: jQuery
 * @class newSong
 * @namespace ugsEditorPlus
 */
ugsEditorPlus.newSong = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	/**
	 * lock-down the Submit (Update) button to avoid double posts;
	 * @attribute _isUpdating
	 * @type {Boolean}
	 */
	var _isUpdating = false;

	var _ajaxUri = '';

	_public.init = function(ajaxUri) {
		_ajaxUri = ajaxUri;

		$('#newSongBtn').click(function(e) {
			if (doValidate(this)) {
				doPost();
			}
		});

		$('#openNewDlgBtn').click(function(e) {
			resetFields();
			$('#newSongForm').fadeIn();
			$('#songTitle').focus();
		});

		$('#hideNewSongBtn').click(closeDlg);

		// handle escape key
		$('#newSongForm').bind('keydown', onEscape);

		var $spinner = $("#loadingSpinner");
		$spinner.hide();
		$(document)
			.ajaxStart(function() {
				$spinner.show();
				_isUpdating = true;
			})
			.ajaxStop(function() {
				$spinner.hide();
				_isUpdating = false;
			});
	};

	var doAjaxOk = function(data) {
		showErrors(data.HasErrors, data.Message);
		if (data.HasErrors) {
			return;
		}
		document.location.href = data.ContinueUri;
	};

	var doPost = function() {
		if (_isUpdating) {
			return;
		}

		var data = {
			'handler': 'ugs_new',
			'songTitle': $('#songTitle').val(),
			'songArtist': $('#songArtist').val()
		};

		$.ajax({
			url: _ajaxUri,
			type: "POST",
			dataType: 'json',
			data: JSON.stringify(data),
			success: function(data) {
				doAjaxOk(data);
			},
			error: function(data) {
				showErrors(true, 'Failed to create the song file.<br/>Please have your admin check the CPM directory permissions.');
			}
		});
	};

	var doValidate = function() {
		var $title = $('#songTitle');
		var title = $title.val().trim();
		$title.val(title);
		var ok = title.length > 2;
		showErrors(!ok, 'Song\'s title is required<br/><em>(you may change it later, must be at least 2 characters)</em>');
		return ok;
	};

	var showErrors = function(hasErrors, message) {
		var $err = $('#newSongForm .errorMessage');
		if (hasErrors) {
			$err.show().html(message);
			$('#songTitle').focus();
		}
		else {
			$err.hide();
		}
	};

	var closeDlg = function(e) {
		$('#newSongForm').fadeOut();
	};

	var resetFields = function() {
		$('#songTitle, #songArtist').val('');
	};

	var onEscape = function(e) {
		if (e.which == 27) {
			closeDlg();
		}
	};

	// ---------------------------------------
	// return public interface "JSON handle"
	// ---------------------------------------
	return _public;
})();
;/**
 * Updates an exising song via AJAX.
 * Dependencies: jQuery
 * @class updateSong
 * @namespace ugsEditorPlus
 */
ugsEditorPlus.updateSong = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	var _ajaxUri = '';
	var _filename = '';

	/**
	 * Name / Value pairs for jQuery selectors of HTML elements to be manipulated
	 * @property _selectors
	 * @type {JSON}
	 */
	var _selectors = {
		messageBox: '#messageBox',
		message: '#sourceFeedback',
		button: '#saveBtn',
		spinner: '#loadingSpinner',
		song: '#chordProSource'
	};

	/**
	 * lock-down the Submit (Update) button to avoid double posts;
	 * @property _isUpdating
	 * @type {Boolean}
	 */
	var _isUpdating = false;

	_public.init = function(ajaxUri, filename) {
		_ajaxUri = ajaxUri;
		_filename = filename;

		$(_selectors.button).click(function(event) {
			doUpdate();
			return false;
		});

		$(_selectors.messageBox).hide();
		$(document)
			.ajaxStart(function() {
				showBusy();
				_isUpdating = true;
			})
			.ajaxStop(function() {
				hideMessage();
				_isUpdating = false;
			});
	};

	var showBusy = function() {
		$(_selectors.message).hide().html();
		$(_selectors.messageBox).slideDown('fast');
		$(_selectors.spinner).show();
	};

	var showMessage = function(message) {
		$(_selectors.spinner).hide();
		$(_selectors.message).show().html(message);
	};

	var hideMessage = function() {
		$(_selectors.messageBox).delay(3000).fadeOut('slow');
	};

	var doUpdate = function() {
		if (_isUpdating) {
			return;
		}

		$(_selectors.message).show();

		var data = {
			'handler': 'ugs_update_81jr',
			'filename': _filename,
			'song': $(_selectors.song).val()
		};

		$.ajax({
			url: _ajaxUri,
			type: 'POST',
			dataType: 'json',
			contentType: "application/json; charset=utf-8",
			data: JSON.stringify(data),
			success: function(data) {
				doAjaxOk(data);
			},
			error: function(data) {
				alert('Encountered a problem saving your Song. Please copy your song to another program until this issue is resolved.');
			}
		});
	};

	var doAjaxOk = function(data) {
		//if (data.HasErrors)
		showMessage(data.Message);
	};

	// ---------------------------------------
	// return public interface "JSON handle"
	// ---------------------------------------
	return _public;
})();
;/**
 * Search on the song list page for songs.
 * Dependencies: jQuery and Twitter Bootstrap's typeahead plugin
 * Based on tutorial:
 * http://tatiyants.com/how-to-use-json-objects-with-twitter-bootstrap-typeahead/
 * @class typeahead
 * @constructor
 * @namespace ugsEditorPlus
 */
ugsEditorPlus.typeahead = function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	// private
	// ---------------------------
	var _keysList = [];
	var _keysToDetailsDict = {};

	var _scrubbedQuery = '';
	var _regex;
	var _words = [];

	var _re = {
		space: /\s{2,}/g,
		// everything except for alphanumeric gets nuked
		common: /([^a-z0-9]+)/gi,
		//treat quotes as invisible
		noise: /['`’-]/g
	};

	/**
	 * Scrapes HTML to build our list of
	 * keys, searchable text, and display text
	 * @method listFromHtml
	 */
	var listFromHtml = function() {

		$('li').each(function(index) {
			var $this = $(this);
			var plainText = crushText($this.text());
			var href = $this.children('a').attr('href');
			var key = href.toLowerCase();

			var html = $this.children('a').html();
			html = html.replace('<strong class="', '<span class="bigger ').replace('</strong>', '</span>');

			_keysToDetailsDict[key] = {
				// content displayed in drop down list
				html: html,
				// what we'll match against
				searchText: plainText,
				// unique key/id
				code: key,
				// when a selection is made this is the location we'll launch
				href: href
			};
			_keysList.push(key);
		});

	};

	var crushText = function(value) {
		return value
			.toLowerCase()
			.replace(_re.noise, '')
			.replace(_re.common, ' ')
			.replace(_re.space, ' ')
			.trim();
	};

	var _ta_source = function(query, process) {
		_scrubbedQuery = crushText(query);
		_words = _scrubbedQuery.split(' ');
		var regGroup = '';
		for (var i = 0; i < _words.length; i++) {
			_words[i] = _words[i].trim();
			if (_words[i].length > 0) {
				regGroup += (regGroup.length > 0 ? '|' : '') + _words[i];
			}
		}
		_regex = new RegExp('(' + regGroup + ')', 'gi');
		process(_keysList);
	};

	var _ta_updater = function(item) {
		window.location = _keysToDetailsDict[item].href;
		return _keysToDetailsDict[item].searchText;
	};

	var _ta_matcher = function(item) {
		var detailed = _keysToDetailsDict[item];
		for (var i = 0; i < _words.length; i++) {
			if (detailed.searchText.indexOf(_words[i]) == -1) {
				return false;
			}
		}
		return true;
	};

	var _ta_sorter = function(items) {
		return items.sort(function(a, b) {
			return (_keysToDetailsDict[a].searchText > _keysToDetailsDict[b].searchText);
		});
	};

	var _ta_highligher = function(item) {
		var $temp = $('<div/>').html(_keysToDetailsDict[item].html);

		$('em, .bigger', $temp).each(function(index) {
			var $ele = $(this);
			var text = $ele.html();
			$ele.html(text.replace(_regex, "<strong>$1</strong>"));
		});
		return $temp.html();
	};

	_public.initialize = function() {
		listFromHtml();

		$('#quickSearch')
			.typeahead({
				source: _ta_source,
				updater: _ta_updater,
				matcher: _ta_matcher,
				sorter: _ta_sorter,
				highlighter: _ta_highligher,
				minLength: 2,
				items: 50
			})
			.val('')
			.focus();
	};

	// ---------------------------------------
	// return public interface "JSON handle"
	// ---------------------------------------
	return _public;
};
;/**
 * Resizes an overlay to fill the window (this is a 1.0, so "fill" is relative -- it gets much bigger)
 * @class resize
 * @namespace ugsEditorPlus
 */
ugsEditorPlus.resize = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	var $dlg = null;
	var $aceLayer = null;
	var $help = null;
	var editor = null;

	/**
	 * miliseconds to fade in/out editor
	 * @property FADE_SPEED
	 * @final
	 * @type {Number}
	 */
	var FADE_SPEED = 550;
	/**
	 * miliseconds to slide in/out sidebar (help) panel
	 * @property SLIDE_SPEED
	 * @final
	 * @type {Number}
	 */
	var SLIDE_SPEED = 400;

	/**
	 * Hold the current state of the dialog, we'll store this on the element in "data-sized" attribute
	 * @attribute isBig
	 * @type {Boolean}
	 */
	var isBig = false;

	var isHelpOpen = false;

	/**
	 * Initializer: preps handles and sets state varables.
	 * @method setup
	 * @private
	 * @return {void}
	 */
	var setup = function(dlgElement) {
		$dlg = $(dlgElement);
		$("body").append('<div id="aceHeader"><button class="aceSideBtn" title="Show options &amp; help"><span></span><span></span><span></span></button><strong>Edit Song</strong><a href="#exit-fullscreen">Exit fullscreen</a></div><div id="aceEditor"></div><div id="aceHelp"></div>');

		$aceLayer = $('#aceEditor');
		$aceLayer.fadeOut(1);

		$help = $('#aceHelp');

		$('#aceHeader a').click(function(e) {
			e.preventDefault();
			hideAce();
		});
		$('#aceHeader button').click(onShowHelpClicked);
	};

	var onShowHelpClicked = function(e) {
		e.preventDefault();
		showHelp(!isHelpOpen);
	};

	var showHelp = function(isShow) {
		isHelpOpen = isShow;

		if (isShow) {
			$help.animate({
				left: 0
			}, SLIDE_SPEED);
			$aceLayer.animate({
				left: '350px'
			}, SLIDE_SPEED);
		}
		else {
			$help.animate({
				left: '-350px'
			}, SLIDE_SPEED);
			$aceLayer.animate({
				left: 0
			}, SLIDE_SPEED);
		}
	};

	/**
	 * Returns the path of a linked script file (src) up to the starting position of fileName
	 * @method getPath
	 * @param  {string} fileName
	 * @return {string}
	 */
	var getPath = function(fileName) {
		var path = '../js/',
			lower, pos;

		fileName = fileName.toLowerCase();

		$('script').each(function(index, item) {
			lower = item.src.toLowerCase();
			pos = lower.indexOf(fileName);
			if (pos > 0) {
				path = item.src.substr(0, pos);
			}
		});
		return path;
	};

	var showAce = function() {
		isBig = true;

		$('html').addClass('aceEditorActive');
		$('.overlay').fadeOut(300);

		if (editor !== null) {
			// editor has already been initialized, safe to continue
			copySongToAce();
			return;
		}

		// only execute this block once (thus the null check)
		var path = getPath('ugsEditorPlus');

		LazyLoad.js(path + '/ace/ace.js', function() {
			editor = ace.edit("aceEditor");
			editor.setTheme("ace/theme/idle_fingers");
			editor.getSession().setMode("ace/mode/chordpro");
			editor.setOptions({
				enableBasicAutocompletion: true,
				enableSnippets: true
			});
			editor.completers = [ugsAce.chordCompleter];
			copySongToAce();

			$help.html(ugsAce.helpHtml);

		});
	};

	var copySongToAce = function() {
		$aceLayer.fadeIn(FADE_SPEED);
		editor.setValue($('#chordProSource').val());
		editor.gotoLine(1);
		$help.fadeIn(1);
	};

	/**
	 * Restores overlay to original position(-ish -- not finished)
	 * @method hideAce
	 * @private
	 * @return {void}
	 */
	var hideAce = function() {
		isBig = false;

		$dlg.show();
		$aceLayer.fadeOut(FADE_SPEED);
		$help.fadeOut(FADE_SPEED);
		if (editor !== null) {
			$('#chordProSource').val(editor.getValue());
		}

		$('html').removeClass('aceEditorActive');
		showHelp(false);
	};

	/**
	 * Resizes passed in DOM element, toggling between fullscreen and "standard" size.
	 * @method toggle
	 * @param  {DOM-element} dlgElement handle to Overlay/dialog being resized
	 * @return {void}
	 */
	_public.toggle = function(dlgElement) {
		if ($dlg === null) {
			setup(dlgElement);
		}

		if (isBig) {
			hideAce();
		}
		else {
			showAce();
		}
		return false;
	};


	// ---------------------------------------
	// return public interface "JSON handle"
	// ---------------------------------------
	return _public;

}());
;/**
 *
 * Dependencies: jQuery & ugsChordBuilder classes
 * @class chordBuilder
 * @namespace ugsEditorPlus
 */
ugsEditorPlus.chordBuilder = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	var _builder = null;

	/**
	 * Standard event wire up and prep method. Handles "finding" the Builder's "Hand Cursor" based
	 * on the location of the background image used on the Finger Tool.
	 * @method  init
	 */
	_public.init = function() {
		var fingerToolImage = $('.fingerToolImage').css('background-image');
		ugsChordBuilder.settings.cursor.imageUri = fingerToolImage.replace(/url\("(.*)hand.png"\)/i, '$1hand-cursor.png');
		_builder = new ugsChordBuilder.editorUi();
		_builder.init();

		$('#cdBldOpenBtn').click(onShowDlgBtnClick);
	};

	/**
	 * Button/Link click handler (shows the Chord Builder Overlay)
	 * @method onShowDlgBtnClick
	 * @param  {event} evt
	 */
	var onShowDlgBtnClick = function(evt) {
		evt.preventDefault();
		_builder.reload();
		var id = $(this).data('dialog');
		$('#' + id).fadeIn();
	};

	// ---------------------------------------
	// return public interface "JSON handle"
	// ---------------------------------------
	return _public;

}());
;/**
 * Exposes the only method required to attach UkeGeeks Scriptasaurus Song-a-matic editor functionality.
 *
 * @class songAmatic
 * @namespace ugsEditorPlus
 * @static
 * @singleton
 */
ugsEditorPlus.songAmatic = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	/**
	 * attaches event handlers, preps variables, and runs UGS
	 * @method init
	 * @param options {OBJECT} (optional) Object/JSON with any of the ugsEditorPlus.options
	 * @return {void}
	 */
	_public.init = function(options) {
		var opts = mergeOptions(options);

		ukeGeeks.settings.opts.retainBrackets = !opts.hideChordEnclosures;
		$('#songSourceDlg').toggle(opts.showEditOnLoad);

		ukeGeeks.scriptasaurus.init(opts.useLegacyIe);

		ugsEditorPlus.actions.init();
		ugsEditorPlus.topMenus.init();
		ugsEditorPlus.submenuUi.init();
		ugsEditorPlus.optionsDlg.init();
		ugsEditorPlus.chordBuilder.init();
		ugsEditorPlus.actions.run();
	};

	var mergeOptions = function(options) {
		var opts = {
			hideChordEnclosures: !ukeGeeks.settings.opts.retainBrackets,
			sortAlphabetical: ukeGeeks.settings.opts.sortAlphabetical,
			ignoreCommonChords: ukeGeeks.settings.opts.ignoreCommonChords,
			commonChords: ukeGeeks.settings.commonChords
		};

		return $.extend(ugsEditorPlus.options, opts, (typeof options === "object") ? options : {});
	};

	// ---------------------------------------
	// return public interface "JSON handle"
	// ---------------------------------------
	return _public;

}());
;/**
 * Library for an HTML5 WYSIWYG editor to build ChordPro chord define tags.
 * @module  ugsChordBuilder
 * @namespace ugsChordBuilder
 * @main  ugsChordBuilder
 */
var ugsChordBuilder = window.ugsChordBuilder || {};

/**
 * Entities (data containers) shared between the class libraries. Private
 * JSON objects used internally by a class are not included here.
 * @class entities
 * @namespace ugsChordBuilder
 * @static
 * @singleton
 */
ugsChordBuilder.entities = {
	/**
	 * @class entities.BoundingBox
	 * @constructor
	 * @param  {Position} pos   Position (JSON) object
	 * @param  {JSON} dimensions JSON Object of form: {width: {int}, height: {int}}
	 */
	BoundingBox: function(pos, dimensions) {
		/**
		 * @property x
		 * @type {int}
		 */
		this.x = pos ? pos.x : 0;
		/**
		 * @property y
		 * @type {int}
		 */
		this.y = pos ? pos.y : 0;
		/**
		 * @property width
		 * @type {int}
		 */
		this.width = dimensions ? dimensions.width : 1;
		/**
		 * @property height
		 * @type {int}
		 */
		this.height = dimensions ? dimensions.height : 1;
	},

	/**
	 * Describes a fingering Dot on the fretboard
	 * @class entities.Dot
	 * @constructor
	 * @param  {int} string
	 * @param  {int} fret
	 * @param  {int} finger
	 */
	Dot: function(string, fret, finger) {
		/**
		 * String number, on sporano (GCEA), G is 0th string, and so on
		 * @property string
		 * @type {int}
		 */
		this.string = string;
		/**
		 * @property fret
		 * @type {int}
		 */
		this.fret = fret ? fret : 0;
		/**
		 * @property finger
		 * @type {int}
		 */
		this.finger = finger ? finger : 0;
	},

	/**
	 * @class entities.Position
	 * @constructor
	 * @param  {int} x
	 * @param  {int} y
	 */
	Position: function(x, y) {
		/**
		 * @property x
		 * @type {int}
		 */
		this.x = x ? x : 0;
		/**
		 * @property y
		 * @type {int}
		 */
		this.y = y ? y : 0;
	}
};

/**
 * "Properties, Options, Preferences" such as fretboard size and colors; dot attributes, the cursors, fonts etc.
 * @class settings
 * @namespace ugsChordBuilder
 * @static
 * @final
 * @singleton
 */
ugsChordBuilder.settings = (function() {
	// "Revealing Module Pattern"

	// dependencies:
	var ents = ugsChordBuilder.entities;

	//'Geneva, "Lucida Sans", "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, sans-serif';
	/**
	 * San-serif font stack used when drawing text on Canvas.
	 * @property {String} FONT_STACK
	 * @final
	 * @constant
	 */
	var FONT_STACK = 'Arial, "Helvetica Neue", Helvetica, Verdana, sans-serif';

	/**
	 * Fretboard upper left hand corner position (pseudo-constants)
	 * @method anchorPos
	 * @type {Position}
	 * @static
	 */
	var anchorPos = {
		x: 75,
		y: 75
	};

	var cursor = {
		fillColor: 'rgba(220, 216, 73, 0.35)', // 'rgba(245, 127, 18, 0.3)',
		strokeWidth: 1,
		strokeColor: '#AAB444', // '#F57F12',
		radius: 9,
		imageUri: '../img/editor/hand-cursor.png'
	};

	var fretBoard = {
		numFrets: 5,
		maxFret: 16,
		stringNames: ['G', 'C', 'E', 'A'],
		strokeWidth: 4,
		strokeColor: '#8F8569',
		fretSpace: 35,
		stringSpace: 30
	};

	var dot = {
		fillColor: '#F68014',
		radius: 11,
		strokeWidth: 2,
		strokeColor: '#D56333',
		fontWeight: 'bold',
		fontFamily: FONT_STACK,
		fontSize: 16,
		fontColor: '#ffffff'
	};

	var fretLabel = {
		fontFamily: FONT_STACK,
		fontSize: 28, // Pixels
		color: '#6A6A63',
		lightColor: '#EAEAE8' //D6D6D6' //A4A4A3'
	};

	var stringLabel = {
		fontFamily: FONT_STACK,
		fontSize: 34, // Pixels
		color: '#DCD849' // #AAB444'//
	};

	var chord = {
		nameMaxLength: 20
	};

	/**
	 * Dimensions of a single target
	 * @method targetDimensions
	 * @return {JSON} {width: ?, height: ? }
	 */
	var targetDimensions = function() {
		return {
			height: fretBoard.fretSpace,
			width: fretBoard.stringSpace
		};
	};

	/**
	 * Top left-hand corner where Targets begin positioning
	 * @method targetAnchorPos
	 * @return {postion}
	 */
	var targetAnchorPos = function() {
		var dimensions = targetDimensions();
		return new ents.Position(
			anchorPos.x - 0.5 * dimensions.width,
			anchorPos.y - dimensions.height - 0.2 * fretBoard.strokeWidth
		);
	};

	/**
	 * re-centers the fretboard's anchor position
	 * @method centerFretboard
	 * @param  {element} canvas
	 * @return {void}
	 */
	var centerAnchor = function(canvas) {
		anchorPos.x = (0.5 * canvas.width) - (0.5 * (fretBoard.stringNames.length - 1) * fretBoard.stringSpace) - fretBoard.strokeWidth;
		anchorPos.y = (0.5 * canvas.height) - (0.5 * fretBoard.numFrets * fretBoard.stringSpace);
	};

	return {
		// Properties
		anchorPos: anchorPos,
		cursor: cursor,
		fretBoard: fretBoard,
		dot: dot,
		fretLabel: fretLabel,
		stringLabel: stringLabel,
		chord: chord,
		// Methods
		targetDimensions: targetDimensions,
		targetAnchorPos: targetAnchorPos,
		centerAnchor: centerAnchor
	};
}());

/**
 * Tracks curor position relative to fretboard's hot (clickable) regions
 * @class tracking
 * @namespace ugsChordBuilder
 * @static
 * @singleton
 */
ugsChordBuilder.tracking = (function() {
	// dependencies:
	var ents = ugsChordBuilder.entities,
		settings = ugsChordBuilder.settings;

	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	var targetBox = null;

	var getTarget = function() {
		if (targetBox) {
			return targetBox;
		}

		var dimensions = settings.targetDimensions();
		dimensions.width = dimensions.width * settings.fretBoard.stringNames.length;
		dimensions.height = dimensions.height * (settings.fretBoard.numFrets + 1);
		targetBox = new ents.BoundingBox(settings.targetAnchorPos(), dimensions);

		return targetBox;
	};

	/**
	 * Returns TRUE if the two objects overlap
	 * @method  collision
	 * @param  {BoundingBox} object1
	 * @param  {BoundingBox} object2
	 * @return {bool}
	 */
	var collision = function(object1, object2) {
		return (object1.x < object2.x + object2.width) && (object1.x + object1.width  > object2.x) && (object1.y < object2.y + object2.height) && (object1.y + object1.height > object2.y);
	};

	/**
	 * Converts position (x,y) to the fret
	 * @method toDot
	 * @param  {position} pos
	 * @return {dot}
	 */
	_public.toDot = function(pos) {
		var cursorBox = new ents.BoundingBox(pos);
		var box = getTarget();
		if (!collision(cursorBox, box)) {
			return null;
		}

		var dimensions = settings.targetDimensions();
		return new ents.Dot(
			Math.floor((pos.x - box.x) / dimensions.width),
			Math.floor((pos.y - box.y) / dimensions.height)
		);
	};

	// ---------------------------------------
	// return public interface
	// ---------------------------------------
	return _public;

}());

/**
 * Did I overlook this or was it deliberate? Either case, the "fret" in the dot object is
 * merely the fret in the visible diagram -- that is, a value between 0 and maxFrets, not
 * the actual fret on the instrument... beware.
 *
 * Unless otherwise stated all "dot" parames are of type ugsChordBuilder.entities.dot
 * @class fretDots
 * @namespace ugsChordBuilder
 * @static
 * @singleton
 */
ugsChordBuilder.fretDots = (function() {
	// dependencies:
	var ents = ugsChordBuilder.entities,
		anchor_pos = ugsChordBuilder.settings.anchorPos,
		opts_board = ugsChordBuilder.settings.fretBoard,
		opts_dot = ugsChordBuilder.settings.dot;

	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	// locals
	var _dots = [];

	_public.getDots = function() {
		return _dots.slice();
	};

	_public.slide = function(numSteps) {
		if (!inRange(numSteps)) {
			return false;
		}
		for (var i = 0; i < _dots.length; i++) {
			_dots[i].fret = _dots[i].fret + numSteps;
		}
		return true;
	};

	var inRange = function(numSteps) {
		for (var i = 0; i < _dots.length; i++) {
			if ((_dots[i].fret + numSteps < 1) || (_dots[i].fret + numSteps > opts_board.numFrets)) {
				return false;
			}
		}
		return true;
	};

	_public.toggleDot = function(dot) {
		if (dot.fret == 0) {
			clearColumn(dot.string);
			return;
		}

		var index = find(dot);
		if (index < 0) {
			_dots.push(dot);
		}
		else {
			_dots.splice(index, 1);
		}
	};

	_public.toggleFinger = function(dot, finger) {
		var index = find(dot);
		if (index < 0) {
			return false;
		}

		_dots[index].finger = _dots[index].finger == finger ? 0 : finger;
		return true;
	};

	/**
	 * Clears all saved dots.
	 * @method reset
	 */
	_public.reset = function() {
		for (var i = 0; i < opts_board.stringNames.length; i++) {
			clearColumn(i);
		}
	};

	/**
	 * Returns index of Dot within _dots or -1 if not found.
	 * @method find
	 * @param  {entities.dot} dot
	 * @return {int}
	 */
	var find = function(dot) {
		for (var i = _dots.length - 1; i >= 0; i--) {
			if (_dots[i].string == dot.string && _dots[i].fret == dot.fret) {
				return i;
			}
		}

		return -1;
	};

	/**
	 * Clears all dots for a particular string.
	 * @method clearColumn
	 * @param string {int}
	 */
	var clearColumn = function(string) {
		for (var i = _dots.length - 1; i >= 0; i--) {
			if (_dots[i].string == string) {
				_dots.splice(i, 1);
			}
		}
	};

	var getPosition = function(dot) {
		return new ents.Position(
			anchor_pos.x + 0.47 * opts_board.strokeWidth + dot.string * opts_board.stringSpace,
			anchor_pos.y + 0.47 * opts_board.strokeWidth + (dot.fret - 0.5) * opts_board.fretSpace
		);
	};

	var drawDot = function(context, pos) {
		context.beginPath();
		context.arc(pos.x, pos.y, opts_dot.radius, 0, 2 * Math.PI, false);
		context.fillStyle = opts_dot.fillColor;
		context.fill();
		context.lineWidth = opts_dot.strokeWidth;
		context.strokeStyle = opts_dot.strokeColor;
		context.stroke();
	};

	var addLabel = function(context, pos, text) {
		context.font = opts_dot.fontWeight + ' ' + opts_dot.fontSize + 'px ' + opts_dot.fontFamily;
		context.textAlign = 'center';
		context.fillStyle = opts_dot.fontColor;
		context.fillText(text, pos.x, pos.y + 0.3 * opts_dot.fontSize);
	};

	_public.draw = function(context) {
		for (var i = _dots.length - 1; i >= 0; i--) {
			var pos = getPosition(_dots[i]);
			drawDot(context, pos);
			if (_dots[i].finger > 0) {
				addLabel(context, pos, _dots[i].finger);
			}
		}
	};

	// ---------------------------------------
	// return public interface
	// ---------------------------------------
	return _public;

}());

/**
 * Plots cursor moving across its own canvas context.
 * @class cursorCanvas
 * @namespace ugsChordBuilder
 * @static
 * @singleton
 */
ugsChordBuilder.cursorCanvas = (function() {
	// dependencies
	var opts_cursor = ugsChordBuilder.settings.cursor,
		opts_dot = ugsChordBuilder.settings.dot;

	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	var _context = null;

	var _handImage = null;
	var _imgOk = false;

	var _dotCursor = true;
	var _finger = 1;

	var _lastPos = {
		x: 0,
		y: 0
	};

	_public.init = function(ctx) {
		_context = ctx;
		loadImage();
	};

	var erase = function(pos) {
		var radius = opts_cursor.radius + opts_cursor.strokeWidth;
		// Need to allow for dot, image, and the finger number -- magic number for now:
		_context.clearRect(pos.x - radius, pos.y - radius, radius + 50, radius + 60);
		/*
		if (_imgOk) {
			_context.clearRect(pos.x - radius, pos.y - radius, radius + _handImage.width, radius + _handImage.height);
		} else {
			_context.clearRect(pos.x - radius, pos.y - radius, 2 * radius, 2 * radius);
		}
		*/
	};

	var drawHandCursor = function(pos) {
		_context.drawImage(_handImage, pos.x, pos.y);

		_context.font = opts_dot.fontWeight + ' ' + opts_dot.fontSize + 'px ' + opts_dot.fontFamily;
		_context.textAlign = 'left';
		_context.fillStyle = 'black'; //opts_dot.fontColor;
		_context.fillText(_finger, pos.x + 0.8 * _handImage.width, pos.y + _handImage.height);
		// not centering pos.x - 0.5 * _handImage.width, pos.y - 0.5 * _handImage.height);
	};

	var loadImage = function() {
		_handImage = new Image();
		_handImage.onload = function() {
			_imgOk = true;
		};
		_handImage.src = opts_cursor.imageUri;
	};

	var drawDotCursor = function(pos) {
		_context.beginPath();
		_context.arc(pos.x, pos.y, opts_cursor.radius, 0, 2 * Math.PI, false);
		_context.fillStyle = opts_cursor.fillColor;
		_context.fill();
		_context.lineWidth = opts_cursor.strokeWidth;
		_context.strokeStyle = opts_cursor.strokeColor;
		_context.stroke();
	};

	_public.setCursor = function(isDot, finger) {
		_dotCursor = isDot;
		_finger = finger;
	};

	_public.draw = function(pos) {
		erase(_lastPos);
		if (!_imgOk || _dotCursor) {
			drawDotCursor(pos);
		}
		else {
			drawHandCursor(pos);
		}
		_lastPos = pos;
	};

	// ---------------------------------------
	// return public interface
	// ---------------------------------------
	return _public;

}());

/**
 * Plots chord diagram (fretboard with fret labels) on its canvas context.
 * @class chordCanvas
 * @namespace ugsChordBuilder
 * @static
 * @singleton
 */
ugsChordBuilder.chordCanvas = (function() {

	// dependencies
	var ents = ugsChordBuilder.entities,
		center_anchor = ugsChordBuilder.settings.centerAnchor,
		anchor_pos = ugsChordBuilder.settings.anchorPos,
		opt_fLabel = ugsChordBuilder.settings.fretLabel,
		opt_sLabel = ugsChordBuilder.settings.stringLabel,
		opts_board = ugsChordBuilder.settings.fretBoard;

	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	var _context = null,
		_canvas = null;

	_public.init = function(ctx, ele) {
		_context = ctx;
		_canvas = ele;
		center_anchor(_canvas);
	};

	var erase = function() {
		_context.clearRect(0, 0, _canvas.width, _canvas.height);
	};

	var addLabel = function(text, color, pos) {
		_context.font = opt_fLabel.fontSize + 'px ' + opt_fLabel.fontFamily;
		_context.textAlign = 'right';
		_context.fillStyle = color;
		_context.fillText(text, pos.x, pos.y);
	};

	var addLabels = function(startingFret) {
		var pos = new ents.Position(
			anchor_pos.x - 0.3 * opt_fLabel.fontSize,
			anchor_pos.y + opt_fLabel.fontSize
		);
		var color = startingFret > 1 ? opt_fLabel.color : opt_fLabel.lightColor;
		for (var i = 0; i < opts_board.numFrets; i++) {
			addLabel(startingFret + i, color, pos);
			pos.y += opts_board.fretSpace;
			color = opt_fLabel.lightColor;
		}
	};

	var addStringName = function(text, pos) {
		_context.font = opt_sLabel.fontSize + 'px ' + opt_sLabel.fontFamily;
		_context.textAlign = 'center';
		_context.fillStyle = opt_sLabel.color;
		_context.fillText(text, pos.x, pos.y);
	};

	var addStringNames = function() {
		var pos = new ents.Position(
			anchor_pos.x + 0.5 * opts_board.strokeWidth,
			anchor_pos.y - 0.25 * opt_fLabel.fontSize
		);

		for (var i = 0; i < opts_board.stringNames.length; i++) {
			addStringName(opts_board.stringNames[i], pos);
			pos.x += opts_board.stringSpace;
		}
	};

	var drawFretboard = function() {
		var i, x, y;

		// width offset, a "subpixel" adjustment
		var offset = opts_board.strokeWidth / 2;
		// locals
		var stringHeight = opts_board.numFrets * opts_board.fretSpace;
		var fretWidth = (opts_board.stringNames.length - 1) * opts_board.stringSpace;
		// build shape
		_context.beginPath();
		// add "C" & "E" strings
		for (i = 1; i < (opts_board.stringNames.length - 1); i++) {
			x = anchor_pos.x + i * opts_board.stringSpace + offset;
			_context.moveTo(x, anchor_pos.y + offset);
			_context.lineTo(x, anchor_pos.y + stringHeight + offset);
		}
		// add frets
		for (i = 1; i < opts_board.numFrets; i++) {
			y = anchor_pos.y + i * opts_board.fretSpace + offset;
			_context.moveTo(anchor_pos.x + offset, y);
			_context.lineTo(anchor_pos.x + fretWidth + offset, y);
		}
		//
		_context.rect(anchor_pos.x + offset, anchor_pos.y + offset, fretWidth, stringHeight);
		// stroke shape
		_context.strokeStyle = opts_board.strokeColor;
		_context.lineWidth = opts_board.strokeWidth;
		_context.stroke();
		_context.closePath();
	};

	_public.draw = function(pos, startingFret) {
		erase();
		// ugsChordBuilder.debugTargets.drawTargets(_context);
		addLabels(startingFret);
		addStringNames();
		drawFretboard();
		ugsChordBuilder.fretDots.draw(_context);
	};

	// ---------------------------------------
	// return public interface
	// ---------------------------------------
	return _public;

}());

/**
 *
 * @class export
 * @namespace ugsChordBuilder
 * @static
 * @singleton
 */
ugsChordBuilder.export = (function() {
	// dependencies
	var opts_board = ugsChordBuilder.settings.fretBoard,
		opts_chord = ugsChordBuilder.settings.chord;

	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	var _fretOffset = null;

	/**
	 * Class for "reorganized" dots, think of this as a necklace where the
	 * thread, the instrument string, has zero or more beads, or dots -- fret plus finger
	 * @class  StringDots
	 * @constructor
	 * @private
	 * @param  {int} string
	 * @param  {dot_Array} dots
	 */
	var StringDots = function(string, dots) {
		this.string = string;
		this.dots = dots ? dots : [];
		//this.fingers = fingers ? fingers : [];
	};

	var getStringDots = function() {
		// initialize empty string array
		var stringNumber,
			aryStringDots = [];
		for (stringNumber = 1; stringNumber <= opts_board.stringNames.length; stringNumber++) {
			aryStringDots.push(new StringDots(stringNumber));
		}

		// add dots
		var dots = ugsChordBuilder.fretDots.getDots();
		for (stringNumber = aryStringDots.length - 1; stringNumber >= 0; stringNumber--) {
			for (var i = dots.length - 1; i >= 0; i--) {
				if (aryStringDots[stringNumber].string == dots[i].string + 1) {
					aryStringDots[stringNumber].dots.push(dots[i]);
				}
			}
		}

		return aryStringDots;
	};

	/**
	 * Returns the minimum & maximum fret found withing array (of dots)
	 * @method getMinMax
	 * @param  {dot_array} ary
	 * @return {JSON}
	 */
	var getMinMax = function(ary) {
		var max = 0;
		var min = 900;
		for (var i = ary.length - 1; i >= 0; i--) {
			if (ary[i].fret > max) {
				max = ary[i].fret;
			}
			if (ary[i].fret < min) {
				min = ary[i].fret;
			}
		}
		return {
			max: max,
			min: (min < 900) ? min : max
		};
	};

	/**
	 * Handles the offset, translates from fret (on the diagram's N frets) to the insturment's complete fretbaord
	 * @method  fretNumber
	 * @param  {int} fret
	 * @return {int}
	 */
	var fretNumber = function(fret) {
		return fret > 0 ? _fretOffset + fret : 0;
	};

	/**
	 * Not too surprisingly this finds "fret" within dots and returns finger. If there isn't a dot
	 * for fret returns zed.
	 * @method  getFinger
	 * @param  {array} dots
	 * @param  {int} fret
	 * @return {int}
	 */
	var getFinger = function(dots, fret) {
		for (var i = 0; i < dots.length; i++) {
			if (dots[i].fret == fret) {
				return dots[i].finger;
			}
		}
		return 0;
	};

	/**
	 * Returns an array of ints, one for each string, with the HIGHEST REAL fret appearing on that string.
	 * Default is zed per string.
	 * @method getPrimaryFrets
	 * @param  {int} startingFret
	 * @return {int}
	 */
	_public.getPrimaryFrets = function(startingFret) {
		_fretOffset = startingFret - 1;
		var dotsPerString = getStringDots();
		var primaries = [];
		for (var i = 0; i < dotsPerString.length; i++) {
			var minMax = getMinMax(dotsPerString[i].dots);
			primaries.push(fretNumber(minMax.max));
		}
		return primaries;
	};

	/**
	 * Returns complete ChordPro definition statement
	 * @method getDefinition
	 * @param  {string} chordName
	 * @param  {int} startingFret
	 * @return {string}
	 */
	_public.getDefinition = function(chordName, startingFret) {
		chordName = scrub(chordName);
		var name = (chordName && chordName.length > 0) ? chordName : 'CHORDNAME';
		var fretsStr = '';
		var fingersString = '';
		var addsString = '';

		_fretOffset = startingFret - 1;
		var dotsPerString = getStringDots();
		for (var i = 0; i < dotsPerString.length; i++) {
			var minMax = getMinMax(dotsPerString[i].dots);
			fretsStr += fretNumber(minMax.max) + ' ';
			fingersString += getFinger(dotsPerString[i].dots, minMax.max) + ' ';
			if (minMax.max != minMax.min) {
				addsString += ' add: string ' + dotsPerString[i].string + ' fret ' + fretNumber(minMax.min) + ' finger ' + getFinger(dotsPerString[i].dots, minMax.min);
			}
		}

		// no double spaces, no space before the closing "}"
		return ('{define: ' + name + ' frets ' + fretsStr + ' fingers ' + fingersString + addsString + '}').replace(/\s+/g, ' ').replace(' }', '}');
	};

	/**
	 * Returns "highlighted" (HTML-ified) ChordPro definition statement.
	 * @method getDefinition
	 * @param  {string} chordName
	 * @param  {int} startingFret
	 * @return {string}
	 */
	_public.getDefinitionHtml = function(chordName, startingFret) {
		chordName = scrub(chordName);
		// Keep regexs simple by a couple cheats:
		// First, using 'X07MX001' as my CSS clasname prefix to avoid collisions.
		// We temporarily remove the name, then put it back in the very last step.
		var html = _public.getDefinition(chordName, startingFret);
		html = html.replace(' ' + chordName, ' ' + 'X07Myq791wso01');
		html = html.replace(/\b(\d+)\b/g, '<span class="chordPro-X07MX001number">$1</span>');
		html = html.replace(/\b(frets?|fingers?|string)\b/g, '<span class="chordPro-X07MX001attribute">$1</span>');
		html = html.replace(/\b(define|add)\b/g, '<span class="chordPro-X07MX001keyword">$1</span>');
		return html
			.replace('X07Myq791wso01', '<span class="chordPro-string">' + chordName + '</span>')
			.replace(/X07MX001/g, '')
			.replace(/ +/g, ' ');
	};

	/**
	 * Returns "safe" version of chord name, removing disallowed characters and reserved names (such as "add:")
	 * @method scrub
	 * @param  {string} chordName
	 * @return {string}
	 */
	var scrub = function(name) {
		// paranoia protection: no reserved words (makes life easier for parsing)
		var disallow = /^(frets|fingers|add:)$/i;
		// trim leading & trailing spaces, internal spaces get smushed into single dash
		var cleaned = name.replace(/^\s*(.*?)\s*$/, '$1').replace(/\s+/g, '-');
		if (disallow.test(cleaned)) {
			cleaned = '';
		}
		return cleaned.substring(0, opts_chord.nameMaxLength);
	};

	// ---------------------------------------
	// return public interface
	// ---------------------------------------
	return _public;

}());
;/**
 *
 * @class chooserList
 * @namespace ugsChordBuilder
 * @static
 * @singleton
 */
ugsChordBuilder.chooserList = (function() {
	/**
	 * attach public members to this object
	 * @property _public
	 * @type JsonObject
	 */
	var _public = {};

	// array of custom chords defined in this song
	var _chordDictionary = [];
	// handle to HTML UL element
	var _eleChordList = null;

	/**
	 * magic value for start a new chord (constant)
	 * @final
	 * @attribute C_NEW_CHORD
	 * @type {Int}
	 */
	var C_NEW_CHORD = -1;

	// next available Id used on LI's
	var _nextId = 0;

	// HTML element Ids
	var _ids = {
		// ChordPro Song -- the unmodified source
		source: 'chordProSource',
		// the UL where we'll be loading the chords
		chordList: 'cdBldPick',
		builderPanel: 'cdBldBuilderPanel',
		chooserPanel: 'cdBldChooserPanel'
	};

	/**
	 * Chord current sent to the editor.
	 * @attribute _currentChord
	 */
	var _currentChord = null;

	/**
	 * Handle to the chordBuilder (UI) "setChord" method
	 * @attribute _setChordMethod
	 */
	var _setChordMethod = function() {};

	/**
	 * Hanlde to instance of Scriptasaurus chord brush class, to paint the wee little
	 * chord diagrams onto the Chooser List.
	 * @attribute _ugsBrushTool
	 * @type {Object}
	 */
	var _ugsBrushTool = null;

	/**
	 * Required settings for the Chord Brush -- dimensions, fonts, and colors.
	 * @attribute _diagramSettings
	 * @type {JSON}
	 */
	var _diagramSettings = {
		dimensions: {
			showText: false,
			height: 50,
			width: 40,
			fretSpace: 9,
			stringSpace: 7,
			dotRadius: 3,
			lineWidth: 1,
			topLeftPos: {
				x: 10,
				y: 2
			},
			xWidth: 0.7 * 7,
			xStroke: 1.4 * 1
		},
		fonts: {
			dot: '8pt Arial',
			text: '8pt Arial',
			fret: '8pt Arial'
		},
		colors: {
			fretLines: '#EED18E',
			dots: '#551D00', //'#9A532D',
			dotText: '#ffffff',
			text: '#000000',
			fretText: '#EED18E',
			xStroke: '#551D00'
		}
	};

	/**
	 * entity for storing raw chord info; attached to the LI via id
	 * @class ChordDefinition
	 * @param {string} name
	 * @param {string} definition
	 */
	var ChordDefinition = function(name, definition) {
		this.id = _nextId++;
		this.name = name;
		this.definition = definition;
	};

	/**
	 * @method init
	 * @param  {function} setChordFunction
	 */
	_public.init = function(setChordFunction) {
		_setChordMethod = setChordFunction;
		_eleChordList = document.getElementById(_ids.chordList);
		// attach click handler to the UL avoids need to attach to individual LI items (these get added & deleted frequently)
		_eleChordList.addEventListener('click', onClick, false);
		_start();
	};

	var _start = function() {
		songGetDefinitions(document.getElementById(_ids.source).value);
		listLoad(_eleChordList, _chordDictionary);
	};

	_public.reset = function() {
		_chordDictionary = [];
		document.getElementById(_ids.chordList).innerHTML = '';
		_nextId = 0;
		_currentChord = null;
		_start();
	};

	/**
	 * Shows either the "Chooser" or "Chord Builder/Editor" panel.
	 * @method show
	 * @public
	 * @param {bool} isChooserPanel
	 */
	_public.show = function(isChooserPanel) {
		document.getElementById(_ids.chooserPanel).style.display = isChooserPanel ? 'block' : 'none';
		document.getElementById(_ids.builderPanel).style.display = !isChooserPanel ? 'block' : 'none';
		$('#' + _ids.chooserPanel).closest('.overlay').toggleClass('chordBuilderNarrow', isChooserPanel);
	};

	/**
	 * Returns TRUE if Save completed OK, false otherwise (duplicate name or unable to update)
	 * @method save
	 * @param  {JSON} data
	 * @return {bool}
	 */
	_public.save = function(data) {
		if (dictionaryFindDupes(_currentChord == null ? -1 : _currentChord.id, data.name) >= 0) {
			alert('Hey, this chord name is already being used.');
			return false;
		}
		var id = -1;
		if (_currentChord == null) {
			id = definitionAdd(data.name, data.definition);
			_currentChord = dictionaryFind(id);
			songAddDefinition(data.definition);
		}
		else {
			var i = dictionaryGetIndex(_currentChord.id);
			if (i < 0) {
				// console.log('error: not found');
				return false;
			}
			var oldDefinition = _chordDictionary[i].definition;
			_chordDictionary[i].name = data.name;
			_chordDictionary[i].definition = data.definition;
			id = _chordDictionary[i].id;
			songReplace(oldDefinition, _chordDictionary[i].definition);
		}
		listUpdate(id);
		_public.show(true);
		return true;
	};

	/**
	 * Handles confirming & removing a chord from the list and the song.
	 * @method doDelete description]
	 * @param  {ChordDefinition} chord
	 * @return {void}
	 */
	var doDelete = function(chord) {
		if (!confirm('Delete definition for "' + chord.name + '"?')) {
			return;
		}
		var item = listGetItem(chord.id);
		if (!item) {
			return;
		}
		_eleChordList.removeChild(item);
		songReplace(chord.definition, '');

	};

	/**
	 * ListItem click event handler
	 * @method onClick
	 * @param  {Event} evt
	 */
	var onClick = function(evt) {
		evt.preventDefault();
		_currentChord = dictionaryFind(evt.target.getAttribute('data-id'));
		if (evt.target.getAttribute('data-action') == 'delete') {
			doDelete(_currentChord);
			return;
		}

		var chord = null;
		if (_currentChord != null) {
			chord = ukeGeeks.chordImport.runLine(_currentChord.definition);
			if (hasMutedStrings(chord)) {
				alert('Uh-oh! This chord uses muted strings!\nCurrently the Chord Builder does not support muted strings -- \nsaving edits will result in mutes being lost.');
			}
		}
		_setChordMethod(chord);
		_public.show(false);
	};

	/**
	 * Checks whether any of the Chord's strings have been muted.
	 * @method hasMutedStrings
	 * @param  {ugs.chord}  chord
	 * @return {Boolean}
	 */
	var hasMutedStrings = function(chord) {
		if (chord.muted) {
			for (var i = 0; i < chord.muted.length; i++) {
				if (chord.muted[i]) {
					return true;
				}
			}
		}
		return false;
	};

	/**
	 * updates an exiting HTML ListItem (LI) using the info stored for Id in
	 * the chord dictionary (array). Appends new ListItem if not found.
	 * @method listUpdate
	 * @param  {int} id
	 * @return {DOM_LI}
	 */
	var listUpdate = function(id) {
		var def = dictionaryFind(id);
		var item = listGetItem(id);
		if (!item) {
			item = listAddItem(id, def.name);
		}
		else {
			item.innerHTML = listHtmlString(id, def.name, true);
		}
		listAddDiagram(id);
		return item;
	};

	/**
	 * finds the HTML ListItem corresponding to Id
	 * @method listGetItem
	 * @param  {int} id
	 * @return {DOM_LI}
	 */
	var listGetItem = function(id) {
		var items = _eleChordList.getElementsByTagName('li');
		for (var i = 0; i < items.length; i++) {
			if (items[i].getAttribute('data-id') == ('' + id)) {
				return items[i];
			}
		}
		return null;
	};

	/**
	 * Returns HTML snippet for an LI
	 * @method listHtmlString
	 * @param  {int} id
	 * @param  {string} name
	 * @param  {bool} isInner (optional) if TRUE only reutrns the inner HTML part, otherwise returns complete LI tag
	 * @return {string}
	 */
	var listHtmlString = function(id, name, isInner) {
		isInner = (arguments.length > 2) ? isInner : false;
		var innerHtml = '<span class="deleteChord" data-id="' + id + '" data-action="delete" title="Remove this definition"></span>' + name;
		return isInner ? innerHtml : '<li data-id="' + id + '" title="Edit this definition" class="ugs-grouped">' + innerHtml + '</li>';
	};

	/**
	 * Clears and loads the HTML UL using currently values in Chord Dictionary
	 * @method listLoad
	 * @param {DOM_UL} ul
	 * @param {array} chordDefs
	 */
	var listLoad = function(ul, chordDefs) {
		var i, s = '';
		for (i = 0; i < chordDefs.length; i++) {
			s += listHtmlString(chordDefs[i].id, chordDefs[i].name);
		}
		ul.innerHTML = '<li data-id="' + C_NEW_CHORD + '" class="newChord">+ Add New Chord</li>' + s;

		var items = ul.getElementsByTagName('li');
		for (i = items.length - 1; i >= 0; i--) {
			if (i < 1) {
				continue;
			}
			listAddDiagram(items[i].getAttribute('data-id'));
		}
	};

	/**
	 * Appends a new HTML ListItem to our UL.
	 * @method listAddItem
	 * @param  {int} id
	 * @param  {string} name
	 */
	var listAddItem = function(id, name) {
		var temp = document.createElement('ul');
		temp.innerHTML = listHtmlString(id, name);
		_eleChordList.appendChild(temp.childNodes[0]);
	};

	/**
	 * Adds mini-chord diagram to the list item found by Id.
	 * @method listAddDiagram
	 */
	var listAddDiagram = function(id) {
		var element = listGetItem(id);
		var defintion = dictionaryFind(id);
		var chord = ukeGeeks.chordImport.runLine(defintion.definition);
		//var fretBox = ukeGeeks.settings.inlineFretBox;
		//var fontSettings = ukeGeeks.settings.inlineFretBox.fonts;
		if (_ugsBrushTool == null) {
			_ugsBrushTool = new ukeGeeks.chordBrush();
		}
		_ugsBrushTool.plot(element, chord, _diagramSettings.dimensions, _diagramSettings.fonts, _diagramSettings.colors);
	};

	/**
	 * Using just a bit of recursion performs as advertised: replaces all occurences of
	 * searchValue with newValue within text (haystack).
	 * DANGER: it is, of course, for this to get hung in an infinite loop if new value
	 * inclues complete search value. :D
	 * @method replaceAll
	 * @param  {string} text
	 * @param  {string} searchValue
	 * @param  {string} newValue
	 * @return {string}
	 */
	var replaceAll = function(text, searchValue, newValue) {
		var newText = text.replace(searchValue, newValue);
		return (newText == text) ? text : replaceAll(newText, searchValue, newValue);
	};

	/**
	 * Updates Source and Runs Scriptasaurus after updaint the definition
	 * @method songReplace
	 * @param  {string} oldDefinition
	 * @param  {string} newDefinition
	 * @return {void}
	 */
	var songReplace = function(oldDefinition, newDefinition) {
		var e = document.getElementById(_ids.source);
		e.value = replaceAll(e.value, oldDefinition, newDefinition);
		ugsEditorPlus.actions.run();
	};

	/**
	 * Loops over all lines in "text" and extracts any {define:...} statements, adding
	 * them to the ChordDictionary.
	 * @method songGetDefinitions
	 */
	var songGetDefinitions = function(text) {
		var defineRegEx = /\{define:\s*([^}]+?)\s+frets[^}]+?\}/im;
		var lines = text.split('\n');
		for (var i = lines.length - 1; i >= 0; i--) {
			if (!defineRegEx.test(lines[i])) {
				continue;
			}
			definitionAdd(lines[i].replace(defineRegEx, '$1'), lines[i]);
		}
	};

	/**
	 * Inserts the passed chord definition into the song (and reruns Sscriptasaurus).
	 * The chord insertion point is at the end of either the song meta tags or the
	 * existing chord defintion block. Determined by the _last_ "header" tag line.
	 * @method songAddDefinition
	 * @param {string} definition
	 */
	var songAddDefinition = function(definition) {
		var choProText = document.getElementById(_ids.source);
		var instructionRegEx = /\s*\{\s*(title|t|artist|subtitle|st|album|define):.*?\}/im;
		var lines = choProText.value.split('\n');
		var html = '';
		var inserted = false;
		for (var i = lines.length - 1; i >= 0; i--) {
			if (!inserted && instructionRegEx.test(lines[i])) {
				html = definition + '\n' + html;
				inserted = true;
			}
			html = lines[i] + '\n' + html;
		}
		if (!inserted) {
			html = definition + '\n' + choProText.value;
		}
		choProText.value = html;
		ugsEditorPlus.actions.run();
	};

	/**
	 * Returns Index of Id within the chord Dictionary or -1 if not found.
	 * @method dictionaryGetIndex
	 * @param  {int} id
	 * @return {int}
	 */
	var dictionaryGetIndex = function(id) {
		for (var i = 0; i < _chordDictionary.length; i++) {
			if ('' + _chordDictionary[i].id == id) {
				return i;
			}
		}
		return -1;
	};

	/**
	 * Returns index of the duplicate chord name. Pass in Id of the chord to be ignored,
	 * (i.e. the one currently being edited). Comparison ignores case. Returns -1 if no
	 * dupe is found.
	 * @method dictionaryFindDupes
	 * @param  {int} id
	 * @param  {string} name
	 * @return {int}
	 */
	var dictionaryFindDupes = function(id, name) {
		var search = name.toLowerCase();
		for (var i = _chordDictionary.length - 1; i >= 0; i--) {
			if (('' + _chordDictionary[i].id != '' + id) && (_chordDictionary[i].name.toLowerCase() == search)) {
				return i;
			}
		}

		return -1;
	};

	/**
	 * Returns the entry for Id from Chord Dictionary
	 * @method dictionaryFind
	 * @param  {int} id
	 * @return {ChordDefinition}
	 */
	var dictionaryFind = function(id) {
		var i = dictionaryGetIndex(id);
		return i >= 0 ? _chordDictionary[i] : null;
	};

	/**
	 * Adds new chord definition to our Dictionary array. Returns the
	 * new item's Id (int).
	 * @method definitionAdd
	 * @param {string} name
	 * @param {string} definition
	 * @return {int}
	 */
	var definitionAdd = function(name, definition) {
		var chord = new ChordDefinition(name, definition);
		_chordDictionary.push(chord);
		return chord.id;
	};

	// ---------------------------------------
	// return public interface
	// ---------------------------------------
	return _public;

}());
;/**
 * Doing
 * @class editorUi
 * @constructor
 * @namespace ugsChordBuilder
 */
ugsChordBuilder.editorUi = function() {

	var _ids = {
		// top-most container, the "master drawing surface"
		container: 'cdBldEditorSurface',
		// stacked canvas elements
		cursorCanvas: 'cdBldCursorCanvas',
		diagramCanvas: 'cdBldDiagramCanvas',
		// chord definition meta: name & fret
		startingFret: 'cdBldStartingFret',
		chordName: 'cdBldChordName',
		// container wrapping sliding toolbox pallet
		toolbox: 'cdBldToolbox',
		// toolbox buttons:
		dotsBtn: 'cdBldDotsBtn',
		fingersBtn: 'cdBldFingersBtn',
		slideUpBtn: 'toolboxSlideUpBtn',
		slideDownBtn: 'toolboxSlideDownBtn',
		// display on "Hand" toolbox button
		btnFingerName: 'cdBldBtnFingerName',
		btnHandPic: 'cdBldBtnDiagram',
		// container for generated chordPro "define" tag (colorized)
		output: 'cdBldOutput',
		// show/hide definition output & container where we'll stuff the colorized definition
		showOutputBtn: 'cdBldShowOutputBtn',
		outputBox: 'cdBldOutputBox',
		cancelBtn: 'cdBldCancelBtn',
		saveBtn: 'cdBldSaveBtn'
		// openBtn: 'cdBldOpenBtn'
	};

	var _cursorCanvas = null,
		_eleDotsBtn = null,
		_eleFingerBtn = null;

	var _startingFret = 1;
	var _currentName = '';

	var _isDotToolActive = true;
	var _finger = 0;

	/**
	 * A "reverse Enum" dictionary of finger number to description
	 * @attribute _fingerNames
	 * @type {JSON}
	 */
	var _fingerNames = {
		0: 'None',
		1: 'Index finger',
		2: 'Middle finger',
		3: 'Ring finger',
		4: 'Pinkie'
	};

	/**
	 * Returns FALSE if canvas is not supported
	 * @method init
	 * @return {bool}
	 */
	this.init = function() {
		_cursorCanvas = document.getElementById(_ids.cursorCanvas);
		if (!_cursorCanvas.getContext) {
			return false;
		}

		var cursorContext = _cursorCanvas.getContext('2d');
		var diagramContext = document.getElementById(_ids.diagramCanvas).getContext('2d');

		var ele = document.getElementById(_ids.startingFret);
		addStartingFretOptions(ele);
		ele.addEventListener('change', onFretChange, false);

		document.getElementById(_ids.chordName).addEventListener('keyup', onNameChange, false);

		_eleDotsBtn = document.getElementById(_ids.dotsBtn);
		_eleFingerBtn = document.getElementById(_ids.fingersBtn);
		_eleDotsBtn.addEventListener('click', toggleTool, false);
		_eleFingerBtn.addEventListener('click', toggleTool, false);

		document.getElementById(_ids.showOutputBtn).addEventListener('click', showOutputBox, false);
		document.getElementById(_ids.cancelBtn).addEventListener('click', onCancelClick, false);
		document.getElementById(_ids.saveBtn).addEventListener('click', onSaveClick, false);

		document.getElementById(_ids.slideUpBtn).addEventListener('click', slide, false);
		document.getElementById(_ids.slideDownBtn).addEventListener('click', slide, false);

		updateFinger();

		document.getElementById(_ids.container).addEventListener('mousemove', onMouseMove, false);
		_cursorCanvas.addEventListener('click', onMouseClick, false);

		ugsChordBuilder.chordCanvas.init(diagramContext, _cursorCanvas);
		ugsChordBuilder.cursorCanvas.init(cursorContext);

		redraw();
		exportDefinition();

		ugsChordBuilder.chooserList.init(setChord);

		return true;
	};

	/**
	 * Successively clicking the Finger tool cycles through index to pinky, then none, and so on.
	 * This method automatically increments the "currently active finger" (odd sentence, that)
	 * and updates the toolbox UI.
	 * Note: changing the cursor is not handled here.
	 * @method updateFinger
	 * @private
	 * @return {void}
	 */
	var updateFinger = function() {
		_finger++;
		if (_finger > 4) {
			_finger = 0;
		}
		document.getElementById(_ids.btnFingerName).innerHTML = _fingerNames[_finger] + ' (' + _finger + ')';
		document.getElementById(_ids.btnHandPic).className = 'fingerToolImage finger' + _finger;
	};

	/**
	 * @method
	 * @private
	 * @return {void}
	 */
	var showOutputBox = function(evt) {
		setClass(document.getElementById(_ids.outputBox), 'collapseOutput', !evt.target.checked);
	};

	/**
	 * Cancel button's click event handler
	 * @method onCancelClick
	 */
	var onCancelClick = function(evt) {
		evt.preventDefault();
		reset();
		ugsChordBuilder.chooserList.show(true);
	};

	/**
	 * Save button's click event handler
	 * @method onSaveClick
	 */
	var onSaveClick = function(evt) {
		evt.preventDefault();
		var d = {
			name: _currentName,
			startingFret: _startingFret,
			dots: ugsChordBuilder.fretDots.getDots(),
			definition: ugsChordBuilder.export.getDefinition(_currentName, _startingFret)
		};
		if (!ugsChordBuilder.chooserList.save(d)) {
			var e = document.getElementById(_ids.chordName);
			e.focus();
			e.select();
		}
	};

	/**
	 * DANGER!! this is really a public method! A reference to this is passed to the
	 * scrapper during its initialization. Used to load ths Chord Builder
	 * @method setChord
	 * @param {Chord} chord
	 */
	var setChord = function(chord) {
		var isNew = chord == null;
		if (isNew) {
			reset();
			return;
		}

		var maxFret = findMaxFret(chord.dots);
		var startingFret = (maxFret > ugsChordBuilder.settings.fretBoard.numFrets) ? maxFret - ugsChordBuilder.settings.fretBoard.numFrets + 1 : 1;
		reset(chord.name, startingFret, convertDots(startingFret, chord.dots), false);
	};

	/**
	 * Converts standard scriptasaurus Dot array to chordBuilder dot array (fret changes)
	 * @method convertDots
	 * @param {int} startingFret
	 * @param  {array} builderDots
	 * @return {array}
	 */
	var convertDots = function(startingFret, builderDots) {
		var offset = startingFret - 1;
		var ugsDots = [];
		for (var i = 0; i < builderDots.length; i++) {
			var fret = builderDots[i].fret - offset;
			ugsDots.push(new ugsChordBuilder.entities.Dot(builderDots[i].string, (fret < 0 ? 0 : fret), builderDots[i].finger));
		}
		return ugsDots;
	};

	/**
	 * Loops over dots to find the largest fret value
	 * @method findMaxFret
	 * @param  {array} dots
	 * @return {ing}
	 */
	var findMaxFret = function(dots) {
		var max = 0;
		for (var i = 0; i < dots.length; i++) {
			if (dots[i].fret > max) {
				max = dots[i].fret;
			}
		}
		return max;
	};

	/**
	 * Updates the "standard form-like inputs"
	 * @method resetInputs
	 * @param {string} name
	 * @param {int} startingFret
	 * @param {bool} isNew
	 * @return {void}
	 */
	var resetInputs = function(name, startingFret, isNew) {
		_currentName = (name && name.length > 0) ? name : 'CHORDNAME';
		document.getElementById(_ids.chordName).value = _currentName;

		_startingFret = startingFret ? startingFret : 1;
		document.getElementById(_ids.startingFret).value = _startingFret;

		document.getElementById(_ids.showOutputBtn).checked = false;
		setClass(document.getElementById(_ids.outputBox), 'collapseOutput', true);

		document.getElementById(_ids.saveBtn).value = isNew ? 'Add' : 'Update';
	};

	/**
	 * Updates the Toolbox's current tool to be "Add Dot"; sets properties required for cursor, etc.
	 * @method resetCurrentTool
	 */
	var resetCurrentTool = function() {
		// restore current drawing tool (this is lame-o)
		// -----------------------------------------------
		_isDotToolActive = true;
		_finger = 0;
		updateFinger();
		setClass(_eleDotsBtn, 'selected', _isDotToolActive);
		setClass(_eleFingerBtn, 'selected', !_isDotToolActive);
		setClass(document.getElementById(_ids.toolbox), 'open', !_isDotToolActive);
		ugsChordBuilder.cursorCanvas.setCursor(_isDotToolActive, _finger);
	};

	/**
	 * Does a complete UI reset (if no values provided in params), otherwise this is kinda a "set"
	 * @method reset
	 * @param {string} name Chord name
	 * @param {int} startingFret
	 * @param {array} dots
	 * @param {bool} isNew Used to set the button text
	 */
	var reset = function(name, startingFret, dots, isNew) {
		isNew = arguments.length > 3 ? isNew : true;
		// fire cleanup on other classes...
		// -----------------------------------------------
		ugsChordBuilder.fretDots.reset();

		// easy elements back to default...
		// -----------------------------------------------
		resetInputs(name, startingFret, isNew);

		resetCurrentTool();

		if (dots && dots.length > 0) {
			for (var i = 0; i < dots.length; i++) {
				ugsChordBuilder.fretDots.toggleDot(dots[i]);
			}
		}

		// ok, probably done
		// -----------------------------------------------
		redraw();
		exportDefinition();
	};

	/**
	 * @method
	 * @private
	 * @return {void}
	 */
	var toggleTool = function(evt) {
		evt.preventDefault();
		var useDotTool = evt.currentTarget.href.indexOf('#dots') >= 0;
		if (useDotTool == _isDotToolActive) {
			if (!useDotTool) {
				updateFinger();
				ugsChordBuilder.cursorCanvas.setCursor(_isDotToolActive, _finger);
			}
			return;
		}

		setClass(_eleDotsBtn, 'selected', useDotTool);
		setClass(_eleFingerBtn, 'selected', !useDotTool);
		setClass(document.getElementById(_ids.toolbox), 'open', !useDotTool);

		_isDotToolActive = useDotTool;
		ugsChordBuilder.cursorCanvas.setCursor(_isDotToolActive, _finger);
	};

	/**
	 * Yet another poor man's jQuery envying add/remove CSS class method.
	 * @method
	 * @private
	 * @return {void}
	 */
	var setClass = function(element, className, isSet) {
		var hasClass = element.className.indexOf(className) >= 0;
		if (isSet && !hasClass) {
			// add
			element.className += ' ' + className;
		}
		else if (!isSet && hasClass) {
			// remove
			element.className = element.className.replace(className, '').replace(/\s+/g, ' ');
		}
	};

	/**
	 * @method
	 * @private
	 * @return {void}
	 */
	var addStartingFretOptions = function(ele) {
		var s = '';
		var lastValue = ugsChordBuilder.settings.fretBoard.maxFret - ugsChordBuilder.settings.fretBoard.numFrets + 1;
		for (var i = 1; i <= lastValue; i++) {
			s += '<option value="' + i + '">' + i + '</option>';
		}
		ele.innerHTML = s;
	};

	/**
	 * @method
	 * @private
	 * @return {void}
	 */
	var onNameChange = function(evt) {
		_currentName = this.value;
		exportDefinition();
	};

	/**
	 * @method
	 * @private
	 * @return {void}
	 */
	var onFretChange = function(evt) {
		_startingFret = parseInt(this.value, 10);
		exportDefinition();
		redraw();
	};

	/**
	 * Needs to watch for closed chords!
	 * @method
	 * @private
	 * @return {void}
	 */
	var slide = function(evt) {
		evt.preventDefault();
		var moveAllowed = false;
		var numSteps = evt.target.getAttribute('data-direction') == 'up' ? -1 : +1;
		if (ugsChordBuilder.fretDots.slide(numSteps)) {
			moveAllowed = true;
		}
		else {
			var newStart = _startingFret + numSteps;
			var lastValue = ugsChordBuilder.settings.fretBoard.maxFret - ugsChordBuilder.settings.fretBoard.numFrets + 1;
			if ((newStart >= 1) && (newStart <= lastValue)) {
				_startingFret = newStart;
				document.getElementById(_ids.startingFret).value = newStart;
				moveAllowed = true;
			}
		}

		if (moveAllowed) {
			redraw();
			exportDefinition();
		}
	};

	/**
	 * @method
	 * @private
	 * @return {void}
	 */
	var onMouseMove = function(evt) {
		ugsChordBuilder.cursorCanvas.draw(getPosition(this, evt));
	};

	/**
	 * @method
	 * @private
	 * @return {void}
	 */
	var onMouseClick = function(evt) {
		var pos = getPosition(_cursorCanvas, evt);
		var dot = ugsChordBuilder.tracking.toDot(pos);
		if (!dot) {
			return;
		}

		if (_isDotToolActive) {
			ugsChordBuilder.fretDots.toggleDot(dot);
			redraw(pos);
			exportDefinition();
		}
		else if (ugsChordBuilder.fretDots.toggleFinger(dot, _finger)) {
			redraw(pos);
			exportDefinition();
		}
	};

	/**
	 * @method
	 * @private
	 * @return {void}
	 */
	var getPosition = function(canvas, evt) {
		var rect = canvas.getBoundingClientRect();
		return new ugsChordBuilder.entities.Position(
			evt.clientX - rect.left,
			evt.clientY - rect.top
		);
	};

	/**
	 * @method
	 * @private
	 * @return {void}
	 */
	var redraw = function(pos) {
		pos = pos || new ugsChordBuilder.entities.Position(0, 0);
		ugsChordBuilder.chordCanvas.draw(pos, _startingFret);
	};

	/**
	 * @method
	 * @private
	 * @return {void}
	 */
	var exportDefinition = function() {
		document.getElementById(_ids.output).innerHTML = ugsChordBuilder.export.getDefinitionHtml(_currentName, _startingFret);
	};

	this.reload = function() {
		reset();
		ugsChordBuilder.chooserList.reset();
		ugsChordBuilder.chooserList.show(true);
	};

};
;/*jslint browser: true, eqeqeq: true, bitwise: true, newcap: true, immed: true, regexp: false */

/**
LazyLoad makes it easy and painless to lazily load one or more external
JavaScript or CSS files on demand either during or after the rendering of a web
page.

Supported browsers include Firefox 2+, IE6+, Safari 3+ (including Mobile
Safari), Google Chrome, and Opera 9+. Other browsers may or may not work and
are not officially supported.

Visit https://github.com/rgrove/lazyload/ for more info.

Copyright (c) 2011 Ryan Grove <ryan@wonko.com>
All rights reserved.

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the 'Software'), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
the Software, and to permit persons to whom the Software is furnished to do so,
subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

@module lazyload
@class LazyLoad
@static
*/

LazyLoad = (function (doc) {
  // -- Private Variables ------------------------------------------------------

  // User agent and feature test information.
  var env,

  // Reference to the <head> element (populated lazily).
  head,

  // Requests currently in progress, if any.
  pending = {},

  // Number of times we've polled to check whether a pending stylesheet has
  // finished loading. If this gets too high, we're probably stalled.
  pollCount = 0,

  // Queued requests.
  queue = {css: [], js: []},

  // Reference to the browser's list of stylesheets.
  styleSheets = doc.styleSheets;

  // -- Private Methods --------------------------------------------------------

  /**
  Creates and returns an HTML element with the specified name and attributes.

  @method createNode
  @param {String} name element name
  @param {Object} attrs name/value mapping of element attributes
  @return {HTMLElement}
  @private
  */
  function createNode(name, attrs) {
    var node = doc.createElement(name), attr;

    for (attr in attrs) {
      if (attrs.hasOwnProperty(attr)) {
        node.setAttribute(attr, attrs[attr]);
      }
    }

    return node;
  }

  /**
  Called when the current pending resource of the specified type has finished
  loading. Executes the associated callback (if any) and loads the next
  resource in the queue.

  @method finish
  @param {String} type resource type ('css' or 'js')
  @private
  */
  function finish(type) {
    var p = pending[type],
        callback,
        urls;

    if (p) {
      callback = p.callback;
      urls     = p.urls;

      urls.shift();
      pollCount = 0;

      // If this is the last of the pending URLs, execute the callback and
      // start the next request in the queue (if any).
      if (!urls.length) {
        callback && callback.call(p.context, p.obj);
        pending[type] = null;
        queue[type].length && load(type);
      }
    }
  }

  /**
  Populates the <code>env</code> variable with user agent and feature test
  information.

  @method getEnv
  @private
  */
  function getEnv() {
    var ua = navigator.userAgent;

    env = {
      // True if this browser supports disabling async mode on dynamically
      // created script nodes. See
      // http://wiki.whatwg.org/wiki/Dynamic_Script_Execution_Order
      async: doc.createElement('script').async === true
    };

    (env.webkit = /AppleWebKit\//.test(ua))
      || (env.ie = /MSIE|Trident/.test(ua))
      || (env.opera = /Opera/.test(ua))
      || (env.gecko = /Gecko\//.test(ua))
      || (env.unknown = true);
  }

  /**
  Loads the specified resources, or the next resource of the specified type
  in the queue if no resources are specified. If a resource of the specified
  type is already being loaded, the new request will be queued until the
  first request has been finished.

  When an array of resource URLs is specified, those URLs will be loaded in
  parallel if it is possible to do so while preserving execution order. All
  browsers support parallel loading of CSS, but only Firefox and Opera
  support parallel loading of scripts. In other browsers, scripts will be
  queued and loaded one at a time to ensure correct execution order.

  @method load
  @param {String} type resource type ('css' or 'js')
  @param {String|Array} urls (optional) URL or array of URLs to load
  @param {Function} callback (optional) callback function to execute when the
    resource is loaded
  @param {Object} obj (optional) object to pass to the callback function
  @param {Object} context (optional) if provided, the callback function will
    be executed in this object's context
  @private
  */
  function load(type, urls, callback, obj, context) {
    var _finish = function () { finish(type); },
        isCSS   = type === 'css',
        nodes   = [],
        i, len, node, p, pendingUrls, url;

    env || getEnv();

    if (urls) {
      // If urls is a string, wrap it in an array. Otherwise assume it's an
      // array and create a copy of it so modifications won't be made to the
      // original.
      urls = typeof urls === 'string' ? [urls] : urls.concat();

      // Create a request object for each URL. If multiple URLs are specified,
      // the callback will only be executed after all URLs have been loaded.
      //
      // Sadly, Firefox and Opera are the only browsers capable of loading
      // scripts in parallel while preserving execution order. In all other
      // browsers, scripts must be loaded sequentially.
      //
      // All browsers respect CSS specificity based on the order of the link
      // elements in the DOM, regardless of the order in which the stylesheets
      // are actually downloaded.
      if (isCSS || env.async || env.gecko || env.opera) {
        // Load in parallel.
        queue[type].push({
          urls    : urls,
          callback: callback,
          obj     : obj,
          context : context
        });
      } else {
        // Load sequentially.
        for (i = 0, len = urls.length; i < len; ++i) {
          queue[type].push({
            urls    : [urls[i]],
            callback: i === len - 1 ? callback : null, // callback is only added to the last URL
            obj     : obj,
            context : context
          });
        }
      }
    }

    // If a previous load request of this type is currently in progress, we'll
    // wait our turn. Otherwise, grab the next item in the queue.
    if (pending[type] || !(p = pending[type] = queue[type].shift())) {
      return;
    }

    head || (head = doc.head || doc.getElementsByTagName('head')[0]);
    pendingUrls = p.urls.concat();

    for (i = 0, len = pendingUrls.length; i < len; ++i) {
      url = pendingUrls[i];

      if (isCSS) {
          node = env.gecko ? createNode('style') : createNode('link', {
            href: url,
            rel : 'stylesheet'
          });
      } else {
        node = createNode('script', {src: url});
        node.async = false;
      }

      node.className = 'lazyload';
      node.setAttribute('charset', 'utf-8');

      if (env.ie && !isCSS && 'onreadystatechange' in node && !('draggable' in node)) {
        node.onreadystatechange = function () {
          if (/loaded|complete/.test(node.readyState)) {
            node.onreadystatechange = null;
            _finish();
          }
        };
      } else if (isCSS && (env.gecko || env.webkit)) {
        // Gecko and WebKit don't support the onload event on link nodes.
        if (env.webkit) {
          // In WebKit, we can poll for changes to document.styleSheets to
          // figure out when stylesheets have loaded.
          p.urls[i] = node.href; // resolve relative URLs (or polling won't work)
          pollWebKit();
        } else {
          // In Gecko, we can import the requested URL into a <style> node and
          // poll for the existence of node.sheet.cssRules. Props to Zach
          // Leatherman for calling my attention to this technique.
          node.innerHTML = '@import "' + url + '";';
          pollGecko(node);
        }
      } else {
        node.onload = node.onerror = _finish;
      }

      nodes.push(node);
    }

    for (i = 0, len = nodes.length; i < len; ++i) {
      head.appendChild(nodes[i]);
    }
  }

  /**
  Begins polling to determine when the specified stylesheet has finished loading
  in Gecko. Polling stops when all pending stylesheets have loaded or after 10
  seconds (to prevent stalls).

  Thanks to Zach Leatherman for calling my attention to the @import-based
  cross-domain technique used here, and to Oleg Slobodskoi for an earlier
  same-domain implementation. See Zach's blog for more details:
  http://www.zachleat.com/web/2010/07/29/load-css-dynamically/

  @method pollGecko
  @param {HTMLElement} node Style node to poll.
  @private
  */
  function pollGecko(node) {
    var hasRules;

    try {
      // We don't really need to store this value or ever refer to it again, but
      // if we don't store it, Closure Compiler assumes the code is useless and
      // removes it.
      hasRules = !!node.sheet.cssRules;
    } catch (ex) {
      // An exception means the stylesheet is still loading.
      pollCount += 1;

      if (pollCount < 200) {
        setTimeout(function () { pollGecko(node); }, 50);
      } else {
        // We've been polling for 10 seconds and nothing's happened. Stop
        // polling and finish the pending requests to avoid blocking further
        // requests.
        hasRules && finish('css');
      }

      return;
    }

    // If we get here, the stylesheet has loaded.
    finish('css');
  }

  /**
  Begins polling to determine when pending stylesheets have finished loading
  in WebKit. Polling stops when all pending stylesheets have loaded or after 10
  seconds (to prevent stalls).

  @method pollWebKit
  @private
  */
  function pollWebKit() {
    var css = pending.css, i;

    if (css) {
      i = styleSheets.length;

      // Look for a stylesheet matching the pending URL.
      while (--i >= 0) {
        if (styleSheets[i].href === css.urls[0]) {
          finish('css');
          break;
        }
      }

      pollCount += 1;

      if (css) {
        if (pollCount < 200) {
          setTimeout(pollWebKit, 50);
        } else {
          // We've been polling for 10 seconds and nothing's happened, which may
          // indicate that the stylesheet has been removed from the document
          // before it had a chance to load. Stop polling and finish the pending
          // request to prevent blocking further requests.
          finish('css');
        }
      }
    }
  }

  return {

    /**
    Requests the specified CSS URL or URLs and executes the specified
    callback (if any) when they have finished loading. If an array of URLs is
    specified, the stylesheets will be loaded in parallel and the callback
    will be executed after all stylesheets have finished loading.

    @method css
    @param {String|Array} urls CSS URL or array of CSS URLs to load
    @param {Function} callback (optional) callback function to execute when
      the specified stylesheets are loaded
    @param {Object} obj (optional) object to pass to the callback function
    @param {Object} context (optional) if provided, the callback function
      will be executed in this object's context
    @static
    */
    css: function (urls, callback, obj, context) {
      load('css', urls, callback, obj, context);
    },

    /**
    Requests the specified JavaScript URL or URLs and executes the specified
    callback (if any) when they have finished loading. If an array of URLs is
    specified and the browser supports it, the scripts will be loaded in
    parallel and the callback will be executed after all scripts have
    finished loading.

    Currently, only Firefox and Opera support parallel loading of scripts while
    preserving execution order. In other browsers, scripts will be
    queued and loaded one at a time to ensure correct execution order.

    @method js
    @param {String|Array} urls JS URL or array of JS URLs to load
    @param {Function} callback (optional) callback function to execute when
      the specified scripts are loaded
    @param {Object} obj (optional) object to pass to the callback function
    @param {Object} context (optional) if provided, the callback function
      will be executed in this object's context
    @static
    */
    js: function (urls, callback, obj, context) {
      load('js', urls, callback, obj, context);
    }

  };
})(this.document);

</script>
<script type="text/javascript">
var ugs_settings = {};
</script>
<script type="text/javascript">
window.onload=(function() {
	var ugs_settings = window.ugs_settings || {};
	ugs_settings.useLegacyIe = isLegacyIe;
	ugsEditorPlus.songAmatic.init(ugs_settings);

	});
</script>
</body>
</html>